var hn=Object.defineProperty;var pn=(r,e,t)=>e in r?hn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var b=(r,e,t)=>(pn(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function I(){}const mn=r=>r;function vn(r){return r&&typeof r=="object"&&typeof r.then=="function"}function Or(r){return r()}function Gt(){return Object.create(null)}function ke(r){r.forEach(Or)}function Rt(r){return typeof r=="function"}function ce(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let et;function pe(r,e){return et||(et=document.createElement("a")),et.href=e,r===et.href}function yn(r){return Object.keys(r).length===0}function Pr(r,...e){if(r==null)return I;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Rr(r){let e;return Pr(r,t=>e=t)(),e}function q(r,e,t){r.$$.on_destroy.push(Pr(e,t))}const kr=typeof window<"u";let gn=kr?()=>window.performance.now():()=>Date.now(),kt=kr?r=>requestAnimationFrame(r):I;const Me=new Set;function jr(r){Me.forEach(e=>{e.c(r)||(Me.delete(e),e.f())}),Me.size!==0&&kt(jr)}function wn(r){let e;return Me.size===0&&kt(jr),{promise:new Promise(t=>{Me.add(e={c:r,f:t})}),abort(){Me.delete(e)}}}function A(r,e){r.appendChild(e)}function Nr(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function bn(r){const e=_("style");return Dn(Nr(r),e),e.sheet}function Dn(r,e){return A(r.head||r,e),e.sheet}function R(r,e,t){r.insertBefore(e,t||null)}function P(r){r.parentNode&&r.parentNode.removeChild(r)}function _(r){return document.createElement(r)}function te(r){return document.createTextNode(r)}function M(){return te(" ")}function jt(){return te("")}function V(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function v(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function En(r){return Array.from(r.childNodes)}function Ee(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function X(r,e,t,n){t===null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}function De(r,e,t){r.classList[t?"add":"remove"](e)}function Kt(r,e){return new r(e)}const ot=new Map;let st=0;function An(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function _n(r,e){const t={stylesheet:bn(e),rules:{}};return ot.set(r,t),t}function Fn(r,e,t,n,i,o,s,a=0){const u=16.666/n;let l=`{
`;for(let w=0;w<=1;w+=u){const y=e+(t-e)*o(w);l+=w*100+`%{${s(y,1-y)}}
`}const c=l+`100% {${s(t,1-t)}}
}`,d=`__svelte_${An(c)}_${a}`,h=Nr(r),{stylesheet:f,rules:p}=ot.get(h)||_n(h,r);p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${c}`,f.cssRules.length));const g=r.style.animation||"";return r.style.animation=`${g?`${g}, `:""}${d} ${n}ms linear ${i}ms 1 both`,st+=1,d}function xn(r,e){const t=(r.style.animation||"").split(", "),n=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-n.length;i&&(r.style.animation=n.join(", "),st-=i,st||Sn())}function Sn(){kt(()=>{st||(ot.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&P(e)}),ot.clear())})}function On(r,e,t,n){if(!e)return I;const i=r.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return I;const{delay:o=0,duration:s=300,easing:a=mn,start:u=gn()+o,end:l=u+s,tick:c=I,css:d}=t(r,{from:e,to:i},n);let h=!0,f=!1,p;function g(){d&&(p=Fn(r,0,1,s,o,a,d)),o||(f=!0)}function w(){d&&xn(r,p),h=!1}return wn(y=>{if(!f&&y>=u&&(f=!0),f&&y>=l&&(c(1,0),w()),!h)return!1;if(f){const E=y-u,m=0+1*a(E/s);c(m,1-m)}return!0}),g(),c(0,1),w}function Pn(r){const e=getComputedStyle(r);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:n}=e,i=r.getBoundingClientRect();r.style.position="absolute",r.style.width=t,r.style.height=n,Rn(r,i)}}function Rn(r,e){const t=r.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const n=getComputedStyle(r),i=n.transform==="none"?"":n.transform;r.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Xe;function he(r){Xe=r}function zr(){if(!Xe)throw new Error("Function called outside component initialization");return Xe}function Ir(r){zr().$$.on_mount.push(r)}const Ue=[],Ge=[],nt=[],Ht=[],kn=Promise.resolve();let Dt=!1;function jn(){Dt||(Dt=!0,kn.then(Nt))}function Et(r){nt.push(r)}const vt=new Set;let tt=0;function Nt(){const r=Xe;do{for(;tt<Ue.length;){const e=Ue[tt];tt++,he(e),Nn(e.$$)}for(he(null),Ue.length=0,tt=0;Ge.length;)Ge.pop()();for(let e=0;e<nt.length;e+=1){const t=nt[e];vt.has(t)||(vt.add(t),t())}nt.length=0}while(Ue.length);for(;Ht.length;)Ht.pop()();Dt=!1,vt.clear(),he(r)}function Nn(r){if(r.fragment!==null){r.update(),ke(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Et)}}const it=new Set;let Se;function zt(){Se={r:0,c:[],p:Se}}function It(){Se.r||ke(Se.c),Se=Se.p}function ue(r,e){r&&r.i&&(it.delete(r),r.i(e))}function me(r,e,t,n){if(r&&r.o){if(it.has(r))return;it.add(r),Se.c.push(()=>{it.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}function Qt(r,e){const t=e.token={};function n(i,o,s,a){if(e.token!==t)return;e.resolved=a;let u=e.ctx;s!==void 0&&(u=u.slice(),u[s]=a);const l=i&&(e.current=i)(u);let c=!1;e.block&&(e.blocks?e.blocks.forEach((d,h)=>{h!==o&&d&&(zt(),me(d,1,1,()=>{e.blocks[h]===d&&(e.blocks[h]=null)}),It())}):e.block.d(1),l.c(),ue(l,1),l.m(e.mount(),e.anchor),c=!0),e.block=l,e.blocks&&(e.blocks[o]=l),c&&Nt()}if(vn(r)){const i=zr();if(r.then(o=>{he(i),n(e.then,1,e.value,o),he(null)},o=>{if(he(i),n(e.catch,2,e.error,o),he(null),!e.hasCatch)throw o}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,r),!0;e.resolved=r}}function zn(r,e,t){const n=e.slice(),{resolved:i}=r;r.current===r.then&&(n[r.value]=i),r.current===r.catch&&(n[r.error]=i),r.block.p(n,t)}function Cr(r,e){r.d(1),e.delete(r.key)}function In(r,e){me(r,1,1,()=>{e.delete(r.key)})}function Cn(r,e){r.f(),Cr(r,e)}function Ct(r,e,t,n,i,o,s,a,u,l,c,d){let h=r.length,f=o.length,p=h;const g={};for(;p--;)g[r[p].key]=p;const w=[],y=new Map,E=new Map;for(p=f;p--;){const F=d(i,o,p),k=t(F);let D=s.get(k);D?n&&D.p(F,e):(D=l(k,F),D.c()),y.set(k,w[p]=D),k in g&&E.set(k,Math.abs(p-g[k]))}const m=new Set,S=new Set;function j(F){ue(F,1),F.m(a,c),s.set(F.key,F),c=F.first,f--}for(;h&&f;){const F=w[f-1],k=r[h-1],D=F.key,x=k.key;F===k?(c=F.first,h--,f--):y.has(x)?!s.has(D)||m.has(D)?j(F):S.has(x)?h--:E.get(D)>E.get(x)?(S.add(D),j(F)):(m.add(x),h--):(u(k,s),h--)}for(;h--;){const F=r[h];y.has(F.key)||u(F,s)}for(;f;)j(w[f-1]);return w}function Te(r){r&&r.c()}function Oe(r,e,t,n){const{fragment:i,after_update:o}=r.$$;i&&i.m(e,t),n||Et(()=>{const s=r.$$.on_mount.map(Or).filter(Rt);r.$$.on_destroy?r.$$.on_destroy.push(...s):ke(s),r.$$.on_mount=[]}),o.forEach(Et)}function Pe(r,e){const t=r.$$;t.fragment!==null&&(ke(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Mn(r,e){r.$$.dirty[0]===-1&&(Ue.push(r),jn(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function ye(r,e,t,n,i,o,s,a=[-1]){const u=Xe;he(r);const l=r.$$={fragment:null,ctx:[],props:o,update:I,not_equal:i,bound:Gt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Gt(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};s&&s(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,h,...f)=>{const p=f.length?f[0]:h;return l.ctx&&i(l.ctx[d],l.ctx[d]=p)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](p),c&&Mn(r,d)),h}):[],l.update(),c=!0,ke(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const d=En(e.target);l.fragment&&l.fragment.l(d),d.forEach(P)}else l.fragment&&l.fragment.c();e.intro&&ue(r.$$.fragment),Oe(r,e.target,e.anchor,e.customElement),Nt()}he(u)}class ge{$destroy(){Pe(this,1),this.$destroy=I}$on(e,t){if(!Rt(t))return I;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!yn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ze=[];function Mr(r,e=I){let t;const n=new Set;function i(a){if(ce(r,a)&&(r=a,t)){const u=!ze.length;for(const l of n)l[1](),ze.push(l,r);if(u){for(let l=0;l<ze.length;l+=2)ze[l][0](ze[l+1]);ze.length=0}}}function o(a){i(a(r))}function s(a,u=I){const l=[a,u];return n.add(l),n.size===1&&(t=e(i)||I),a(r),()=>{n.delete(l),n.size===0&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function $n(){return{close:!0,minimize:!0,maximize:!1}}function K(r=void 0){let e=Mr(r),t={cachedValue:void 0,set(n){t.cachedValue=n,e.set(n)},subscribe:e.subscribe,update(n){let i=n(t.cachedValue);t.cachedValue=i,e.set(i)},get:()=>t.cachedValue};return t}class Tn{constructor(e,t,n,i){b(this,"stores");this.stores=new Vn(e,t,n,i)}get x(){return this.stores.x.get()}set x(e){this.stores.x.set(e)}get y(){return this.stores.y.get()}set y(e){this.stores.y.set(e)}get zIndex(){return this.stores.zIndex.get()}set zIndex(e){this.stores.zIndex.set(e)}get width(){return this.stores.width.get()}set width(e){this.stores.width.set(e)}get height(){return this.stores.height.get()}set height(e){this.stores.height.set(e)}get title(){return this.stores.title.get()}set title(e){this.stores.title.set(e)}get classes(){return this.stores.classes.get()}set classes(e){this.stores.classes.set(e)}get style(){return this.stores.style.get()}set style(e){this.stores.style.set(e)}get resizable(){return this.stores.resizable.get()}set resizable(e){this.stores.resizable.set(e)}get important(){return this.stores.important.get()}set important(e){this.stores.important.set(e)}get isVisible(){return this.stores.isVisible.get()}set isVisible(e){this.stores.isVisible.set(e)}get icon(){return this.stores.icon.get()}set icon(e){this.stores.icon.set(e)}get controlButtons(){return this.stores.controlButtons.get()}set controlButtons(e){this.stores.controlButtons.set(e)}}class Vn{constructor(e,t,n,i){b(this,"classes",K(""));b(this,"style",K(""));b(this,"title",K());b(this,"icon",K());b(this,"resizable",K(!1));b(this,"important",K(!1));b(this,"isVisible",K(!0));b(this,"controlButtons",K($n()));b(this,"height");b(this,"width");b(this,"x");b(this,"y");b(this,"zIndex",K(0));this.x=K(e),this.y=K(t),this.width=K(n),this.height=K(i)}}class Le{constructor(e,t=void 0){b(this,"window");b(this,"listeners",[]);b(this,"listen",e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!=e)}));b(this,"trigger",(e=void 0)=>{this.listeners.forEach(t=>{t(this.window,e??this.defaultOptions)})});this.defaultOptions=t,this.window=e}}const oe=class extends Tn{constructor(t,n,i,o,s){super(t,n,i,o);b(this,"_process");b(this,"windowElement");b(this,"onPopInEnd",t=>{let n=this.windowElement,i=o=>{o.animationName=="pop-in"&&(n.removeEventListener("animationend",i),t(),n.style.animationDirection="normal")};this.windowElement.addEventListener("animationend",i)});b(this,"playCloseAnimation",()=>{this.windowElement.classList.remove("window-spawn"),this.windowElement.style.animationDirection="reverse",this.windowElement.offsetWidth,this.windowElement.classList.add("window-spawn")});b(this,"kill",()=>{this.closeEvent.trigger();let t=oe.windows.filter(n=>n!=this);oe.windowsStore.set(t),this.process.getWindows().length==0&&this.process.kill()});b(this,"dragStart",new Le(this));b(this,"dragStop",new Le(this));b(this,"onFocus",new Le(this));b(this,"onUnfocus",new Le(this));b(this,"closeEvent",new Le(this));this.component=s}static get activeWindow(){return this.activeWindowStore.get()}static set activeWindow(t){var n,i;t!=this.activeWindow&&((i=(n=this.activeWindow)==null?void 0:n.onUnfocus)==null||i.trigger()),t!=null&&(t.process.lastActiveWindow=t,t.onFocus.trigger()),this.activeWindowStore.set(t)}static getWindows(){return[...this.windows]}get process(){return this._process}get isAlive(){return this._process!=null}get isActive(){return oe.activeWindow==this}get isVisible(){return Rr(this.stores.isVisible)}set isVisible(t){t==!1?(this.playCloseAnimation(),this.onPopInEnd(()=>{this.stores.isVisible.set(!1),oe.activeWindow==this&&(oe.activeWindow=void 0)})):this.stores.isVisible.set(!0)}hide(){this.isVisible=!1}unhide(){this.isVisible=!0}close(){this.playCloseAnimation(),this.onPopInEnd(this.kill)}};let T=oe;b(T,"windowsStore",K([])),b(T,"windows"),b(T,"activeWindowStore",K(void 0)),b(T,"spawn",(t,n)=>(oe.windowsStore.set([...oe.windows,t]),t._process=n,t.title==null&&(t.title=t.process.app.name),t)),(()=>{oe.windowsStore.subscribe(t=>{oe.windows=t})})();let $r=0;const Ye=()=>$r++,er=()=>$r;function tr(r){let e;return{c(){e=_("div"),X(e,"height",r[2]+"px"),X(e,"width",r[5]+"px"),v(e,"class","absolute")},m(t,n){R(t,e,n)},p(t,n){n&4&&X(e,"height",t[2]+"px"),n&32&&X(e,"width",t[5]+"px")},d(t){t&&P(e)}}}function Zn(r){let e,t,n,i,o,s=r[1]&&tr(r);var a=r[0].component;function u(l){return{props:{window:l[0],process:l[0].process}}}return a&&(n=Kt(a,u(r))),{c(){e=_("div"),s&&s.c(),t=M(),n&&Te(n.$$.fragment),v(e,"style",i="height: "+r[2]+"px;"+r[3]),v(e,"class",r[4]),De(e,"overflow-y-scroll",!0),De(e,"scrollbar-hide",!0)},m(l,c){R(l,e,c),s&&s.m(e,null),A(e,t),n&&Oe(n,e,null),o=!0},p(l,[c]){l[1]?s?s.p(l,c):(s=tr(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null);const d={};if(c&1&&(d.window=l[0]),c&1&&(d.process=l[0].process),a!==(a=l[0].component)){if(n){zt();const h=n;me(h.$$.fragment,1,0,()=>{Pe(h,1)}),It()}a?(n=Kt(a,u(l)),Te(n.$$.fragment),ue(n.$$.fragment,1),Oe(n,e,null)):n=null}else a&&n.$set(d);(!o||c&12&&i!==(i="height: "+l[2]+"px;"+l[3]))&&v(e,"style",i),(!o||c&16)&&v(e,"class",l[4]),(!o||c&16)&&De(e,"overflow-y-scroll",!0),(!o||c&16)&&De(e,"scrollbar-hide",!0)},i(l){o||(n&&ue(n.$$.fragment,l),o=!0)},o(l){n&&me(n.$$.fragment,l),o=!1},d(l){l&&P(e),s&&s.d(),n&&Pe(n)}}}function Wn(r,e,t){let n,i,o,s,{window:a}=e,{notImportant:u}=e,{style:l,classes:c,height:d,width:h}=a.stores;return q(r,l,f=>t(3,i=f)),q(r,c,f=>t(4,o=f)),q(r,d,f=>t(2,n=f)),q(r,h,f=>t(5,s=f)),r.$$set=f=>{"window"in f&&t(0,a=f.window),"notImportant"in f&&t(1,u=f.notImportant)},[a,u,n,i,o,s,l,c,d,h]}class Ln extends ge{constructor(e){super(),ye(this,e,Wn,Zn,ce,{window:0,notImportant:1})}}function rr(r){let e,t,n;return{c(){e=_("img"),pe(e.src,t=r[8])||v(e,"src",t),v(e,"alt",n=r[9]+" icon"),v(e,"height",18),v(e,"width",18),v(e,"class","ml-1.5")},m(i,o){R(i,e,o)},p(i,o){o[0]&256&&!pe(e.src,t=i[8])&&v(e,"src",t),o[0]&512&&n!==(n=i[9]+" icon")&&v(e,"alt",n)},d(i){i&&P(e)}}}function qn(r){let e,t;return{c(){e=_("span"),t=te(r[9]),v(e,"class","pl-2 text-gray-400")},m(n,i){R(n,e,i),A(e,t)},p(n,i){i[0]&512&&Ee(t,n[9])},d(n){n&&P(e)}}}function Bn(r){let e,t;return{c(){e=_("span"),t=te(r[9]),v(e,"class","pl-2")},m(n,i){R(n,e,i),A(e,t)},p(n,i){i[0]&512&&Ee(t,n[9])},d(n){n&&P(e)}}}function nr(r){let e,t,n;return{c(){e=_("span"),e.textContent="_",v(e,"class","pr-1.5")},m(i,o){R(i,e,o),t||(n=V(e,"click",r[25]),t=!0)},p:I,d(i){i&&P(e),t=!1,n()}}}function ir(r){let e;return{c(){e=_("span"),e.textContent="â–¡",v(e,"class","pr-1.5")},m(t,n){R(t,e,n)},d(t){t&&P(e)}}}function Un(r){let e;return{c(){e=_("span"),e.textContent="x",v(e,"class","text-gray-500")},m(t,n){R(t,e,n)},p:I,d(t){t&&P(e)}}}function Yn(r){let e,t,n;return{c(){e=_("span"),e.textContent="x"},m(i,o){R(i,e,o),t||(n=V(e,"click",r[26]),t=!0)},p:I,d(i){i&&P(e),t=!1,n()}}}function Jn(r){let e,t,n,i,o,s,a,u,l,c,d,h,f,p,g=r[8]!==void 0&&r[8].length!==0&&rr(r);function w(D,x){return D[10]===D[0]?Bn:qn}let y=w(r),E=y(r),m=r[11].minimize&&nr(r),S=r[11].maximize&&ir();function j(D,x){return D[11].close?Yn:Un}let F=j(r),k=F(r);return d=new Ln({props:{window:r[0],notImportant:r[2]}}),{c(){e=_("div"),t=_("div"),n=_("div"),g&&g.c(),i=M(),E.c(),o=M(),s=_("div"),a=_("span"),m&&m.c(),u=M(),S&&S.c(),l=M(),k.c(),c=M(),Te(d.$$.fragment),v(n,"class","flex items-center"),v(a,"class","pr-2.5 mb-1"),v(s,"class","flex items-center"),v(t,"class","h-7 flex justify-between title-bar text-sm rounded-t-md rounded-sm select-none svelte-jpt6my"),X(t,"width",r[4]-2+"px"),v(e,"class","absolute border rounded-t-md rounded-sm border-gray-800 drop-shadow-md window-spawn"),X(e,"width",r[4]+"px"),X(e,"left",r[5]+"px"),X(e,"top",r[6]+"px"),X(e,"z-index",r[7]),De(e,"hidden",!r[3])},m(D,x){R(D,e,x),A(e,t),A(t,n),g&&g.m(n,null),A(n,i),E.m(n,null),A(t,o),A(t,s),A(s,a),m&&m.m(a,null),A(a,u),S&&S.m(a,null),A(a,l),k.m(a,null),r[27](t),A(e,c),Oe(d,e,null),r[28](e),h=!0,f||(p=[V(t,"mousedown",r[22]),V(t,"mouseup",r[23]),V(t,"mousemove",r[24]),V(e,"mousedown",r[29])],f=!0)},p(D,x){D[8]!==void 0&&D[8].length!==0?g?g.p(D,x):(g=rr(D),g.c(),g.m(n,i)):g&&(g.d(1),g=null),y===(y=w(D))&&E?E.p(D,x):(E.d(1),E=y(D),E&&(E.c(),E.m(n,null))),D[11].minimize?m?m.p(D,x):(m=nr(D),m.c(),m.m(a,u)):m&&(m.d(1),m=null),D[11].maximize?S||(S=ir(),S.c(),S.m(a,l)):S&&(S.d(1),S=null),F===(F=j(D))&&k?k.p(D,x):(k.d(1),k=F(D),k&&(k.c(),k.m(a,null))),(!h||x[0]&16)&&X(t,"width",D[4]-2+"px");const W={};x[0]&1&&(W.window=D[0]),x[0]&4&&(W.notImportant=D[2]),d.$set(W),(!h||x[0]&16)&&X(e,"width",D[4]+"px"),(!h||x[0]&32)&&X(e,"left",D[5]+"px"),(!h||x[0]&64)&&X(e,"top",D[6]+"px"),(!h||x[0]&128)&&X(e,"z-index",D[7]),(!h||x[0]&8)&&De(e,"hidden",!D[3])},i(D){h||(ue(d.$$.fragment,D),h=!0)},o(D){me(d.$$.fragment,D),h=!1},d(D){D&&P(e),g&&g.d(),E.d(),m&&m.d(),S&&S.d(),k.d(),r[27](null),Pe(d),r[28](null),f=!1,ke(p)}}}function or(r){let e=0,t=0;if(r instanceof MouseEvent)e=r.pageX,t=r.pageY;else if(r instanceof TouchEvent){const n=r.touches[0];e=n.pageX,t=n.pageY}return[e,t]}function Xn(r,e,t){let n,i,o,s,a,u,l,c,d,h,{window:f}=e,{classes:p,title:g,icon:w,x:y,y:E,width:m,height:S,style:j,controlButtons:F,isVisible:k,zIndex:D}=f.stores;q(r,g,O=>t(9,c=O)),q(r,w,O=>t(8,l=O)),q(r,y,O=>t(5,s=O)),q(r,E,O=>t(6,a=O)),q(r,m,O=>t(4,o=O)),q(r,F,O=>t(11,h=O)),q(r,k,O=>t(3,i=O)),q(r,D,O=>t(7,u=O));let x,W,H,Q=!1;Ir(()=>{t(0,f.zIndex=Ye(),f)});function Ne(){n||(T.activeWindow=f,f.zIndex<=er()&&t(0,f.zIndex=Ye(),f))}let{activeWindowStore:le}=T;q(r,le,O=>t(10,d=O));function we(O){if(n||O instanceof MouseEvent&&O.button!==0)return;let[Z,be]=or(O);const _e=document.body,Xt=x.getBoundingClientRect();W=Z-(Xt.left+_e.scrollLeft-_e.clientLeft),H=be-(Xt.top+_e.scrollTop-_e.clientTop),Q=!0,f.zIndex<=er()&&t(0,f.zIndex=Ye(),f),O instanceof MouseEvent&&O.preventDefault(),document.addEventListener("mousemove",Fe=>{ee(Fe)}),document.addEventListener("mouseup",Fe=>{ie(Fe)}),document.addEventListener("touchmove",Fe=>{ee(Fe)},{passive:!1}),document.addEventListener("touchend",Fe=>{ie(Fe)},{passive:!1}),f.dragStart.trigger()}function ie(O){O instanceof MouseEvent&&O.button!==0||(Q=!1,O instanceof MouseEvent&&O.preventDefault(),document.removeEventListener("mousemove",Z=>{ee(Z)}),document.removeEventListener("mouseup",Z=>{ie(Z)}),document.removeEventListener("touchmove",Z=>{ee(Z)}),document.removeEventListener("touchend",Z=>{ie(Z)}),f.dragStop.trigger())}function ee(O){if(n||!Q)return;let[Z,be]=or(O);t(0,f.x=Z-(W??0),f),t(0,f.y=be-(H??0),f),O.preventDefault()}const We=()=>f.hide(),ht=()=>f.close();function pt(O){Ge[O?"unshift":"push"](()=>{x=O,t(1,x)})}function mt(O){Ge[O?"unshift":"push"](()=>{f.windowElement=O,t(0,f)})}const L=()=>Ne();return r.$$set=O=>{"window"in O&&t(0,f=O.window)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(2,n=f.process.getImportantWindows().length!=0&&!f.important)},[f,x,n,i,o,s,a,u,l,c,d,h,g,w,y,E,m,F,k,D,Ne,le,we,ie,ee,We,ht,pt,mt,L]}class Gn extends ge{constructor(e){super(),ye(this,e,Xn,Jn,ce,{window:0},null,[-1,-1])}}function sr(r,e,t){const n=r.slice();return n[3]=e[t],n}function ar(r,e){let t,n,i;return n=new Gn({props:{window:e[3]}}),{key:r,first:null,c(){t=jt(),Te(n.$$.fragment),this.first=t},m(o,s){R(o,t,s),Oe(n,o,s),i=!0},p(o,s){e=o;const a={};s&1&&(a.window=e[3]),n.$set(a)},i(o){i||(ue(n.$$.fragment,o),i=!0)},o(o){me(n.$$.fragment,o),i=!1},d(o){o&&P(t),Pe(n,o)}}}function Kn(r){let e=[],t=new Map,n,i,o=r[0];const s=a=>a[3];for(let a=0;a<o.length;a+=1){let u=sr(r,o,a),l=s(u);t.set(l,e[a]=ar(l,u))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=jt()},m(a,u){for(let l=0;l<e.length;l+=1)e[l].m(a,u);R(a,n,u),i=!0},p(a,[u]){u&1&&(o=a[0],zt(),e=Ct(e,u,s,1,a,o,t,n.parentNode,In,ar,n,sr),It())},i(a){if(!i){for(let u=0;u<o.length;u+=1)ue(e[u]);i=!0}},o(a){for(let u=0;u<e.length;u+=1)me(e[u]);i=!1},d(a){for(let u=0;u<e.length;u+=1)e[u].d(a);a&&P(n)}}}function Hn(r,e,t){let n,i,o=T.windowsStore;return q(r,o,s=>t(2,i=s)),r.$$.update=()=>{r.$$.dirty&4&&t(0,n=i)},[n,o,i]}class Qn extends ge{constructor(e){super(),ye(this,e,Hn,Kn,ce,{})}}const Tr="/assets/mastrielIcon-6c62ac08.svg",Ce=class{constructor(e,t,n=Tr){this.name=e,this.mainWindow=t,this.icon=n}};let re=Ce;b(re,"registeredApps",[]),b(re,"registerApp",e=>{Ce.registeredApps.push(e)}),b(re,"getApp",e=>Ce.registeredApps.find(t=>t.name==e)),b(re,"getAllApps",()=>[...Ce.registeredApps]),b(re,"getAppByType",e=>{let t=Ce.registeredApps.find(n=>n instanceof e);if(t==null)throw new Error("Invalid app specified. Is it registered?");return t});let lr=0;function ei(){return lr++,lr-1}function ur(r){let e,t,n;return{c(){e=_("button"),e.textContent="Continue"},m(i,o){R(i,e,o),t||(n=V(e,"mousedown",r[3]),t=!0)},p:I,d(i){i&&P(e),t=!1,n()}}}function ti(r){let e,t,n,i,o=r[0].message+"",s,a,u,l,c,d,h,f=!r[0].unrecoverable&&ur(r);return{c(){e=_("div"),t=_("div"),n=_("div"),i=_("span"),s=te(o),a=M(),u=_("div"),f&&f.c(),l=M(),c=_("button"),c.textContent="End Process",v(i,"class","text-center error-message whitespace-pre-line select-text svelte-wbgunv"),v(i,"style",""),v(n,"class","flex justify-center"),v(t,"class","h-20 error-message overflow-y-scroll scrollbar-hide svelte-wbgunv"),X(t,"width",r[1]+"px"),v(e,"class","bg-red-800 border-b border-b-red-700 pt-3 drop-shadow-xl"),v(u,"class","flex justify-around pt-5")},m(p,g){R(p,e,g),A(e,t),A(t,n),A(n,i),A(i,s),R(p,a,g),R(p,u,g),f&&f.m(u,null),A(u,l),A(u,c),d||(h=V(c,"mousedown",r[4]),d=!0)},p(p,[g]){g&1&&o!==(o=p[0].message+"")&&Ee(s,o),g&2&&X(t,"width",p[1]+"px"),p[0].unrecoverable?f&&(f.d(1),f=null):f?f.p(p,g):(f=ur(p),f.c(),f.m(u,l))},i:I,o:I,d(p){p&&P(e),p&&P(a),p&&P(u),f&&f.d(),d=!1,h()}}}function ri(r,e,t){let n,{process:i}=e,{window:o}=e,{width:s}=o.stores;q(r,s,l=>t(1,n=l)),o.classes="bg-red-900",o.title=o.errorTitle,o.important=!0,o.controlButtons={maximize:!1,minimize:!1,close:!1},T.activeWindow=o,o.closeEvent.listen(()=>{T.activeWindow=o.spawner});const a=()=>{o.close(),T.activeWindow=i.mainWindow},u=()=>{i.kill()};return r.$$set=l=>{"process"in l&&t(5,i=l.process),"window"in l&&t(0,o=l.window)},[o,n,s,a,u,i]}class ni extends ge{constructor(e){super(),ye(this,e,ri,ti,ce,{process:5,window:0})}}class cr extends T{constructor(e,t,n,i=!1){super(500,500,400,160,ni),this.errorTitle=e,this.message=t,this.spawner=n,this.unrecoverable=i}}const xe=class{constructor(e,t,n){b(this,"id");b(this,"app");b(this,"mainWindow");b(this,"lastActiveWindow");b(this,"options");b(this,"spawnWindow",e=>T.spawn(e,this));b(this,"kill",()=>{for(const e of this.getWindows())e.close();xe.processesStore.update(e=>e.filter(t=>t!=this))});b(this,"crash",(e,t)=>{this.spawnWindow(new cr("Fatal Error",`${this.app.name} has crashed:
${e}`,t,!0))});b(this,"error",(e,t)=>{this.spawnWindow(new cr("Error",`An error has occurred in ${this.app.name}:
${e}


hi`,t,!1))});this.id=t,this.app=e,n!=null&&(this.options=n)}getWindows(){return T.getWindows().filter(e=>e.process==this)??[]}getImportantWindows(){return this.getWindows().filter(e=>e.important)??[]}static mergeOptions(e,t){return{...t,...e}}};let de=xe;b(de,"processesStore",Mr([])),b(de,"getProcesses",()=>Rr(xe.processesStore)),b(de,"spawn",(e,t)=>{let n=re.getAppByType(e),i=xe.mergeOptions(t,e.defaultOptions),o=new xe(n,ei(),i);xe.processesStore.update(a=>[...a,o]);let s=new T(300,300,400,400,n.mainWindow);return o.mainWindow=T.spawn(s,o),o.lastActiveWindow=o.mainWindow,o});function ii(r){const e=r-1;return e*e*e+1}function oi(r,{from:e,to:t},n={}){const i=getComputedStyle(r),o=i.transform==="none"?"":i.transform,[s,a]=i.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*s/t.width-(t.left+s),l=e.top+e.height*a/t.height-(t.top+a),{delay:c=0,duration:d=f=>Math.sqrt(f)*120,easing:h=ii}=n;return{delay:c,duration:Rt(d)?d(Math.sqrt(u*u+l*l)):d,easing:h,css:(f,p)=>{const g=p*u,w=p*l,y=f+p*e.width/t.width,E=f+p*e.height/t.height;return`transform: ${o} translate(${g}px, ${w}px) scale(${y}, ${E});`}}}function fr(r,e,t){const n=r.slice();return n[11]=e[t],n}function si(r){let e;return{c(){e=_("span"),e.textContent=".",v(e,"class","text-center block")},m(t,n){R(t,e,n)},d(t){t&&P(e)}}}function ai(r){let e;return{c(){e=_("span"),e.textContent="_",v(e,"class","text-center block")},m(t,n){R(t,e,n)},d(t){t&&P(e)}}}function dr(r,e){let t,n,i,o,s,a,u,l,c,d=I,h,f;function p(E,m){return m&3&&(a=null),a==null&&(a=!!E[0](E[11])),a?ai:si}let g=p(e,-1),w=g(e);function y(){return e[6](e[11])}return{key:r,first:null,c(){t=_("div"),n=_("img"),s=M(),w.c(),u=M(),pe(n.src,i=e[11].app.icon)||v(n,"src",i),v(n,"width","30"),v(n,"height","30"),v(n,"alt",o=`${e[11].app.name}`),v(n,"class","translate-y-2.5"),v(t,"class",l=(e[0](e[11])?"selected":"unselected")+" process svelte-1h8nwke"),this.first=t},m(E,m){R(E,t,m),A(t,n),A(t,s),w.m(t,null),A(t,u),h||(f=V(t,"click",y),h=!0)},p(E,m){e=E,m&2&&!pe(n.src,i=e[11].app.icon)&&v(n,"src",i),m&2&&o!==(o=`${e[11].app.name}`)&&v(n,"alt",o),g!==(g=p(e,m))&&(w.d(1),w=g(e),w&&(w.c(),w.m(t,u))),m&3&&l!==(l=(e[0](e[11])?"selected":"unselected")+" process svelte-1h8nwke")&&v(t,"class",l)},r(){c=t.getBoundingClientRect()},f(){Pn(t),d()},a(){d(),d=On(t,c,oi,{duration:200})},d(E){E&&P(t),w.d(),h=!1,f()}}}function li(r){let e,t,n,i,o,s,a=[],u=new Map,l=r[1];const c=d=>d[11];for(let d=0;d<l.length;d+=1){let h=fr(r,l,d),f=c(h);u.set(f,a[d]=dr(f,h))}return{c(){e=_("div"),e.innerHTML='<div class="h-12 w-screen z-0 bg-taskbar svelte-1h8nwke"></div>',t=M(),n=_("div"),n.innerHTML='<div class="h-12 w-screen max-z-index bg-taskbar-blur svelte-1h8nwke"></div>',i=M(),o=_("div"),s=_("div");for(let d=0;d<a.length;d+=1)a[d].c();v(e,"class","fixed bottom-0 z-0"),v(n,"class","fixed bottom-0 max-z-index svelte-1h8nwke"),v(s,"class","h-12 w-screen max-z-index taskbar-contents flex items-center justify-center gap-1 svelte-1h8nwke"),v(o,"class","fixed bottom-0 max-z-index svelte-1h8nwke")},m(d,h){R(d,e,h),R(d,t,h),R(d,n,h),R(d,i,h),R(d,o,h),A(o,s);for(let f=0;f<a.length;f+=1)a[f].m(s,null)},p(d,[h]){if(h&19){l=d[1];for(let f=0;f<a.length;f+=1)a[f].r();a=Ct(a,h,c,1,d,l,u,s,Cn,dr,null,fr);for(let f=0;f<a.length;f+=1)a[f].a()}},i:I,o:I,d(d){d&&P(e),d&&P(t),d&&P(n),d&&P(i),d&&P(o);for(let h=0;h<a.length;h+=1)a[h].d()}}}function ui(r,e,t){let n,i,o,s=de.processesStore;q(r,s,f=>t(1,o=f));let a=T.activeWindowStore;q(r,a,f=>t(5,i=f));const u=f=>{n(f)?c(f):(l(f),d(f))},l=f=>{console.log(f),f.getWindows().forEach(p=>{p.unhide(),p.zIndex=Ye()})},c=f=>{f.getWindows().forEach(p=>{p.hide(),T.activeWindow=void 0})},d=f=>{T.activeWindow=f.lastActiveWindow,console.log("Focus!"),f.getWindows().sort(p=>p.zIndex).forEach(p=>{console.log("Window!"),p.zIndex=Ye()})},h=f=>u(f);return r.$$.update=()=>{r.$$.dirty&32&&t(0,n=f=>(i==null?void 0:i.process)===f)},[n,o,s,a,u,i,h]}class ci extends ge{constructor(e){super(),ye(this,e,ui,li,ce,{})}}function fi(r){let e,t,n,i,o,s,a,u,l;return s=new Qn({}),u=new ci({}),{c(){e=_("div"),t=_("img"),i=M(),o=_("div"),Te(s.$$.fragment),a=M(),Te(u.$$.fragment),pe(t.src,n=Tr)||v(t,"src",n),v(t,"alt","Site icon"),v(t,"height",256),v(t,"width",256),v(t,"class","drop-shadow-3xl"),v(e,"class","flex items-center justify-center h-screen w-screen absolute"),v(o,"class","absolute")},m(c,d){R(c,e,d),A(e,t),R(c,i,d),R(c,o,d),Oe(s,o,null),R(c,a,d),Oe(u,c,d),l=!0},p:I,i(c){l||(ue(s.$$.fragment,c),ue(u.$$.fragment,c),l=!0)},o(c){me(s.$$.fragment,c),me(u.$$.fragment,c),l=!1},d(c){c&&P(e),c&&P(i),c&&P(o),Pe(s),c&&P(a),Pe(u,c)}}}class di extends ge{constructor(e){super(),ye(this,e,null,fi,ce,{})}}function hi(r){return r[Math.floor(Math.random()*r.length)]}function pi(r){return Math.floor(Math.random()*r)}const Vr="/assets/consoleIcon-9d1dc8de.svg",mi=r=>new Promise(e=>setTimeout(e,r)),vi="/assets/chatroomIcon-cd53aa5d.svg";function yi(r){let e,t,n;return{c(){e=_("iframe"),v(e,"class",t="w-full h-full "+(r[2]===r[0]?"pointer-events-auto":"pointer-events-none")),pe(e.src,n="https://chatroom-d29ab.web.app/")||v(e,"src",n)},m(i,o){R(i,e,o),r[5](e)},p(i,[o]){o&5&&t!==(t="w-full h-full "+(i[2]===i[0]?"pointer-events-auto":"pointer-events-none"))&&v(e,"class",t)},i:I,o:I,d(i){i&&P(e),r[5](null)}}}function gi(r,e,t){let n,{process:i}=e,{window:o}=e;o.icon=i.app.icon,o.width=600,o.height=600;let s;const a=()=>{s!=null&&t(1,s.style.pointerEvents="none",s)},u=()=>{s!=null&&t(1,s.style.pointerEvents="",s)};o.dragStart.listen(()=>{a()}),o.dragStop.listen(()=>{u()});let l=T.activeWindowStore;q(r,l,d=>t(2,n=d));function c(d){Ge[d?"unshift":"push"](()=>{s=d,t(1,s)})}return r.$$set=d=>{"process"in d&&t(4,i=d.process),"window"in d&&t(0,o=d.window)},[o,s,n,l,i,c]}class wi extends ge{constructor(e){super(),ye(this,e,gi,yi,ce,{process:4,window:0})}}class Zr extends re{constructor(){super("Chatroom",wi,vi)}}function Mt(r){let e=r.replace("\\","/");return e.startsWith("/")&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),{fullPath:"/"+e.split("/").join("/"),type:"file"}}function at(r){return{...Mt(r),type:"folder"}}function $t(r){return r.fullPath.split("/").slice(1)}function hr(r){const e=$t(r);return e[e.length-1]}function bi(r){let e=$t(r);return e.pop(),at(e.join("/"))}function Di(r){lt=r}let lt;const Ei="/assets/fileIcon-0be6809a.svg",Ai="/assets/folderIcon-7558d802.svg",_i="/assets/folderBackIcon-fb3b0a43.svg";function pr(r,e,t){const n=r.slice();return n[13]=e[t],n[15]=t,n}function Fi(r){let e,t,n=r[16]+"",i;return{c(){e=_("span"),t=te("cannot load files! "),i=te(n)},m(o,s){R(o,e,s),A(e,t),A(e,i)},p(o,s){s&4&&n!==(n=o[16]+"")&&Ee(i,n)},d(o){o&&P(e)}}}function xi(r){let e,t=[],n=new Map,i=r[12];const o=s=>s[13].fullPath;for(let s=0;s<i.length;s+=1){let a=pr(r,i,s),u=o(a);n.set(u,t[s]=mr(u,a))}return{c(){e=_("div");for(let s=0;s<t.length;s+=1)t[s].c();v(e,"class","files-size overflow-y-scroll svelte-lc7jml")},m(s,a){R(s,e,a);for(let u=0;u<t.length;u+=1)t[u].m(e,null)},p(s,a){a&28&&(i=s[12],t=Ct(t,a,o,1,s,i,n,e,Cr,mr,null,pr))},d(s){s&&P(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function mr(r,e){let t,n,i,o,s,a=hr(e[13])+"",u,l,c,d;function h(){return e[8](e[13])}return{key:r,first:null,c(){t=_("div"),n=_("img"),o=M(),s=_("span"),u=te(a),l=M(),pe(n.src,i=e[3](e[13]))||v(n,"src",i),v(n,"alt","file icon"),v(n,"height",18),v(n,"width",18),v(s,"class","block pl-1"),v(t,"class","flex flex-grow svelte-lc7jml"),De(t,"odd",e[15]%2===0),this.first=t},m(f,p){R(f,t,p),A(t,n),A(t,o),A(t,s),A(s,u),A(t,l),c||(d=V(t,"click",h),c=!0)},p(f,p){e=f,p&4&&!pe(n.src,i=e[3](e[13]))&&v(n,"src",i),p&4&&a!==(a=hr(e[13])+"")&&Ee(u,a),p&4&&De(t,"odd",e[15]%2===0)},d(f){f&&P(t),c=!1,d()}}}function Si(r){let e;return{c(){e=_("span"),e.textContent="loading..."},m(t,n){R(t,e,n)},p:I,d(t){t&&P(e)}}}function Oi(r){let e,t,n,i,o=r[1]()+"",s,a,u,l,c,d,h,f,p,g,w,y={ctx:r,current:null,token:null,hasCatch:!0,pending:Si,then:xi,catch:Fi,value:12,error:16};return Qt(p=r[2],y),{c(){e=_("div"),t=_("div"),n=_("span"),i=te(r[0]),s=te(o),a=M(),u=_("div"),l=_("div"),c=_("img"),h=M(),f=jt(),y.block.c(),v(n,"class","text-sm pl-5"),pe(c.src,d=_i)||v(c,"src",d),v(c,"alt","file icon"),v(c,"height",24),v(c,"width",24),v(l,"class","flex icon-button p-0.5 svelte-lc7jml"),v(u,"class","flex pr-2"),v(t,"class","flex justify-between items-center"),v(e,"class","bg-gray-800 border-b border-b-gray-700 pt-2 pb-2 drop-shadow-xl")},m(E,m){R(E,e,m),A(e,t),A(t,n),A(n,i),A(n,s),A(t,a),A(t,u),A(u,l),A(l,c),R(E,h,m),R(E,f,m),y.block.m(E,y.anchor=m),y.mount=()=>f.parentNode,y.anchor=f,g||(w=V(l,"click",r[5]),g=!0)},p(E,[m]){r=E,m&1&&Ee(i,r[0]),m&2&&o!==(o=r[1]()+"")&&Ee(s,o),y.ctx=r,m&4&&p!==(p=r[2])&&Qt(p,y)||zn(y,r,m)},i:I,o:I,d(E){E&&P(e),E&&P(h),E&&P(f),y.block.d(E),y.token=null,y=null,g=!1,w()}}}function Pi(r,e,t){let n,i,{process:o}=e,{window:s}=e,a="/";s.classes="bg-gray-900",s.title="Select a File",s.important=!0,s.controlButtons={maximize:!1,minimize:!1,close:!0},T.activeWindow=s,s.closeEvent.listen(()=>{s.returnNone()});const u=f=>f.type=="folder"?Ai:Ei,l=f=>{if(f.type=="folder"){c(f);return}s.returnFile(f),s.close()},c=f=>{t(0,a=f.fullPath)},d=()=>{t(0,a=bi(at(a)).fullPath)},h=f=>l(f);return r.$$set=f=>{"process"in f&&t(7,o=f.process),"window"in f&&t(6,s=f.window)},r.$$.update=()=>{r.$$.dirty&1&&t(2,n=lt.getFiles(at(a)).catch(console.error)),r.$$.dirty&1&&t(1,i=()=>a=="/"?"":"/")},[a,i,n,u,l,d,s,o,h]}class Ri extends ge{constructor(e){super(),ye(this,e,Pi,Oi,ce,{process:7,window:6})}}class ki extends T{constructor(t,n){super(500,500,500,400,Ri);b(this,"promise");b(this,"resolve");b(this,"reject");b(this,"returnFile",t=>this.resolve(t));b(this,"returnNone",()=>this.reject("process exit"));b(this,"getFile",async()=>await this.promise);this.spawner=t,this.extensionMask=n,this.promise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}}function ji(r){let e,t,n,i,o,s,a,u,l,c,d,h,f,p,g,w,y,E,m,S=(r[0]??"none")+"",j,F,k,D,x,W;return{c(){e=_("div"),t=_("span"),t.textContent="Remove process",n=M(),i=_("span"),i.textContent="Update color",o=M(),s=_("span"),s.textContent="Update title",a=M(),u=_("span"),u.textContent="Spawn another",l=M(),c=_("span"),c.textContent="Show error",d=M(),h=_("span"),h.textContent="Show unrecoverable error",f=M(),p=_("span"),p.textContent="Turn invisible temporarily",g=M(),w=_("span"),w.textContent="Open Chatroom",y=M(),E=_("span"),m=te("Select File (selected: "),j=te(S),F=te(")"),k=M(),D=_("span"),D.textContent="Create example.txt",v(t,"class","link svelte-18apmpb"),v(i,"class","link svelte-18apmpb"),v(s,"class","link svelte-18apmpb"),v(u,"class","link svelte-18apmpb"),v(c,"class","link svelte-18apmpb"),v(h,"class","link svelte-18apmpb"),v(p,"class","link svelte-18apmpb"),v(w,"class","link svelte-18apmpb"),v(E,"class","link svelte-18apmpb"),v(D,"class","link svelte-18apmpb"),v(e,"class","pt-2 pl-3 options svelte-18apmpb")},m(H,Q){R(H,e,Q),A(e,t),A(e,n),A(e,i),A(e,o),A(e,s),A(e,a),A(e,u),A(e,l),A(e,c),A(e,d),A(e,h),A(e,f),A(e,p),A(e,g),A(e,w),A(e,y),A(e,E),A(E,m),A(E,j),A(E,F),A(e,k),A(e,D),x||(W=[V(t,"click",r[1]),V(i,"click",r[3]),V(s,"click",r[4]),V(u,"click",r[2]),V(c,"click",r[5]),V(h,"click",r[6]),V(p,"click",r[7]),V(w,"click",r[8]),V(E,"click",r[9]),V(D,"click",r[10])],x=!0)},p(H,[Q]){Q&1&&S!==(S=(H[0]??"none")+"")&&Ee(j,S)},i:I,o:I,d(H){H&&P(e),x=!1,ke(W)}}}function Ni(r,e,t){let{process:n}=e,{window:i}=e,o=n.options;i.icon=Vr,i.style="background-color: "+o.backgroundColor;let s;Ir(()=>{s=0});function a(){n.kill(),console.log("Process killed!")}const u=()=>{let m=de.spawn(ct);console.log("New process spawned!"),console.log(m),T.activeWindow=m.mainWindow},l=()=>{let m=["bg-red","bg-blue","bg-lime","bg-black"];t(11,i.classes=hi(m),i),console.log("Color updated!")},c=()=>{s+=1,t(11,i.title=s.toString(),i),console.log("Title updated!")},d=()=>{n.error("User has initiated an error.",i)},h=()=>{n.crash("User has forced a crash.",i)},f=async()=>{t(11,i.isVisible=!1,i),await mi(3e3),t(11,i.isVisible=!0,i)},p=async()=>{let m=de.spawn(Zr);T.activeWindow=m.mainWindow};let g,w;const y=async()=>{g=await T.spawn(new ki(i,void 0),n).getFile(),t(0,w=await lt.readString(g))},E=async()=>{await lt.writeString(Mt(`example-${pi(1e3)}.txt`),"hi!")};return r.$$set=m=>{"process"in m&&t(12,n=m.process),"window"in m&&t(11,i=m.window)},[w,a,u,l,c,d,h,f,p,y,E,i,n]}class zi extends ge{constructor(e){super(),ye(this,e,Ni,ji,ce,{process:12,window:11})}}class ct extends re{constructor(){super("Console",zi,Vr)}}b(ct,"defaultOptions",{backgroundColor:"#000000"});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ut=function(){return ut=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ut.apply(this,arguments)};function Ii(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function $(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(d){s(d)}}function u(c){try{l(n.throw(c))}catch(d){s(d)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})}function C(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Ve=function(r){return typeof r=="string"||r instanceof String},Ci=new RegExp("^([A-Za-z]:|[A-Za-z0-9_-]+(.[A-Za-z0-9_-]+)*)((/[A-Za-z0-9_.-]+)+)$");function Mi(r){return Ve(r)?Ci.test(r):!1}var Ke=function(r,e){return $(void 0,void 0,void 0,function(){var t;return C(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,r()];case 1:return[2,n.sent()];case 2:return t=n.sent(),e&&e(t),[3,3];case 3:return[2,null]}})})};function $i(r){return!Ve(r)||r.length===0?!1:r[0]==="/"}function Wr(r,e){for(var t=0,n=r.length-1;n>=0;n--){var i=r[n];i==="."?r.splice(n,1):i===".."?(r.splice(n,1),t++):t&&(r.splice(n,1),t--)}if(e)for(;t--;t)r.unshift("..");return r}var Ti=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Tt=function(r){return Ti.exec(r).slice(1)};function At(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var n=t>=0?arguments[t]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;r=n+"/"+r,e=n.charAt(0)==="/"}return r=Wr(Vt(r.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+r||"."}function Lr(r){var e=qr(r),t=Yi(r,-1)==="/";return r=Wr(Vt(r.split("/"),function(n){return!!n}),!e).join("/"),!r&&!e&&(r="."),r&&t&&(r+="/"),(e?"/":"")+r}function qr(r){return r.charAt(0)==="/"}function Vi(){var r=Array.prototype.slice.call(arguments,0);return Lr(Vt(r,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Zi(r,e){r=At(r).substr(1),e=At(e).substr(1);function t(l){for(var c=0;c<l.length&&l[c]==="";c++);for(var d=l.length-1;d>=0&&l[d]==="";d--);return c>d?[]:l.slice(c,d-c+1)}for(var n=t(r.split("/")),i=t(e.split("/")),o=Math.min(n.length,i.length),s=o,a=0;a<o;a++)if(n[a]!==i[a]){s=a;break}for(var u=[],a=s;a<n.length;a++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")}var Wi="/",Li=":";function qi(r){var e=Tt(r),t=e[0],n=e[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)}function Bi(r,e){var t=Tt(r)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function Ui(r){return Tt(r)[3]}var ft={extname:Ui,basename:Bi,dirname:qi,sep:Wi,delimiter:Li,relative:Zi,join:Vi,isAbsolute:qr,normalize:Lr,resolve:At};function Vt(r,e){if(r.filter)return r.filter(e);for(var t=[],n=0;n<r.length;n++)e(r[n],n,r)&&t.push(r[n]);return t}var Yi="ab".substr(-1)==="b"?function(r,e,t){return r.substr(e,t)}:function(r,e,t){return e<0&&(e=r.length+e),r.substr(e,t)};function Ze(r,e){var t=ft.dirname(r);return t==="."?e:t}function Ji(r){if(r.__esModule)return r;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(t){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}),e}/*! https://mths.be/punycode v1.4.1 by @mathias */var yt=2147483647,Je=36,Br=1,_t=26,Xi=38,Gi=700,Ki=72,Hi=128,Qi="-",eo=/[^\x20-\x7E]/,to=/[\x2E\u3002\uFF0E\uFF61]/g,ro={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},gt=Je-Br,Ie=Math.floor,wt=String.fromCharCode;function vr(r){throw new RangeError(ro[r])}function no(r,e){for(var t=r.length,n=[];t--;)n[t]=e(r[t]);return n}function io(r,e){var t=r.split("@"),n="";t.length>1&&(n=t[0]+"@",r=t[1]),r=r.replace(to,".");var i=r.split("."),o=no(i,e).join(".");return n+o}function oo(r){for(var e=[],t=0,n=r.length,i,o;t<n;)i=r.charCodeAt(t++),i>=55296&&i<=56319&&t<n?(o=r.charCodeAt(t++),(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),t--)):e.push(i);return e}function yr(r,e){return r+22+75*(r<26)-((e!=0)<<5)}function so(r,e,t){var n=0;for(r=t?Ie(r/Gi):r>>1,r+=Ie(r/e);r>gt*_t>>1;n+=Je)r=Ie(r/gt);return Ie(n+(gt+1)*r/(r+Xi))}function ao(r){var e,t,n,i,o,s,a,u,l,c,d,h=[],f,p,g,w;for(r=oo(r),f=r.length,e=Hi,t=0,o=Ki,s=0;s<f;++s)d=r[s],d<128&&h.push(wt(d));for(n=i=h.length,i&&h.push(Qi);n<f;){for(a=yt,s=0;s<f;++s)d=r[s],d>=e&&d<a&&(a=d);for(p=n+1,a-e>Ie((yt-t)/p)&&vr("overflow"),t+=(a-e)*p,e=a,s=0;s<f;++s)if(d=r[s],d<e&&++t>yt&&vr("overflow"),d==e){for(u=t,l=Je;c=l<=o?Br:l>=o+_t?_t:l-o,!(u<c);l+=Je)w=u-c,g=Je-c,h.push(wt(yr(c+w%g,0))),u=Ie(w/g);h.push(wt(yr(u,0))),o=so(t,p,n==i),t=0,++n}++t,++e}return h.join("")}function lo(r){return io(r,function(e){return eo.test(e)?"xn--"+ao(e):e})}function rt(r){return r===null}function uo(r){return r==null}function Zt(r){return typeof r=="string"}function Ur(r){return typeof r=="object"&&r!==null}function co(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var Yr=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function qe(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}}function fo(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?gr(ho(r),function(i){var o=encodeURIComponent(qe(i))+t;return Yr(r[i])?gr(r[i],function(s){return o+encodeURIComponent(qe(s))}).join(e):o+encodeURIComponent(qe(r[i]))}).join(e):n?encodeURIComponent(qe(n))+t+encodeURIComponent(qe(r)):""}function gr(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var ho=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};function wr(r,e,t,n){e=e||"&",t=t||"=";var i={};if(typeof r!="string"||r.length===0)return i;var o=/\+/g;r=r.split(e);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var a=r.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var l=r[u].replace(o,"%20"),c=l.indexOf(t),d,h,f,p;c>=0?(d=l.substr(0,c),h=l.substr(c+1)):(d=l,h=""),f=decodeURIComponent(d),p=decodeURIComponent(h),co(i,f)?Yr(i[f])?i[f].push(p):i[f]=[i[f],p]:i[f]=p}return i}var po={parse:Qe,resolve:Gr,resolveObject:Kr,format:Xr,Url:ae};function ae(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var mo=/^([a-z0-9.+-]+:)/i,vo=/:[0-9]*$/,yo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,go=["<",">",'"',"`"," ","\r",`
`,"	"],wo=["{","}","|","\\","^","`"].concat(go),Ft=["'"].concat(wo),br=["%","/","?",";","#"].concat(Ft),Dr=["/","?","#"],bo=255,Er=/^[+a-z0-9A-Z_-]{0,63}$/,Do=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Eo={javascript:!0,"javascript:":!0},xt={javascript:!0,"javascript:":!0},$e={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Qe(r,e,t){if(r&&Ur(r)&&r instanceof ae)return r;var n=new ae;return n.parse(r,e,t),n}ae.prototype.parse=function(r,e,t){return Jr(this,r,e,t)};function Jr(r,e,t,n){if(!Zt(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),o=i!==-1&&i<e.indexOf("#")?"?":"#",s=e.split(o),a=/\\/g;s[0]=s[0].replace(a,"/"),e=s.join(o);var u=e;if(u=u.trim(),!n&&e.split("#").length===1){var l=yo.exec(u);if(l)return r.path=u,r.href=u,r.pathname=l[1],l[2]?(r.search=l[2],t?r.query=wr(r.search.substr(1)):r.query=r.search.substr(1)):t&&(r.search="",r.query={}),r}var c=mo.exec(u);if(c){c=c[0];var d=c.toLowerCase();r.protocol=d,u=u.substr(c.length)}if(n||c||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=u.substr(0,2)==="//";h&&!(c&&xt[c])&&(u=u.substr(2),r.slashes=!0)}var f,p,g,w;if(!xt[c]&&(h||c&&!$e[c])){var y=-1;for(f=0;f<Dr.length;f++)p=u.indexOf(Dr[f]),p!==-1&&(y===-1||p<y)&&(y=p);var E,m;for(y===-1?m=u.lastIndexOf("@"):m=u.lastIndexOf("@",y),m!==-1&&(E=u.slice(0,m),u=u.slice(m+1),r.auth=decodeURIComponent(E)),y=-1,f=0;f<br.length;f++)p=u.indexOf(br[f]),p!==-1&&(y===-1||p<y)&&(y=p);y===-1&&(y=u.length),r.host=u.slice(0,y),u=u.slice(y),Hr(r),r.hostname=r.hostname||"";var S=r.hostname[0]==="["&&r.hostname[r.hostname.length-1]==="]";if(!S){var j=r.hostname.split(/\./);for(f=0,g=j.length;f<g;f++){var F=j[f];if(F&&!F.match(Er)){for(var k="",D=0,x=F.length;D<x;D++)F.charCodeAt(D)>127?k+="x":k+=F[D];if(!k.match(Er)){var W=j.slice(0,f),H=j.slice(f+1),Q=F.match(Do);Q&&(W.push(Q[1]),H.unshift(Q[2])),H.length&&(u="/"+H.join(".")+u),r.hostname=W.join(".");break}}}}r.hostname.length>bo?r.hostname="":r.hostname=r.hostname.toLowerCase(),S||(r.hostname=lo(r.hostname)),w=r.port?":"+r.port:"";var Ne=r.hostname||"";r.host=Ne+w,r.href+=r.host,S&&(r.hostname=r.hostname.substr(1,r.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!Eo[d])for(f=0,g=Ft.length;f<g;f++){var le=Ft[f];if(u.indexOf(le)!==-1){var we=encodeURIComponent(le);we===le&&(we=escape(le)),u=u.split(le).join(we)}}var ie=u.indexOf("#");ie!==-1&&(r.hash=u.substr(ie),u=u.slice(0,ie));var ee=u.indexOf("?");if(ee!==-1?(r.search=u.substr(ee),r.query=u.substr(ee+1),t&&(r.query=wr(r.query)),u=u.slice(0,ee)):t&&(r.search="",r.query={}),u&&(r.pathname=u),$e[d]&&r.hostname&&!r.pathname&&(r.pathname="/"),r.pathname||r.search){w=r.pathname||"";var We=r.search||"";r.path=w+We}return r.href=Wt(r),r}function Xr(r){return Zt(r)&&(r=Jr({},r)),Wt(r)}function Wt(r){var e=r.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=r.protocol||"",n=r.pathname||"",i=r.hash||"",o=!1,s="";r.host?o=e+r.host:r.hostname&&(o=e+(r.hostname.indexOf(":")===-1?r.hostname:"["+this.hostname+"]"),r.port&&(o+=":"+r.port)),r.query&&Ur(r.query)&&Object.keys(r.query).length&&(s=fo(r.query));var a=r.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),r.slashes||(!t||$e[t])&&o!==!1?(o="//"+(o||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),a=a.replace("#","%23"),t+o+n+a+i}ae.prototype.format=function(){return Wt(this)};function Gr(r,e){return Qe(r,!1,!0).resolve(e)}ae.prototype.resolve=function(r){return this.resolveObject(Qe(r,!1,!0)).format()};function Kr(r,e){return r?Qe(r,!1,!0).resolveObject(e):e}ae.prototype.resolveObject=function(r){if(Zt(r)){var e=new ae;e.parse(r,!1,!0),r=e}for(var t=new ae,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),a=0;a<s.length;a++){var u=s[a];u!=="protocol"&&(t[u]=r[u])}return $e[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}var l;if(r.protocol&&r.protocol!==t.protocol){if(!$e[r.protocol]){for(var c=Object.keys(r),d=0;d<c.length;d++){var h=c[d];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!xt[r.protocol]){for(l=(r.pathname||"").split("/");l.length&&!(r.host=l.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),l[0]!==""&&l.unshift(""),l.length<2&&l.unshift(""),t.pathname=l.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var f=t.pathname||"",p=t.search||"";t.path=f+p}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var g=t.pathname&&t.pathname.charAt(0)==="/",w=r.host||r.pathname&&r.pathname.charAt(0)==="/",y=w||g||t.host&&r.pathname,E=y,m=t.pathname&&t.pathname.split("/")||[],S=t.protocol&&!$e[t.protocol];l=r.pathname&&r.pathname.split("/")||[],S&&(t.hostname="",t.port=null,t.host&&(m[0]===""?m[0]=t.host:m.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(l[0]===""?l[0]=r.host:l.unshift(r.host)),r.host=null),y=y&&(l[0]===""||m[0]===""));var j;if(w)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,m=l;else if(l.length)m||(m=[]),m.pop(),m=m.concat(l),t.search=r.search,t.query=r.query;else if(!uo(r.search))return S&&(t.hostname=t.host=m.shift(),j=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,j&&(t.auth=j.shift(),t.host=t.hostname=j.shift())),t.search=r.search,t.query=r.query,(!rt(t.pathname)||!rt(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!m.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var F=m.slice(-1)[0],k=(t.host||r.host||m.length>1)&&(F==="."||F==="..")||F==="",D=0,x=m.length;x>=0;x--)F=m[x],F==="."?m.splice(x,1):F===".."?(m.splice(x,1),D++):D&&(m.splice(x,1),D--);if(!y&&!E)for(;D--;D)m.unshift("..");y&&m[0]!==""&&(!m[0]||m[0].charAt(0)!=="/")&&m.unshift(""),k&&m.join("/").substr(-1)!=="/"&&m.push("");var W=m[0]===""||m[0]&&m[0].charAt(0)==="/";return S&&(t.hostname=t.host=W?"":m.length?m.shift():"",j=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,j&&(t.auth=j.shift(),t.host=t.hostname=j.shift())),y=y||t.host&&m.length,y&&!W&&m.unshift(""),m.length?t.pathname=m.join("/"):(t.pathname=null,t.path=null),(!rt(t.pathname)||!rt(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};ae.prototype.parseHost=function(){return Hr(this)};function Hr(r){var e=r.host,t=vo.exec(e);t&&(t=t[0],t!==":"&&(r.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(r.hostname=e)}var Ao=Object.freeze({__proto__:null,parse:Qe,resolve:Gr,resolveObject:Kr,format:Xr,default:po,Url:ae}),Lt=Ji(Ao),Y={},Qr=Lt,St=Y.ValidationError=function(e,t,n,i,o,s){if(Array.isArray(i)?(this.path=i,this.property=i.reduce(function(u,l){return u+en(l)},"instance")):i!==void 0&&(this.property=i),e&&(this.message=e),n){var a=n.$id||n.id;this.schema=a||n}t!==void 0&&(this.instance=t),this.name=o,this.argument=s,this.stack=this.toString()};St.prototype.toString=function(){return this.property+" "+this.message};var dt=Y.ValidatorResult=function(e,t,n,i){this.instance=e,this.schema=t,this.options=n,this.path=i.path,this.propertyPath=i.propertyPath,this.errors=[],this.throwError=n&&n.throwError,this.throwFirst=n&&n.throwFirst,this.throwAll=n&&n.throwAll,this.disableFormat=n&&n.disableFormat===!0};dt.prototype.addError=function(e){var t;if(typeof e=="string")t=new St(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new St(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new Re(this);if(this.throwError)throw t;return t};dt.prototype.importErrors=function(e){typeof e=="string"||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)};function _o(r,e){return e+": "+r.toString()+`
`}dt.prototype.toString=function(e){return this.errors.map(_o).join("")};Object.defineProperty(dt.prototype,"valid",{get:function(){return!this.errors.length}});Y.ValidatorResultError=Re;function Re(r){Error.captureStackTrace&&Error.captureStackTrace(this,Re),this.instance=r.instance,this.schema=r.schema,this.options=r.options,this.errors=r.errors}Re.prototype=new Error;Re.prototype.constructor=Re;Re.prototype.name="Validation Error";var Ar=Y.SchemaError=function r(e,t){this.message=e,this.schema=t,Error.call(this,e),Error.captureStackTrace(this,r)};Ar.prototype=Object.create(Error.prototype,{constructor:{value:Ar,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var Ot=Y.SchemaContext=function(e,t,n,i,o){this.schema=e,this.options=t,Array.isArray(n)?(this.path=n,this.propertyPath=n.reduce(function(s,a){return s+en(a)},"instance")):this.propertyPath=n,this.base=i,this.schemas=o};Ot.prototype.resolve=function(e){return Qr.resolve(this.base,e)};Ot.prototype.makeChild=function(e,t){var n=t===void 0?this.path:this.path.concat([t]),i=e.$id||e.id,o=Qr.resolve(this.base,i||""),s=new Ot(e,this.options,n,o,Object.create(this.schemas));return i&&!s.schemas[o]&&(s.schemas[o]=e),s};var se=Y.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(r){return typeof r=="string"&&parseFloat(r)===parseInt(r,10)&&!isNaN(r)},regex:function(r){var e=!0;try{new RegExp(r)}catch{e=!1}return e},style:/\s*(.+?):\s*([^;]+);?/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};se.regexp=se.regex;se.pattern=se.regex;se.ipv4=se["ip-address"];Y.isFormat=function(e,t,n){if(typeof e=="string"&&se[t]!==void 0){if(se[t]instanceof RegExp)return se[t].test(e);if(typeof se[t]=="function")return se[t](e)}else if(n&&n.customFormats&&typeof n.customFormats[t]=="function")return n.customFormats[t](e);return!0};var en=Y.makeSuffix=function(e){return e=e.toString(),!e.match(/[.\s\[\]]/)&&!e.match(/^[\d]/)?"."+e:e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]"};Y.deepCompareStrict=function r(e,t){if(typeof e!=typeof t)return!1;if(Array.isArray(e))return!Array.isArray(t)||e.length!==t.length?!1:e.every(function(o,s){return r(e[s],t[s])});if(typeof e=="object"){if(!e||!t)return e===t;var n=Object.keys(e),i=Object.keys(t);return n.length!==i.length?!1:n.every(function(o){return r(e[o],t[o])})}return e===t};function Fo(r,e,t,n){typeof t=="object"?e[n]=qt(r[n],t):r.indexOf(t)===-1&&e.push(t)}function xo(r,e,t){e[t]=r[t]}function So(r,e,t,n){typeof e[n]!="object"||!e[n]?t[n]=e[n]:r[n]?t[n]=qt(r[n],e[n]):t[n]=e[n]}function qt(r,e){var t=Array.isArray(e),n=t&&[]||{};return t?(r=r||[],n=n.concat(r),e.forEach(Fo.bind(null,r,n))):(r&&typeof r=="object"&&Object.keys(r).forEach(xo.bind(null,r,n)),Object.keys(e).forEach(So.bind(null,r,e,n))),n}Y.deepMerge=qt;Y.objectGetPath=function(e,t){for(var n=t.split("/").slice(1),i;typeof(i=n.shift())=="string";){var o=decodeURIComponent(i.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in e))return;e=e[o]}return e};function Oo(r){return"/"+encodeURIComponent(r).replace(/~/g,"%7E")}Y.encodePath=function(e){return e.map(Oo).join("")};Y.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;typeof e!="number"&&(e=Number(e));var n=e.toString().split("e");if(n.length===2){if(n[1][0]!=="-")return t;t=Number(n[1].slice(1))}var i=n[0].split(".");return i.length===2&&(t+=i[1].length),t};Y.isSchema=function(e){return typeof e=="object"&&e||typeof e=="boolean"};var ne=Y,N=ne.ValidatorResult,Ae=ne.SchemaError,Bt={};Bt.ignoreProperties={id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0};var z=Bt.validators={};z.type=function(e,t,n,i){if(e===void 0)return null;var o=new N(e,t,n,i),s=Array.isArray(t.type)?t.type:[t.type];if(!s.some(this.testType.bind(this,e,t,n,i))){var a=s.map(function(u){if(u){var l=u.$id||u.id;return l?"<"+l+">":u+""}});o.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return o};function Ut(r,e,t,n,i){var o=e.throwError,s=e.throwAll;e.throwError=!1,e.throwAll=!1;var a=this.validateSchema(r,i,e,t);return e.throwError=o,e.throwAll=s,!a.valid&&n instanceof Function&&n(a),a.valid}z.anyOf=function(e,t,n,i){if(e===void 0)return null;var o=new N(e,t,n,i),s=new N(e,t,n,i);if(!Array.isArray(t.anyOf))throw new Ae("anyOf must be an array");if(!t.anyOf.some(Ut.bind(this,e,n,i,function(u){s.importErrors(u)}))){var a=t.anyOf.map(function(u,l){var c=u.$id||u.id;return c?"<"+c+">":u.title&&JSON.stringify(u.title)||u.$ref&&"<"+u.$ref+">"||"[subschema "+l+"]"});n.nestedErrors&&o.importErrors(s),o.addError({name:"anyOf",argument:a,message:"is not any of "+a.join(",")})}return o};z.allOf=function(e,t,n,i){if(e===void 0)return null;if(!Array.isArray(t.allOf))throw new Ae("allOf must be an array");var o=new N(e,t,n,i),s=this;return t.allOf.forEach(function(a,u){var l=s.validateSchema(e,a,n,i);if(!l.valid){var c=a.$id||a.id,d=c||a.title&&JSON.stringify(a.title)||a.$ref&&"<"+a.$ref+">"||"[subschema "+u+"]";o.addError({name:"allOf",argument:{id:d,length:l.errors.length,valid:l},message:"does not match allOf schema "+d+" with "+l.errors.length+" error[s]:"}),o.importErrors(l)}}),o};z.oneOf=function(e,t,n,i){if(e===void 0)return null;if(!Array.isArray(t.oneOf))throw new Ae("oneOf must be an array");var o=new N(e,t,n,i),s=new N(e,t,n,i),a=t.oneOf.filter(Ut.bind(this,e,n,i,function(l){s.importErrors(l)})).length,u=t.oneOf.map(function(l,c){var d=l.$id||l.id;return d||l.title&&JSON.stringify(l.title)||l.$ref&&"<"+l.$ref+">"||"[subschema "+c+"]"});return a!==1&&(n.nestedErrors&&o.importErrors(s),o.addError({name:"oneOf",argument:u,message:"is not exactly one from "+u.join(",")})),o};z.if=function(e,t,n,i){if(e===void 0)return null;if(!ne.isSchema(t.if))throw new Error('Expected "if" keyword to be a schema');var o=Ut.call(this,e,n,i,null,t.if),s=new N(e,t,n,i),a;if(o){if(t.then===void 0)return;if(!ne.isSchema(t.then))throw new Error('Expected "then" keyword to be a schema');a=this.validateSchema(e,t.then,n,i.makeChild(t.then)),s.importErrors(a)}else{if(t.else===void 0)return;if(!ne.isSchema(t.else))throw new Error('Expected "else" keyword to be a schema');a=this.validateSchema(e,t.else,n,i.makeChild(t.else)),s.importErrors(a)}return s};function Yt(r,e){if(Object.hasOwnProperty.call(r,e))return r[e];if(e in r){for(;r=Object.getPrototypeOf(r);)if(Object.propertyIsEnumerable.call(r,e))return r[e]}}z.propertyNames=function(e,t,n,i){if(this.types.object(e)){var o=new N(e,t,n,i),s=t.propertyNames!==void 0?t.propertyNames:{};if(!ne.isSchema(s))throw new Ae('Expected "propertyNames" to be a schema (object or boolean)');for(var a in e)if(Yt(e,a)!==void 0){var u=this.validateSchema(a,s,n,i.makeChild(s));o.importErrors(u)}return o}};z.properties=function(e,t,n,i){if(this.types.object(e)){var o=new N(e,t,n,i),s=t.properties||{};for(var a in s){var u=s[a];if(u!==void 0){if(u===null)throw new Ae('Unexpected null, expected schema in "properties"');typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,u,n,i);var l=Yt(e,a),c=this.validateSchema(l,u,n,i.makeChild(u,a));c.instance!==o.instance[a]&&(o.instance[a]=c.instance),o.importErrors(c)}}return o}};function tn(r,e,t,n,i,o){if(this.types.object(r)&&!(e.properties&&e.properties[i]!==void 0))if(e.additionalProperties===!1)o.addError({name:"additionalProperties",argument:i,message:"is not allowed to have the additional property "+JSON.stringify(i)});else{var s=e.additionalProperties||{};typeof t.preValidateProperty=="function"&&t.preValidateProperty(r,i,s,t,n);var a=this.validateSchema(r[i],s,t,n.makeChild(s,i));a.instance!==o.instance[i]&&(o.instance[i]=a.instance),o.importErrors(a)}}z.patternProperties=function(e,t,n,i){if(this.types.object(e)){var o=new N(e,t,n,i),s=t.patternProperties||{};for(var a in e){var u=!0;for(var l in s){var c=s[l];if(c!==void 0){if(c===null)throw new Ae('Unexpected null, expected schema in "patternProperties"');try{var d=new RegExp(l,"u")}catch{d=new RegExp(l)}if(d.test(a)){u=!1,typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,c,n,i);var h=this.validateSchema(e[a],c,n,i.makeChild(c,a));h.instance!==o.instance[a]&&(o.instance[a]=h.instance),o.importErrors(h)}}}u&&tn.call(this,e,t,n,i,a,o)}return o}};z.additionalProperties=function(e,t,n,i){if(this.types.object(e)){if(t.patternProperties)return null;var o=new N(e,t,n,i);for(var s in e)tn.call(this,e,t,n,i,s,o);return o}};z.minProperties=function(e,t,n,i){if(this.types.object(e)){var o=new N(e,t,n,i),s=Object.keys(e);return s.length>=t.minProperties||o.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),o}};z.maxProperties=function(e,t,n,i){if(this.types.object(e)){var o=new N(e,t,n,i),s=Object.keys(e);return s.length<=t.maxProperties||o.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),o}};z.items=function(e,t,n,i){var o=this;if(this.types.array(e)&&t.items){var s=new N(e,t,n,i);return e.every(function(a,u){var l=Array.isArray(t.items)?t.items[u]||t.additionalItems:t.items;if(l===void 0)return!0;if(l===!1)return s.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=o.validateSchema(a,l,n,i.makeChild(l,u));return c.instance!==s.instance[u]&&(s.instance[u]=c.instance),s.importErrors(c),!0}),s}};z.minimum=function(e,t,n,i){if(this.types.number(e)){var o=new N(e,t,n,i);return t.exclusiveMinimum&&t.exclusiveMinimum===!0?e>t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),o}};z.maximum=function(e,t,n,i){if(this.types.number(e)){var o=new N(e,t,n,i);return t.exclusiveMaximum&&t.exclusiveMaximum===!0?e<t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),o}};z.exclusiveMinimum=function(e,t,n,i){if(typeof t.exclusiveMaximum!="boolean"&&this.types.number(e)){var o=new N(e,t,n,i),s=e>t.exclusiveMinimum;return s||o.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),o}};z.exclusiveMaximum=function(e,t,n,i){if(typeof t.exclusiveMaximum!="boolean"&&this.types.number(e)){var o=new N(e,t,n,i),s=e<t.exclusiveMaximum;return s||o.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),o}};var rn=function(e,t,n,i,o,s){if(this.types.number(e)){var a=t[o];if(a==0)throw new Ae(o+" cannot be zero");var u=new N(e,t,n,i),l=ne.getDecimalPlaces(e),c=ne.getDecimalPlaces(a),d=Math.max(l,c),h=Math.pow(10,d);return Math.round(e*h)%Math.round(a*h)!==0&&u.addError({name:o,argument:a,message:s+JSON.stringify(a)}),u}};z.multipleOf=function(e,t,n,i){return rn.call(this,e,t,n,i,"multipleOf","is not a multiple of (divisible by) ")};z.divisibleBy=function(e,t,n,i){return rn.call(this,e,t,n,i,"divisibleBy","is not divisible by (multiple of) ")};z.required=function(e,t,n,i){var o=new N(e,t,n,i);return e===void 0&&t.required===!0?o.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach(function(s){Yt(e,s)===void 0&&o.addError({name:"required",argument:s,message:"requires property "+JSON.stringify(s)})}),o};z.pattern=function(e,t,n,i){if(this.types.string(e)){var o=new N(e,t,n,i),s=t.pattern;try{var a=new RegExp(s,"u")}catch{a=new RegExp(s)}return e.match(a)||o.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),o}};z.format=function(e,t,n,i){if(e!==void 0){var o=new N(e,t,n,i);return!o.disableFormat&&!ne.isFormat(e,t.format,this)&&o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o}};z.minLength=function(e,t,n,i){if(this.types.string(e)){var o=new N(e,t,n,i),s=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(s?s.length:0);return a>=t.minLength||o.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),o}};z.maxLength=function(e,t,n,i){if(this.types.string(e)){var o=new N(e,t,n,i),s=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(s?s.length:0);return a<=t.maxLength||o.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),o}};z.minItems=function(e,t,n,i){if(this.types.array(e)){var o=new N(e,t,n,i);return e.length>=t.minItems||o.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),o}};z.maxItems=function(e,t,n,i){if(this.types.array(e)){var o=new N(e,t,n,i);return e.length<=t.maxItems||o.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),o}};function Po(r,e,t){var n,i=t.length;for(n=e+1,i;n<i;n++)if(ne.deepCompareStrict(r,t[n]))return!1;return!0}z.uniqueItems=function(e,t,n,i){if(t.uniqueItems===!0&&this.types.array(e)){var o=new N(e,t,n,i);return e.every(Po)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o}};z.dependencies=function(e,t,n,i){if(this.types.object(e)){var o=new N(e,t,n,i);for(var s in t.dependencies)if(e[s]!==void 0){var a=t.dependencies[s],u=i.makeChild(a,s);if(typeof a=="string"&&(a=[a]),Array.isArray(a))a.forEach(function(c){e[c]===void 0&&o.addError({name:"dependencies",argument:u.propertyPath,message:"property "+c+" not found, required by "+u.propertyPath})});else{var l=this.validateSchema(e,a,n,u);o.instance!==l.instance&&(o.instance=l.instance),l&&l.errors.length&&(o.addError({name:"dependencies",argument:u.propertyPath,message:"does not meet dependency required by "+u.propertyPath}),o.importErrors(l))}}return o}};z.enum=function(e,t,n,i){if(e===void 0)return null;if(!Array.isArray(t.enum))throw new Ae("enum expects an array",t);var o=new N(e,t,n,i);return t.enum.some(ne.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),o};z.const=function(e,t,n,i){if(e===void 0)return null;var o=new N(e,t,n,i);return ne.deepCompareStrict(t.const,e)||o.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),o};z.not=z.disallow=function(e,t,n,i){var o=this;if(e===void 0)return null;var s=new N(e,t,n,i),a=t.not||t.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach(function(u){if(o.testType(e,t,n,i,u)){var l=u&&(u.$id||u.id),c=l||u;s.addError({name:"not",argument:c,message:"is of prohibited type "+c})}}),s):null};var Ro=Bt,Jt={},_r=Lt,ko=Y;Jt.SchemaScanResult=nn;function nn(r,e){this.id=r,this.ref=e}Jt.scan=function(e,t){function n(u,l){if(!(!l||typeof l!="object")){if(l.$ref){var c=_r.resolve(u,l.$ref);a[c]=a[c]?a[c]+1:0;return}var d=l.$id||l.id,h=d?_r.resolve(u,d):u;if(h){if(h.indexOf("#")<0&&(h+="#"),s[h]){if(!ko.deepCompareStrict(s[h],l))throw new Error("Schema <"+h+"> already exists with different definition");return s[h]}s[h]=l,h[h.length-1]=="#"&&(s[h.substring(0,h.length-1)]=l)}i(h+"/items",Array.isArray(l.items)?l.items:[l.items]),i(h+"/extends",Array.isArray(l.extends)?l.extends:[l.extends]),n(h+"/additionalItems",l.additionalItems),o(h+"/properties",l.properties),n(h+"/additionalProperties",l.additionalProperties),o(h+"/definitions",l.definitions),o(h+"/patternProperties",l.patternProperties),o(h+"/dependencies",l.dependencies),i(h+"/disallow",l.disallow),i(h+"/allOf",l.allOf),i(h+"/anyOf",l.anyOf),i(h+"/oneOf",l.oneOf),n(h+"/not",l.not)}}function i(u,l){if(Array.isArray(l))for(var c=0;c<l.length;c++)n(u+"/"+c,l[c])}function o(u,l){if(!(!l||typeof l!="object"))for(var c in l)n(u+"/"+c,l[c])}var s={},a={};return n(e,t),new nn(s,a)};var on=Lt,sn=Ro,je=Y,an=Jt.scan,ln=je.ValidatorResult,jo=je.ValidatorResultError,He=je.SchemaError,un=je.SchemaContext,cn="/",U=function r(){this.customFormats=Object.create(r.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(fe),this.attributes=Object.create(sn.validators)};U.prototype.customFormats={};U.prototype.schemas=null;U.prototype.types=null;U.prototype.attributes=null;U.prototype.unresolvedRefs=null;U.prototype.addSchema=function(e,t){var n=this;if(!e)return null;var i=an(t||cn,e),o=t||e.$id||e.id;for(var s in i.id)this.schemas[s]=i.id[s];for(var s in i.ref)this.unresolvedRefs.push(s);return this.unresolvedRefs=this.unresolvedRefs.filter(function(a){return typeof n.schemas[a]>"u"}),this.schemas[o]};U.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addSubSchema(e,t[n])};U.prototype.addSubSchemaObject=function(e,t){if(!(!t||typeof t!="object"))for(var n in t)this.addSubSchema(e,t[n])};U.prototype.setSchemas=function(e){this.schemas=e};U.prototype.getSchema=function(e){return this.schemas[e]};U.prototype.validate=function(e,t,n,i){if(typeof t!="boolean"&&typeof t!="object"||t===null)throw new He("Expected `schema` to be an object or boolean");n||(n={});var o=t.$id||t.id,s=on.resolve(n.base||cn,o||"");if(!i){i=new un(t,n,[],s,Object.create(this.schemas)),i.schemas[s]||(i.schemas[s]=t);var a=an(s,t);for(var u in a.id){var l=a.id[u];i.schemas[u]=l}}if(n.required&&e===void 0){var c=new ln(e,t,n,i);return c.addError("is required, but is undefined"),c}var c=this.validateSchema(e,t,n,i);if(c){if(n.throwAll&&c.errors.length)throw new jo(c)}else throw new Error("Result undefined");return c};function fn(r){var e=typeof r=="string"?r:r.$ref;return typeof e=="string"?e:!1}U.prototype.validateSchema=function(e,t,n,i){var o=new ln(e,t,n,i);if(typeof t=="boolean")t===!0?t={}:t===!1&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(Array.isArray(t.extends)){var s={schema:t,ctx:i};t.extends.forEach(this.schemaTraverser.bind(this,s)),t=s.schema,s.schema=null,s.ctx=null,s=null}else t=je.deepMerge(t,this.superResolve(t.extends,i));var a=fn(t);if(a){var u=this.resolve(t,a,i),l=new un(u.subschema,n,i.path,u.switchSchema,i.schemas);return this.validateSchema(e,u.subschema,n,l)}var c=n&&n.skipAttributes||[];for(var d in t)if(!sn.ignoreProperties[d]&&c.indexOf(d)<0){var h=null,f=this.attributes[d];if(f)h=f.call(this,e,t,n,i);else if(n.allowUnknownAttributes===!1)throw new He("Unsupported attribute: "+d,t);h&&o.importErrors(h)}if(typeof n.rewrite=="function"){var p=n.rewrite.call(this,e,t,n,i);o.instance=p}return o};U.prototype.schemaTraverser=function(e,t){e.schema=je.deepMerge(e.schema,this.superResolve(t,e.ctx))};U.prototype.superResolve=function(e,t){var n=fn(e);return n?this.resolve(e,n,t).subschema:e};U.prototype.resolve=function(e,t,n){if(t=n.resolve(t),n.schemas[t])return{subschema:n.schemas[t],switchSchema:t};var i=on.parse(t),o=i&&i.hash,s=o&&o.length&&t.substr(0,t.length-o.length);if(!s||!n.schemas[s])throw new He("no such schema <"+t+">",e);var a=je.objectGetPath(n.schemas[s],o.substr(1));if(a===void 0)throw new He("no such schema "+o+" located in <"+s+">",e);return{subschema:a,switchSchema:t}};U.prototype.testType=function(e,t,n,i,o){if(o!==void 0){if(o===null)throw new He('Unexpected null in "type" keyword');if(typeof this.types[o]=="function")return this.types[o].call(this,e);if(o&&typeof o=="object"){var s=this.validateSchema(e,o,n,i);return s===void 0||!(s&&s.errors.length)}return!0}};var fe=U.prototype.types={};fe.string=function(e){return typeof e=="string"};fe.number=function(e){return typeof e=="number"&&isFinite(e)};fe.integer=function(e){return typeof e=="number"&&e%1===0};fe.boolean=function(e){return typeof e=="boolean"};fe.array=function(e){return Array.isArray(e)};fe.null=function(e){return e===null};fe.date=function(e){return e instanceof Date};fe.any=function(e){return!0};fe.object=function(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof Date)};var No=U,zo=No,Io=function(r,e,t){var n=new zo;return n.validate(r,e,t)},bt="^[a-zA-Z0-9_.-]*$",Co={type:"object",id:"/CreateFsPropsSchema",properties:{databaseName:{minLength:4,maxLength:50,type:"string",pattern:bt},objectStoreName:{minLength:1,maxLength:20,type:"string",pattern:bt},rootDirectoryName:{minLength:1,maxLength:20,type:"string",pattern:bt},databaseVersion:{minimum:1,maximum:100,type:"integer"}},required:["databaseName","databaseVersion","objectStoreName","rootDirectoryName"]};function Mo(r){var e=Io(r,Co),t=e.valid,n=e.errors;if(t)return t;var i=JSON.stringify(n);throw new Error(`Props passed to createFS function are invalid:
`+i)}function $o(r,e){if(!Ve(r)||!Ve(e)||e==="")return!1;var t=e+"/";return r.startsWith(t)}function To(r,e){if(r==="")return e;var t=$o(r,e);if(!t){var n=$i(r);return""+e+(n?"":"/")+r}return r}function B(r,e){if(!Ve(e)||e==="")throw new Error("rootDirectoryName parameter was not provided");if(!Ve(r))throw new Error("fullPath parameter was not provided");if(r===e)return e;var t=To(r,e);if(!t||!Mi(t))throw new Error('"'+r+'" path is invalid.');return t}var Vo=function(r){var e=r.result;return Boolean(e==null?void 0:e.createdAt)},Zo=function(r){var e=r.getRecord,t=r.rootDirectoryName;return function(n){return $(void 0,void 0,void 0,function(){var i;return C(this,function(o){return i=B(n,t),[2,e(i,Vo)]})})}},Wo=function(r){var e=r.exists,t=r.deleteRecord,n=r.rootDirectoryName;return function(i){return $(void 0,void 0,void 0,function(){var o,s;return C(this,function(a){switch(a.label){case 0:return o=B(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" file or directory does not exist.');return[2,t(o)]}})})}},Lo=function(r){var e=r.exists,t=r.isFile,n=r.isDirectory,i=r.fileDetails,o=r.directoryDetails,s=r.rootDirectoryName;return function(a){return $(void 0,void 0,void 0,function(){var u,l,c,d;return C(this,function(h){switch(h.label){case 0:return u=B(a,s),[4,e(u)];case 1:if(l=h.sent(),!l)throw new Error('"'+u+'" file or directory does not exist.');return[4,t(u)];case 2:return c=h.sent(),[4,n(u)];case 3:if(d=h.sent(),c&&d)throw new Error('"'+u+'" is a path of file and directory.');return c?[2,i(u)]:[2,o(u)]}})})}},ve;(function(r){r.FILE="file",r.DIRECTORY="directory"})(ve||(ve={}));var qo=function(r){var e=r.result;return Boolean((e==null?void 0:e.type)===ve.FILE)},Bo=function(r){var e=r.exists,t=r.getRecord,n=r.rootDirectoryName;return function(i){return $(void 0,void 0,void 0,function(){var o,s;return C(this,function(a){switch(a.label){case 0:return o=B(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" file does not exist.');return[2,t(o,qo)]}})})}},Uo=function(r){var e=r.isFile,t=r.exists,n=r.writeFile,i=r.isDirectory,o=r.fileDetails,s=r.rootDirectoryName;return function(a,u){return $(void 0,void 0,void 0,function(){var l,c,d,h,f,p,g;return C(this,function(w){switch(w.label){case 0:return l=B(a,s),c=B(u,s),[4,e(l)];case 1:if(d=w.sent(),!d)throw new Error('"'+l+'" source is not a file.');return h=Ze(c,s),[4,i(h)];case 2:if(f=w.sent(),!f)throw new Error('"'+h+'" destination directory does not exist.');return[4,t(c)];case 3:if(p=w.sent(),p)throw new Error('"'+c+'" is already taken.');return[4,o(l)];case 4:return g=w.sent(),[2,n(c,g.data)]}})})}},Yo=function(r){var e=r.fileDetails;return function(t){return $(void 0,void 0,void 0,function(){var n;return C(this,function(i){switch(i.label){case 0:return[4,e(t)];case 1:return n=i.sent(),[2,n.data]}})})}},Jo=function(r){var e=r.isFile,t=r.exists,n=r.removeFile,i=r.isDirectory,o=r.updateFileDetails,s=r.rootDirectoryName;return function(a,u){return $(void 0,void 0,void 0,function(){var l,c,d,h,f,p,g,w;return C(this,function(y){switch(y.label){case 0:return l=B(a,s),c=B(u,s),[4,e(l)];case 1:if(d=y.sent(),!d)throw new Error('"'+l+'" source is not a file.');return h=Ze(c,s),[4,i(h)];case 2:if(f=y.sent(),!f)throw new Error('"'+h+'" destination directory does not exist.');return[4,t(c)];case 3:if(p=y.sent(),p)throw new Error('"'+c+'" is already taken.');return g=ft.basename(c),[4,o(l,{name:g,directory:h,fullPath:c})];case 4:return w=y.sent(),[4,n(l)];case 5:return y.sent(),[2,w]}})})}},Xo=function(r){var e=r.putRecord,t=r.isDirectory,n=r.rootDirectoryName;return function(i,o){return $(void 0,void 0,void 0,function(){var s,a,u,l,c,d;return C(this,function(h){switch(h.label){case 0:if(s=B(i,n),s===n)throw new Error('Root directory: "'+s+'" cannot be a file.');return a=ft.basename(s),u=Ze(s,n),[4,t(u)];case 1:if(l=h.sent(),!l)throw new Error('"'+u+'" directory does not exist.');return[4,Ke(function(){return t(s)},function(){return!1})];case 2:if(c=h.sent(),c)throw new Error('"'+s+'" you cannot create a file with the same name as the directory.');return d={data:o,directory:u,name:a,type:ve.FILE,createdAt:Date.now(),fullPath:s},[2,e(d)]}})})}},Go=function(r){var e=r.isFile,t=r.exists,n=r.removeFile,i=r.updateFileDetails,o=r.rootDirectoryName;return function(s,a){return $(void 0,void 0,void 0,function(){var u,l,c,d,h,f;return C(this,function(p){switch(p.label){case 0:return u=B(s,o),[4,e(u)];case 1:if(l=p.sent(),!l)throw new Error('"'+u+'" is not a file.');return c=Ze(u,o),d=c+"/"+a,[4,t(d)];case 2:if(h=p.sent(),h)throw new Error('"'+d+'" is already taken.');return[4,i(u,{name:a,fullPath:d})];case 3:return f=p.sent(),[4,n(u)];case 4:return p.sent(),[2,f]}})})}},Ko=function(r){var e=r.isFile,t=r.deleteRecord,n=r.rootDirectoryName;return function(i){return $(void 0,void 0,void 0,function(){var o,s;return C(this,function(a){switch(a.label){case 0:return o=B(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" is not a file.');return[2,t(o)]}})})}},Ho=function(r){var e=r.result;return Boolean((e==null?void 0:e.type)===ve.DIRECTORY)},Qo=function(r){var e=r.exists,t=r.getRecord,n=r.rootDirectoryName;return function(i){return $(void 0,void 0,void 0,function(){var o,s;return C(this,function(a){switch(a.label){case 0:return o=B(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" directory does not exist.');return[2,t(o,Ho)]}})})}},es=function(r){var e=r.result;return e},ts=function(r){var e=r.isFile,t=r.getRecord,n=r.rootDirectoryName;return function(i){return $(void 0,void 0,void 0,function(){var o,s;return C(this,function(a){switch(a.label){case 0:return o=B(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" is not a file.');return[2,t(o,es)]}})})}},rs=function(r){var e=r.openCursor,t=r.isDirectory,n=r.rootDirectoryName;return function(i){return $(void 0,void 0,void 0,function(){var o,s,a,u,l;return C(this,function(c){switch(c.label){case 0:return o=B(i,n),[4,t(i)];case 1:if(s=c.sent(),!s)throw new Error('"'+o+'" is not a directory.');return a=[],u=[],l=function(d,h){var f=d.result;if(f){var p=f.value;if(p.type===ve.FILE){p.data;var g=Ii(p,["data"]);a.push(g)}else p.type===ve.DIRECTORY&&!p.isRoot&&u.push(p);f.continue()}else{var w=a.length,y=u.length,E=w===0&&y===0;h({isEmpty:E,filesCount:w,directoriesCount:y,files:a,directories:u})}},[2,e(o,l)]}})})}},ns=function(r){var e=r.isFile,t=r.putRecord,n=r.isDirectory,i=r.rootDirectoryName;return function(o){return $(void 0,void 0,void 0,function(){var s,a,u,l,c,d;return C(this,function(h){switch(h.label){case 0:if(s=B(o,i),s===i)throw new Error('Root directory: "'+s+'" already exist.');return a=ft.basename(s),u=Ze(s,i),[4,n(u)];case 1:if(l=h.sent(),!l)throw new Error('"'+u+'" is not a directory.');return[4,Ke(function(){return e(s)},function(){return!1})];case 2:if(c=h.sent(),c)throw new Error('"'+s+'" you cannot create a directory with the same name as the file.');return d={directory:u,isRoot:!1,name:a,createdAt:Date.now(),type:ve.DIRECTORY,fullPath:s},[2,t(d)]}})})}},is=function(r){var e=r.remove,t=r.isDirectory,n=r.readDirectory,i=r.rootDirectoryName;function o(s){return $(this,void 0,void 0,function(){var a,u,l,c,d,h,f,p,g,w,y,E,m;return C(this,function(S){switch(S.label){case 0:return a=B(s,i),[4,n(a)];case 1:if(u=S.sent(),l=u.files,c=u.filesCount,d=u.directories,h=u.directoriesCount,!(c>0))return[3,5];f=0,p=l,S.label=2;case 2:return f<p.length?(g=p[f],[4,e(g.fullPath)]):[3,5];case 3:S.sent(),S.label=4;case 4:return f++,[3,2];case 5:return h?[3,7]:[4,e(s)];case 6:return S.sent(),[2];case 7:w=function(j){return C(this,function(F){switch(F.label){case 0:return j.isRoot?[3,2]:[4,o(j.fullPath)];case 1:F.sent(),F.label=2;case 2:return[4,Ke(function(){return e(j.fullPath)})];case 3:return F.sent(),[2]}})},y=0,E=d,S.label=8;case 8:return y<E.length?(m=E[y],[5,w(m)]):[3,11];case 9:S.sent(),S.label=10;case 10:return y++,[3,8];case 11:return[2]}})})}return function(a){return $(this,void 0,void 0,function(){var u;return C(this,function(l){switch(l.label){case 0:return[4,t(a)];case 1:if(u=l.sent(),!u)throw new Error('"'+a+'" is not a directory.');return[4,o(a)];case 2:return l.sent(),a===i?[3,4]:[4,Ke(function(){return e(a)})];case 3:l.sent(),l.label=4;case 4:return[2]}})})}},os=function(r){var e=r.result;return e},ss=function(r){var e=r.getRecord,t=r.isDirectory,n=r.rootDirectoryName;return function(i){return $(void 0,void 0,void 0,function(){var o,s;return C(this,function(a){switch(a.label){case 0:return o=B(i,n),[4,t(i)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" is not a directory.');return[2,e(o,os)]}})})}},as=function(r){var e=r.putRecord,t=r.isDirectory,n=r.fileDetails,i=r.rootDirectoryName;return function(o,s){return $(void 0,void 0,void 0,function(){var a,u,l,c,d,h;return C(this,function(f){switch(f.label){case 0:if(a=B(o,i),a===i)throw new Error('Root directory: "'+a+'" cannot be updated.');return u=Ze(a,i),[4,t(u)];case 1:if(l=f.sent(),!l)throw new Error('"'+u+'" is not a directory.');return[4,Ke(function(){return t(a)},function(){return!1})];case 2:if(c=f.sent(),c)throw new Error('"'+a+'" you cannot update a directory.');return[4,n(a)];case 3:return d=f.sent(),h=ut(ut({},d),s),[2,e(h)]}})})}},ls=function(r){var e=r.putRecord,t=r.rootDirectoryName;return function(){return $(void 0,void 0,void 0,function(){var n;return C(this,function(i){return n={isRoot:!0,createdAt:Date.now(),name:t,type:ve.DIRECTORY,fullPath:t,directory:t},[2,e(n)]})})}},us=function(r){var e=r.databaseName,t=r.databaseVersion,n=r.objectStoreName,i=gs({databaseName:e,databaseVersion:t,objectStoreName:n}),o=ps({initializeObjectStore:i}),s=hs({initializeObjectStore:i}),a=ms({initializeObjectStore:i}),u=vs({initializeObjectStore:i});return{getRecord:o,putRecord:s,openCursor:a,deleteRecord:u}},cs="fullPath",Pt="directory";function Fr(r){if(!r)return null;var e=r;return e.result}function xr(r,e){e||r(new Error("Something went wrong and the database transaction was not opened."))}var fs=function(r){var e=r.databaseName,t=r.databaseVersion,n=r.objectStoreName;return new Promise(function(i,o){var s=ys(e,t);s.onerror=o,s.onsuccess=function(a){var u=a.target,l=Fr(u);xr(o,l),i(l)},s.onupgradeneeded=function(a){var u=a.target,l=Fr(u);xr(o,l);var c=l.createObjectStore(n,{keyPath:cs});c.createIndex(Pt,Pt,{unique:!1})}})},ds=function(){return Boolean(indexedDB)},hs=function(r){var e=r.initializeObjectStore;return function(t){return $(void 0,void 0,void 0,function(){var n;return C(this,function(i){switch(i.label){case 0:return[4,e("readwrite")];case 1:return n=i.sent(),[2,new Promise(function(o,s){var a=n.put(t);a.onerror=s,a.onsuccess=function(){return o(t)}})]}})})}},ps=function(r){var e=r.initializeObjectStore;return function(t,n){return $(void 0,void 0,void 0,function(){var i;return C(this,function(o){switch(o.label){case 0:return[4,e("readonly")];case 1:return i=o.sent(),[2,new Promise(function(s,a){var u=i.get(t);u.onerror=a,u.onsuccess=function(l){return s(n(l==null?void 0:l.target))}})]}})})}},ms=function(r){var e=r.initializeObjectStore;return function(t,n){return $(void 0,void 0,void 0,function(){var i,o,s,a;return C(this,function(u){switch(u.label){case 0:return[4,e("readonly")];case 1:return i=u.sent(),o=i.index(Pt),s=IDBKeyRange.only(t),a=o.openCursor(s),[2,new Promise(function(l,c){a.onerror=c,a.onsuccess=function(d){var h=d.target;return n(h,l)}})]}})})}},vs=function(r){var e=r.initializeObjectStore;return function(t){return $(void 0,void 0,void 0,function(){var n;return C(this,function(i){switch(i.label){case 0:return[4,e("readwrite")];case 1:return n=i.sent(),[2,new Promise(function(o,s){var a=n.delete(t);a.onerror=s,a.onsuccess=function(){return o()}})]}})})}},ys=function(r,e){return indexedDB.open(r,e)},gs=function(r){var e=r.databaseName,t=r.databaseVersion,n=r.objectStoreName;return function(i){return $(void 0,void 0,void 0,function(){var o,s;return C(this,function(a){switch(a.label){case 0:return[4,fs({databaseName:e,databaseVersion:t,objectStoreName:n})];case 1:return o=a.sent(),s=o.transaction(n,i),[2,s.objectStore(n)]}})})}},Be={databaseVersion:1,objectStoreName:"files",rootDirectoryName:"root",databaseName:"indexeddb-fs"};function dn(r){var e=this,t=r===void 0?Be:r,n=t.databaseName,i=n===void 0?Be.databaseName:n,o=t.databaseVersion,s=o===void 0?Be.databaseVersion:o,a=t.objectStoreName,u=a===void 0?Be.objectStoreName:a,l=t.rootDirectoryName,c=l===void 0?Be.rootDirectoryName:l;function d(){h(),f()}function h(){if(!ds())throw new Error("Your browser does not support indexedDB.")}function f(){Mo({databaseName:i,objectStoreName:u,databaseVersion:s,rootDirectoryName:c})}var p=us({databaseName:i,databaseVersion:s,objectStoreName:u}),g=p.getRecord,w=p.putRecord,y=p.openCursor,E=p.deleteRecord,m=Zo({getRecord:g,rootDirectoryName:c}),S=Bo({exists:m,getRecord:g,rootDirectoryName:c}),j=Wo({exists:m,deleteRecord:E,rootDirectoryName:c}),F=ts({isFile:S,getRecord:g,rootDirectoryName:c}),k=Yo({fileDetails:F}),D=Ko({isFile:S,deleteRecord:E,rootDirectoryName:c}),x=Qo({exists:m,getRecord:g,rootDirectoryName:c}),W=Xo({putRecord:w,isDirectory:x,rootDirectoryName:c}),H=Uo({exists:m,isFile:S,writeFile:W,fileDetails:F,isDirectory:x,rootDirectoryName:c}),Q=rs({openCursor:y,isDirectory:x,rootDirectoryName:c}),Ne=ns({isFile:S,putRecord:w,isDirectory:x,rootDirectoryName:c}),le=is({remove:j,isDirectory:x,readDirectory:Q,rootDirectoryName:c}),we=ss({getRecord:g,isDirectory:x,rootDirectoryName:c}),ie=Lo({isFile:S,exists:m,isDirectory:x,fileDetails:F,directoryDetails:we,rootDirectoryName:c}),ee=as({putRecord:w,fileDetails:F,isDirectory:x,rootDirectoryName:c}),We=Jo({exists:m,isFile:S,removeFile:D,isDirectory:x,updateFileDetails:ee,rootDirectoryName:c}),ht=Go({exists:m,isFile:S,removeFile:D,updateFileDetails:ee,rootDirectoryName:c}),pt=ls({putRecord:w,rootDirectoryName:c});function mt(){return $(this,void 0,void 0,function(){var O;return C(this,function(Z){switch(Z.label){case 0:return[4,m(c)];case 1:return O=Z.sent(),O?[3,3]:[4,pt()];case 2:Z.sent(),Z.label=3;case 3:return[2]}})})}var L=function(O){return function(){for(var Z=[],be=0;be<arguments.length;be++)Z[be]=arguments[be];return $(e,void 0,void 0,function(){return C(this,function(_e){switch(_e.label){case 0:return[4,mt()];case 1:return _e.sent(),[2,O.apply(void 0,Z)]}})})}};return d(),{databaseName:i,databaseVersion:s,objectStoreName:u,rootDirectoryName:c,exists:L(m),isFile:L(S),remove:L(j),details:L(ie),copyFile:L(H),readFile:L(k),moveFile:L(We),writeFile:L(W),renameFile:L(ht),removeFile:L(D),fileDetails:L(F),isDirectory:L(x),readDirectory:L(Q),createDirectory:L(Ne),removeDirectory:L(le),directoryDetails:L(we)}}dn();const G=dn({databaseVersion:1,objectStoreName:"files",rootDirectoryName:"root",databaseName:"filesystem"}),J=r=>{let e=["root",...$t(r)].join("/");return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e},Sr=r=>{const e=r.split("/").reverse();e.pop();let t="/"+e.reverse().join("/");return t.endsWith("/")||(t=t+"/"),t};class ws{constructor(){b(this,"exists",async e=>await G.exists(J(e)));b(this,"copy",async(e,t)=>{await G.copyFile(J(e),J(t))});b(this,"createFile",async e=>{await G.writeFile(J(e),"")});b(this,"createFolder",async(e,t)=>{await G.createDirectory(J(e))});b(this,"getFiles",async e=>{let t=await G.readDirectory(J(e));t.files.forEach(i=>console.log(i));const n=[...t.files.map(i=>Mt(Sr(i.fullPath))),...t.directories.map(i=>at(Sr(i.fullPath)))];return n.forEach(i=>console.log(i)),n});b(this,"getMetadata",async e=>{let t=await G.fileDetails(J(e));return{lastModified:new Date(t.createdAt),size:async()=>(await G.readFile(J(e))).byteLength}});b(this,"readBytes",async e=>await G.readFile(J(e)));b(this,"readObject",async e=>await G.readFile(J(e)));b(this,"readString",async e=>await G.readFile(J(e)));b(this,"writeBytes",async(e,t)=>{await G.writeFile(J(e),t)});b(this,"writeObject",async(e,t)=>{await G.writeFile(J(e),t)});b(this,"writeString",async(e,t)=>{await G.writeFile(J(e),t)});b(this,"deleteFile",async e=>G.removeFile(J(e)));b(this,"deleteFolder",async e=>{await G.removeDirectory(J(e))})}}new di({target:document.getElementById("app")});try{let r=new ws;Di(r)}catch(r){console.error("Unable to initialize filesystem.",r)}re.registerApp(new ct);re.registerApp(new Zr);de.spawn(ct,{backgroundColor:"#1a1d1e"});
