var xn=Object.defineProperty;var Sn=(r,e,t)=>e in r?xn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var E=(r,e,t)=>(Sn(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function z(){}const kn=r=>r;function On(r,e){for(const t in e)r[t]=e[t];return r}function Pn(r){return r&&typeof r=="object"&&typeof r.then=="function"}function Cr(r){return r()}function Qt(){return Object.create(null)}function ke(r){r.forEach(Cr)}function et(r){return typeof r=="function"}function ie(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let nt;function Ee(r,e){return nt||(nt=document.createElement("a")),nt.href=e,r===nt.href}function Rn(r){return Object.keys(r).length===0}function zr(r,...e){if(r==null)return z;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function $r(r){let e;return zr(r,t=>e=t)(),e}function Y(r,e,t){r.$$.on_destroy.push(zr(e,t))}function Tr(r,e,t,n){if(r){const i=Mr(r,e,t,n);return r[0](i)}}function Mr(r,e,t,n){return r[1]&&n?On(t.ctx.slice(),r[1](n(e))):t.ctx}function Vr(r,e,t,n){if(r[2]&&n){const i=r[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function Wr(r,e,t,n,i,o){if(i){const s=Mr(e,t,n,o);r.p(s,i)}}function Lr(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}const Zr=typeof window<"u";let Nn=Zr?()=>window.performance.now():()=>Date.now(),$t=Zr?r=>requestAnimationFrame(r):z;const Te=new Set;function qr(r){Te.forEach(e=>{e.c(r)||(Te.delete(e),e.f())}),Te.size!==0&&$t(qr)}function jn(r){let e;return Te.size===0&&$t(qr),{promise:new Promise(t=>{Te.add(e={c:r,f:t})}),abort(){Te.delete(e)}}}function A(r,e){r.appendChild(e)}function Br(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function In(r){const e=D("style");return Cn(Br(r),e),e.sheet}function Cn(r,e){return A(r.head||r,e),e.sheet}function P(r,e,t){r.insertBefore(e,t||null)}function k(r){r.parentNode&&r.parentNode.removeChild(r)}function zn(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function D(r){return document.createElement(r)}function B(r){return document.createTextNode(r)}function j(){return B(" ")}function pt(){return B("")}function V(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function g(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function $n(r){return Array.from(r.childNodes)}function Ae(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function ee(r,e,t,n){t===null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}function Se(r,e,t){r.classList[t?"add":"remove"](e)}function er(r,e){return new r(e)}const ut=new Map;let ct=0;function Tn(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function Mn(r,e){const t={stylesheet:In(e),rules:{}};return ut.set(r,t),t}function Vn(r,e,t,n,i,o,s,a=0){const u=16.666/n;let l=`{
`;for(let _=0;_<=1;_+=u){const w=e+(t-e)*o(_);l+=_*100+`%{${s(w,1-w)}}
`}const c=l+`100% {${s(t,1-t)}}
}`,d=`__svelte_${Tn(c)}_${a}`,h=Br(r),{stylesheet:f,rules:m}=ut.get(h)||Mn(h,r);m[d]||(m[d]=!0,f.insertRule(`@keyframes ${d} ${c}`,f.cssRules.length));const y=r.style.animation||"";return r.style.animation=`${y?`${y}, `:""}${d} ${n}ms linear ${i}ms 1 both`,ct+=1,d}function Wn(r,e){const t=(r.style.animation||"").split(", "),n=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-n.length;i&&(r.style.animation=n.join(", "),ct-=i,ct||Ln())}function Ln(){$t(()=>{ct||(ut.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&k(e)}),ut.clear())})}function Zn(r,e,t,n){if(!e)return z;const i=r.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return z;const{delay:o=0,duration:s=300,easing:a=kn,start:u=Nn()+o,end:l=u+s,tick:c=z,css:d}=t(r,{from:e,to:i},n);let h=!0,f=!1,m;function y(){d&&(m=Vn(r,0,1,s,o,a,d)),o||(f=!0)}function _(){d&&Wn(r,m),h=!1}return jn(w=>{if(!f&&w>=u&&(f=!0),f&&w>=l&&(c(1,0),_()),!h)return!1;if(f){const v=w-u,p=0+1*a(v/s);c(p,1-p)}return!0}),y(),c(0,1),_}function qn(r){const e=getComputedStyle(r);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:n}=e,i=r.getBoundingClientRect();r.style.position="absolute",r.style.width=t,r.style.height=n,Bn(r,i)}}function Bn(r,e){const t=r.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const n=getComputedStyle(r),i=n.transform==="none"?"":n.transform;r.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Ke;function _e(r){Ke=r}function Ur(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function Yr(r){Ur().$$.on_mount.push(r)}const Ye=[],Ge=[],st=[],tr=[],Un=Promise.resolve();let kt=!1;function Yn(){kt||(kt=!0,Un.then(Tt))}function Ot(r){st.push(r)}const At=new Set;let it=0;function Tt(){const r=Ke;do{for(;it<Ye.length;){const e=Ye[it];it++,_e(e),Jn(e.$$)}for(_e(null),Ye.length=0,it=0;Ge.length;)Ge.pop()();for(let e=0;e<st.length;e+=1){const t=st[e];At.has(t)||(At.add(t),t())}st.length=0}while(Ye.length);for(;tr.length;)tr.pop()();kt=!1,At.clear(),_e(r)}function Jn(r){if(r.fragment!==null){r.update(),ke(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Ot)}}const at=new Set;let Ne;function mt(){Ne={r:0,c:[],p:Ne}}function vt(){Ne.r||ke(Ne.c),Ne=Ne.p}function L(r,e){r&&r.i&&(at.delete(r),r.i(e))}function q(r,e,t,n){if(r&&r.o){if(at.has(r))return;at.add(r),Ne.c.push(()=>{at.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}function rr(r,e){const t=e.token={};function n(i,o,s,a){if(e.token!==t)return;e.resolved=a;let u=e.ctx;s!==void 0&&(u=u.slice(),u[s]=a);const l=i&&(e.current=i)(u);let c=!1;e.block&&(e.blocks?e.blocks.forEach((d,h)=>{h!==o&&d&&(mt(),q(d,1,1,()=>{e.blocks[h]===d&&(e.blocks[h]=null)}),vt())}):e.block.d(1),l.c(),L(l,1),l.m(e.mount(),e.anchor),c=!0),e.block=l,e.blocks&&(e.blocks[o]=l),c&&Tt()}if(Pn(r)){const i=Ur();if(r.then(o=>{_e(i),n(e.then,1,e.value,o),_e(null)},o=>{if(_e(i),n(e.catch,2,e.error,o),_e(null),!e.hasCatch)throw o}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,r),!0;e.resolved=r}}function Xn(r,e,t){const n=e.slice(),{resolved:i}=r;r.current===r.then&&(n[r.value]=i),r.current===r.catch&&(n[r.error]=i),r.block.p(n,t)}function Jr(r,e){r.d(1),e.delete(r.key)}function Kn(r,e){q(r,1,1,()=>{e.delete(r.key)})}function Gn(r,e){r.f(),Jr(r,e)}function Mt(r,e,t,n,i,o,s,a,u,l,c,d){let h=r.length,f=o.length,m=h;const y={};for(;m--;)y[r[m].key]=m;const _=[],w=new Map,v=new Map;for(m=f;m--;){const x=d(i,o,m),F=t(x);let b=s.get(F);b?n&&b.p(x,e):(b=l(F,x),b.c()),w.set(F,_[m]=b),F in y&&v.set(F,Math.abs(m-y[F]))}const p=new Set,S=new Set;function N(x){L(x,1),x.m(a,c),s.set(x.key,x),c=x.first,f--}for(;h&&f;){const x=_[f-1],F=r[h-1],b=x.key,O=F.key;x===F?(c=x.first,h--,f--):w.has(O)?!s.has(b)||p.has(b)?N(x):S.has(O)?h--:v.get(b)>v.get(O)?(S.add(b),N(x)):(p.add(O),h--):(u(F,s),h--)}for(;h--;){const x=r[h];w.has(x.key)||u(x,s)}for(;f;)N(_[f-1]);return _}function ce(r){r&&r.c()}function se(r,e,t,n){const{fragment:i,after_update:o}=r.$$;i&&i.m(e,t),n||Ot(()=>{const s=r.$$.on_mount.map(Cr).filter(et);r.$$.on_destroy?r.$$.on_destroy.push(...s):ke(s),r.$$.on_mount=[]}),o.forEach(Ot)}function ae(r,e){const t=r.$$;t.fragment!==null&&(ke(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Hn(r,e){r.$$.dirty[0]===-1&&(Ye.push(r),Yn(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function le(r,e,t,n,i,o,s,a=[-1]){const u=Ke;_e(r);const l=r.$$={fragment:null,ctx:[],props:o,update:z,not_equal:i,bound:Qt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Qt(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};s&&s(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,h,...f)=>{const m=f.length?f[0]:h;return l.ctx&&i(l.ctx[d],l.ctx[d]=m)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](m),c&&Hn(r,d)),h}):[],l.update(),c=!0,ke(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const d=$n(e.target);l.fragment&&l.fragment.l(d),d.forEach(k)}else l.fragment&&l.fragment.c();e.intro&&L(r.$$.fragment),se(r,e.target,e.anchor,e.customElement),Tt()}_e(u)}class ue{$destroy(){ae(this,1),this.$destroy=z}$on(e,t){if(!et(t))return z;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Rn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ce=[];function Xr(r,e=z){let t;const n=new Set;function i(a){if(ie(r,a)&&(r=a,t)){const u=!Ce.length;for(const l of n)l[1](),Ce.push(l,r);if(u){for(let l=0;l<Ce.length;l+=2)Ce[l][0](Ce[l+1]);Ce.length=0}}}function o(a){i(a(r))}function s(a,u=z){const l=[a,u];return n.add(l),n.size===1&&(t=e(i)||z),a(r),()=>{n.delete(l),n.size===0&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function Qn(){return{close:!0,minimize:!0,maximize:!1}}function ne(r=void 0){let e=Xr(r),t={cachedValue:void 0,set(n){t.cachedValue=n,e.set(n)},subscribe:e.subscribe,update(n){let i=n(t.cachedValue);t.cachedValue=i,e.set(i)},get:()=>t.cachedValue};return t}class ei{constructor(e,t,n,i){E(this,"stores");this.stores=new ti(e,t,n,i)}get x(){return this.stores.x.get()}set x(e){this.stores.x.set(e)}get y(){return this.stores.y.get()}set y(e){this.stores.y.set(e)}get zIndex(){return this.stores.zIndex.get()}set zIndex(e){this.stores.zIndex.set(e)}get width(){return this.stores.width.get()}set width(e){this.stores.width.set(e)}get height(){return this.stores.height.get()}set height(e){this.stores.height.set(e)}get title(){return this.stores.title.get()}set title(e){this.stores.title.set(e)}get classes(){return this.stores.classes.get()}set classes(e){this.stores.classes.set(e)}get style(){return this.stores.style.get()}set style(e){this.stores.style.set(e)}get resizable(){return this.stores.resizable.get()}set resizable(e){this.stores.resizable.set(e)}get important(){return this.stores.important.get()}set important(e){this.stores.important.set(e)}get isVisible(){return this.stores.isVisible.get()}set isVisible(e){this.stores.isVisible.set(e)}get icon(){return this.stores.icon.get()}set icon(e){this.stores.icon.set(e)}get controlButtons(){return this.stores.controlButtons.get()}set controlButtons(e){this.stores.controlButtons.set(e)}}class ti{constructor(e,t,n,i){E(this,"classes",ne(""));E(this,"style",ne(""));E(this,"title",ne());E(this,"icon",ne());E(this,"resizable",ne(!1));E(this,"important",ne(!1));E(this,"isVisible",ne(!0));E(this,"controlButtons",ne(Qn()));E(this,"height");E(this,"width");E(this,"x");E(this,"y");E(this,"zIndex",ne(0));this.x=ne(e),this.y=ne(t),this.width=ne(n),this.height=ne(i)}}class Ze{constructor(e,t=void 0){E(this,"window");E(this,"listeners",[]);E(this,"listen",e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!=e)}));E(this,"trigger",(e=void 0)=>{this.listeners.forEach(t=>{t(this.window,e??this.defaultOptions)})});this.defaultOptions=t,this.window=e}}const he=class extends ei{constructor(t,n,i,o,s){super(t,n,i,o);E(this,"_process");E(this,"windowElement");E(this,"onPopInEnd",t=>{let n=this.windowElement,i=o=>{o.animationName=="pop-in"&&(n.removeEventListener("animationend",i),t(),n.style.animationDirection="normal")};this.windowElement.addEventListener("animationend",i)});E(this,"playCloseAnimation",()=>{this.windowElement.classList.remove("window-spawn"),this.windowElement.style.animationDirection="reverse",this.windowElement.offsetWidth,this.windowElement.classList.add("window-spawn")});E(this,"kill",()=>{this.closeEvent.trigger();let t=he.windows.filter(n=>n!=this);he.windowsStore.set(t),this.process.getWindows().length==0&&this.process.kill()});E(this,"dragStart",new Ze(this));E(this,"dragStop",new Ze(this));E(this,"onFocus",new Ze(this));E(this,"onUnfocus",new Ze(this));E(this,"closeEvent",new Ze(this));this.component=s}static get activeWindow(){return this.activeWindowStore.get()}static set activeWindow(t){var n,i;t!=this.activeWindow&&((i=(n=this.activeWindow)==null?void 0:n.onUnfocus)==null||i.trigger()),t!=null&&(t.process.lastActiveWindow=t,t.onFocus.trigger()),this.activeWindowStore.set(t)}static getWindows(){return[...this.windows]}get process(){return this._process}get isAlive(){return this._process!=null}get isActive(){return he.activeWindow==this}get isVisible(){return $r(this.stores.isVisible)}set isVisible(t){t==!1?(this.playCloseAnimation(),this.onPopInEnd(()=>{this.stores.isVisible.set(!1),he.activeWindow==this&&(he.activeWindow=void 0)})):this.stores.isVisible.set(!0)}hide(){this.isVisible=!1}unhide(){this.isVisible=!0}close(){this.playCloseAnimation(),this.onPopInEnd(this.kill)}};let M=he;E(M,"windowsStore",ne([])),E(M,"windows"),E(M,"activeWindowStore",ne(void 0)),E(M,"spawn",(t,n)=>(he.windowsStore.set([...he.windows,t]),t._process=n,t.title==null&&(t.title=t.process.app.name),t)),(()=>{he.windowsStore.subscribe(t=>{he.windows=t})})();let Kr=0;const Je=()=>Kr++,nr=()=>Kr;function ir(r){let e;return{c(){e=D("div"),ee(e,"height",r[2]+"px"),ee(e,"width",r[5]+"px"),g(e,"class","absolute")},m(t,n){P(t,e,n)},p(t,n){n&4&&ee(e,"height",t[2]+"px"),n&32&&ee(e,"width",t[5]+"px")},d(t){t&&k(e)}}}function ri(r){let e,t,n,i,o,s=r[1]&&ir(r);var a=r[0].component;function u(l){return{props:{window:l[0],process:l[0].process}}}return a&&(n=er(a,u(r))),{c(){e=D("div"),s&&s.c(),t=j(),n&&ce(n.$$.fragment),g(e,"style",i="height: "+r[2]+"px;"+r[3]),g(e,"class",r[4]),Se(e,"overflow-y-scroll",!0),Se(e,"scrollbar-hide",!0)},m(l,c){P(l,e,c),s&&s.m(e,null),A(e,t),n&&se(n,e,null),o=!0},p(l,[c]){l[1]?s?s.p(l,c):(s=ir(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null);const d={};if(c&1&&(d.window=l[0]),c&1&&(d.process=l[0].process),a!==(a=l[0].component)){if(n){mt();const h=n;q(h.$$.fragment,1,0,()=>{ae(h,1)}),vt()}a?(n=er(a,u(l)),ce(n.$$.fragment),L(n.$$.fragment,1),se(n,e,null)):n=null}else a&&n.$set(d);(!o||c&12&&i!==(i="height: "+l[2]+"px;"+l[3]))&&g(e,"style",i),(!o||c&16)&&g(e,"class",l[4]),(!o||c&16)&&Se(e,"overflow-y-scroll",!0),(!o||c&16)&&Se(e,"scrollbar-hide",!0)},i(l){o||(n&&L(n.$$.fragment,l),o=!0)},o(l){n&&q(n.$$.fragment,l),o=!1},d(l){l&&k(e),s&&s.d(),n&&ae(n)}}}function ni(r,e,t){let n,i,o,s,{window:a}=e,{notImportant:u}=e,{style:l,classes:c,height:d,width:h}=a.stores;return Y(r,l,f=>t(3,i=f)),Y(r,c,f=>t(4,o=f)),Y(r,d,f=>t(2,n=f)),Y(r,h,f=>t(5,s=f)),r.$$set=f=>{"window"in f&&t(0,a=f.window),"notImportant"in f&&t(1,u=f.notImportant)},[a,u,n,i,o,s,l,c,d,h]}class ii extends ue{constructor(e){super(),le(this,e,ni,ri,ie,{window:0,notImportant:1})}}function or(r){let e,t,n;return{c(){e=D("img"),Ee(e.src,t=r[8])||g(e,"src",t),g(e,"alt",n=r[9]+" icon"),g(e,"height",18),g(e,"width",18),g(e,"class","ml-1.5")},m(i,o){P(i,e,o)},p(i,o){o[0]&256&&!Ee(e.src,t=i[8])&&g(e,"src",t),o[0]&512&&n!==(n=i[9]+" icon")&&g(e,"alt",n)},d(i){i&&k(e)}}}function oi(r){let e,t;return{c(){e=D("span"),t=B(r[9]),g(e,"class","pl-2 text-gray-400")},m(n,i){P(n,e,i),A(e,t)},p(n,i){i[0]&512&&Ae(t,n[9])},d(n){n&&k(e)}}}function si(r){let e,t;return{c(){e=D("span"),t=B(r[9]),g(e,"class","pl-2")},m(n,i){P(n,e,i),A(e,t)},p(n,i){i[0]&512&&Ae(t,n[9])},d(n){n&&k(e)}}}function sr(r){let e,t,n;return{c(){e=D("span"),e.textContent="_",g(e,"class","pr-1.5")},m(i,o){P(i,e,o),t||(n=V(e,"click",r[25]),t=!0)},p:z,d(i){i&&k(e),t=!1,n()}}}function ar(r){let e;return{c(){e=D("span"),e.textContent="â–¡",g(e,"class","pr-1.5")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function ai(r){let e;return{c(){e=D("span"),e.textContent="x",g(e,"class","text-gray-500")},m(t,n){P(t,e,n)},p:z,d(t){t&&k(e)}}}function li(r){let e,t,n;return{c(){e=D("span"),e.textContent="x"},m(i,o){P(i,e,o),t||(n=V(e,"click",r[26]),t=!0)},p:z,d(i){i&&k(e),t=!1,n()}}}function ui(r){let e,t,n,i,o,s,a,u,l,c,d,h,f,m,y=r[8]!==void 0&&r[8].length!==0&&or(r);function _(b,O){return b[10]===b[0]?si:oi}let w=_(r),v=w(r),p=r[11].minimize&&sr(r),S=r[11].maximize&&ar();function N(b,O){return b[11].close?li:ai}let x=N(r),F=x(r);return d=new ii({props:{window:r[0],notImportant:r[2]}}),{c(){e=D("div"),t=D("div"),n=D("div"),y&&y.c(),i=j(),v.c(),o=j(),s=D("div"),a=D("span"),p&&p.c(),u=j(),S&&S.c(),l=j(),F.c(),c=j(),ce(d.$$.fragment),g(n,"class","flex items-center"),g(a,"class","pr-2.5 mb-1"),g(s,"class","flex items-center"),g(t,"class","h-7 flex justify-between title-bar text-sm rounded-t-md rounded-sm select-none svelte-jpt6my"),ee(t,"width",r[4]-2+"px"),g(e,"class","absolute border rounded-t-md rounded-sm border-gray-800 drop-shadow-md window-spawn"),ee(e,"width",r[4]+"px"),ee(e,"left",r[5]+"px"),ee(e,"top",r[6]+"px"),ee(e,"z-index",r[7]),Se(e,"hidden",!r[3])},m(b,O){P(b,e,O),A(e,t),A(t,n),y&&y.m(n,null),A(n,i),v.m(n,null),A(t,o),A(t,s),A(s,a),p&&p.m(a,null),A(a,u),S&&S.m(a,null),A(a,l),F.m(a,null),r[27](t),A(e,c),se(d,e,null),r[28](e),h=!0,f||(m=[V(t,"mousedown",r[22]),V(t,"mouseup",r[23]),V(t,"mousemove",r[24]),V(e,"mousedown",r[29])],f=!0)},p(b,O){b[8]!==void 0&&b[8].length!==0?y?y.p(b,O):(y=or(b),y.c(),y.m(n,i)):y&&(y.d(1),y=null),w===(w=_(b))&&v?v.p(b,O):(v.d(1),v=w(b),v&&(v.c(),v.m(n,null))),b[11].minimize?p?p.p(b,O):(p=sr(b),p.c(),p.m(a,u)):p&&(p.d(1),p=null),b[11].maximize?S||(S=ar(),S.c(),S.m(a,l)):S&&(S.d(1),S=null),x===(x=N(b))&&F?F.p(b,O):(F.d(1),F=x(b),F&&(F.c(),F.m(a,null))),(!h||O[0]&16)&&ee(t,"width",b[4]-2+"px");const W={};O[0]&1&&(W.window=b[0]),O[0]&4&&(W.notImportant=b[2]),d.$set(W),(!h||O[0]&16)&&ee(e,"width",b[4]+"px"),(!h||O[0]&32)&&ee(e,"left",b[5]+"px"),(!h||O[0]&64)&&ee(e,"top",b[6]+"px"),(!h||O[0]&128)&&ee(e,"z-index",b[7]),(!h||O[0]&8)&&Se(e,"hidden",!b[3])},i(b){h||(L(d.$$.fragment,b),h=!0)},o(b){q(d.$$.fragment,b),h=!1},d(b){b&&k(e),y&&y.d(),v.d(),p&&p.d(),S&&S.d(),F.d(),r[27](null),ae(d),r[28](null),f=!1,ke(m)}}}function lr(r){let e=0,t=0;if(r instanceof MouseEvent)e=r.pageX,t=r.pageY;else if(r instanceof TouchEvent){const n=r.touches[0];e=n.pageX,t=n.pageY}return[e,t]}function ci(r,e,t){let n,i,o,s,a,u,l,c,d,h,{window:f}=e,{classes:m,title:y,icon:_,x:w,y:v,width:p,height:S,style:N,controlButtons:x,isVisible:F,zIndex:b}=f.stores;Y(r,y,R=>t(9,c=R)),Y(r,_,R=>t(8,l=R)),Y(r,w,R=>t(5,s=R)),Y(r,v,R=>t(6,a=R)),Y(r,p,R=>t(4,o=R)),Y(r,x,R=>t(11,h=R)),Y(r,F,R=>t(3,i=R)),Y(r,b,R=>t(7,u=R));let O,W,K,G=!1;Yr(()=>{t(0,f.zIndex=Je(),f)});function we(){n||(M.activeWindow=f,f.zIndex<=nr()&&t(0,f.zIndex=Je(),f))}let{activeWindowStore:ve}=M;Y(r,ve,R=>t(10,d=R));function Fe(R){if(n||R instanceof MouseEvent&&R.button!==0)return;let[Z,xe]=lr(R);const be=document.body,rt=O.getBoundingClientRect();W=Z-(rt.left+be.scrollLeft-be.clientLeft),K=xe-(rt.top+be.scrollTop-be.clientTop),G=!0,f.zIndex<=nr()&&t(0,f.zIndex=Je(),f),R instanceof MouseEvent&&R.preventDefault(),document.addEventListener("mousemove",Pe=>{oe(Pe)}),document.addEventListener("mouseup",Pe=>{de(Pe)}),document.addEventListener("touchmove",Pe=>{oe(Pe)},{passive:!1}),document.addEventListener("touchend",Pe=>{de(Pe)},{passive:!1}),f.dragStart.trigger()}function de(R){R instanceof MouseEvent&&R.button!==0||(G=!1,R instanceof MouseEvent&&R.preventDefault(),document.removeEventListener("mousemove",Z=>{oe(Z)}),document.removeEventListener("mouseup",Z=>{de(Z)}),document.removeEventListener("touchmove",Z=>{oe(Z)}),document.removeEventListener("touchend",Z=>{de(Z)}),f.dragStop.trigger())}function oe(R){if(n||!G)return;let[Z,xe]=lr(R),be=Z-(W??0),rt=xe-(K??0);t(0,f.x=Math.max(0,be),f),t(0,f.y=Math.max(0,rt),f),R.preventDefault()}const Le=()=>f.hide(),bt=()=>f.close();function _t(R){Ge[R?"unshift":"push"](()=>{O=R,t(1,O)})}function Et(R){Ge[R?"unshift":"push"](()=>{f.windowElement=R,t(0,f)})}const U=()=>we();return r.$$set=R=>{"window"in R&&t(0,f=R.window)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(2,n=f.process.getImportantWindows().length!=0&&!f.important)},[f,O,n,i,o,s,a,u,l,c,d,h,y,_,w,v,p,x,F,b,we,ve,Fe,de,oe,Le,bt,_t,Et,U]}class fi extends ue{constructor(e){super(),le(this,e,ci,ui,ie,{window:0},null,[-1,-1])}}function ur(r,e,t){const n=r.slice();return n[3]=e[t],n}function cr(r,e){let t,n,i;return n=new fi({props:{window:e[3]}}),{key:r,first:null,c(){t=pt(),ce(n.$$.fragment),this.first=t},m(o,s){P(o,t,s),se(n,o,s),i=!0},p(o,s){e=o;const a={};s&1&&(a.window=e[3]),n.$set(a)},i(o){i||(L(n.$$.fragment,o),i=!0)},o(o){q(n.$$.fragment,o),i=!1},d(o){o&&k(t),ae(n,o)}}}function di(r){let e=[],t=new Map,n,i,o=r[0];const s=a=>a[3];for(let a=0;a<o.length;a+=1){let u=ur(r,o,a),l=s(u);t.set(l,e[a]=cr(l,u))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=pt()},m(a,u){for(let l=0;l<e.length;l+=1)e[l].m(a,u);P(a,n,u),i=!0},p(a,[u]){u&1&&(o=a[0],mt(),e=Mt(e,u,s,1,a,o,t,n.parentNode,Kn,cr,n,ur),vt())},i(a){if(!i){for(let u=0;u<o.length;u+=1)L(e[u]);i=!0}},o(a){for(let u=0;u<e.length;u+=1)q(e[u]);i=!1},d(a){for(let u=0;u<e.length;u+=1)e[u].d(a);a&&k(n)}}}function hi(r,e,t){let n,i,o=M.windowsStore;return Y(r,o,s=>t(2,i=s)),r.$$.update=()=>{r.$$.dirty&4&&t(0,n=i)},[n,o,i]}class pi extends ue{constructor(e){super(),le(this,e,hi,di,ie,{})}}const Gr="/assets/mastrielIcon-6c62ac08.svg",$e=class{constructor(e,t,n=Gr){this.name=e,this.mainWindow=t,this.icon=n}};let te=$e;E(te,"registeredApps",[]),E(te,"registerApp",e=>{$e.registeredApps.push(e)}),E(te,"getApp",e=>$e.registeredApps.find(t=>t.name==e)),E(te,"getAllApps",()=>[...$e.registeredApps]),E(te,"getAppByType",e=>{let t=$e.registeredApps.find(n=>n instanceof e);if(t==null)throw new Error("Invalid app specified. Is it registered?");return t});let fr=0;function mi(){return fr++,fr-1}function dr(r){let e,t,n;return{c(){e=D("button"),e.textContent="Continue"},m(i,o){P(i,e,o),t||(n=V(e,"mousedown",r[3]),t=!0)},p:z,d(i){i&&k(e),t=!1,n()}}}function vi(r){let e,t,n,i,o=r[0].message+"",s,a,u,l,c,d,h,f=!r[0].unrecoverable&&dr(r);return{c(){e=D("div"),t=D("div"),n=D("div"),i=D("span"),s=B(o),a=j(),u=D("div"),f&&f.c(),l=j(),c=D("button"),c.textContent="End Process",g(i,"class","text-center error-message whitespace-pre-line select-text svelte-wbgunv"),g(i,"style",""),g(n,"class","flex justify-center"),g(t,"class","h-20 error-message overflow-y-scroll scrollbar-hide svelte-wbgunv"),ee(t,"width",r[1]+"px"),g(e,"class","bg-red-800 border-b border-b-red-700 pt-3 drop-shadow-xl"),g(u,"class","flex justify-around pt-5")},m(m,y){P(m,e,y),A(e,t),A(t,n),A(n,i),A(i,s),P(m,a,y),P(m,u,y),f&&f.m(u,null),A(u,l),A(u,c),d||(h=V(c,"mousedown",r[4]),d=!0)},p(m,[y]){y&1&&o!==(o=m[0].message+"")&&Ae(s,o),y&2&&ee(t,"width",m[1]+"px"),m[0].unrecoverable?f&&(f.d(1),f=null):f?f.p(m,y):(f=dr(m),f.c(),f.m(u,l))},i:z,o:z,d(m){m&&k(e),m&&k(a),m&&k(u),f&&f.d(),d=!1,h()}}}function gi(r,e,t){let n,{process:i}=e,{window:o}=e,{width:s}=o.stores;Y(r,s,l=>t(1,n=l)),o.classes="bg-red-900",o.title=o.errorTitle,o.important=!0,o.controlButtons={maximize:!1,minimize:!1,close:!1},M.activeWindow=o,o.closeEvent.listen(()=>{M.activeWindow=o.spawner});const a=()=>{o.close(),M.activeWindow=i.mainWindow},u=()=>{i.kill()};return r.$$set=l=>{"process"in l&&t(5,i=l.process),"window"in l&&t(0,o=l.window)},[o,n,s,a,u,i]}class yi extends ue{constructor(e){super(),le(this,e,gi,vi,ie,{process:5,window:0})}}class hr extends M{constructor(e,t,n,i=!1){super(500,500,400,160,yi),this.errorTitle=e,this.message=t,this.spawner=n,this.unrecoverable=i}}const Re=class{constructor(e,t,n){E(this,"id");E(this,"app");E(this,"mainWindow");E(this,"lastActiveWindow");E(this,"options");E(this,"spawnWindow",e=>M.spawn(e,this));E(this,"kill",()=>{for(const e of this.getWindows())e.close();Re.processesStore.update(e=>e.filter(t=>t!=this))});E(this,"crash",(e,t)=>{this.spawnWindow(new hr("Fatal Error",`${this.app.name} has crashed:
${e}`,t,!0))});E(this,"error",(e,t)=>{this.spawnWindow(new hr("Error",`An error has occurred in ${this.app.name}:
${e}


hi`,t,!1))});this.id=t,this.app=e,n!=null&&(this.options=n)}getWindows(){return M.getWindows().filter(e=>e.process==this)??[]}getImportantWindows(){return this.getWindows().filter(e=>e.important)??[]}static mergeOptions(e,t){return{...t,...e}}};let ge=Re;E(ge,"processesStore",Xr([])),E(ge,"getProcesses",()=>$r(Re.processesStore)),E(ge,"spawn",(e,t)=>{let n=te.getAppByType(e),i=Re.mergeOptions(t,e.defaultOptions),o=new Re(n,mi(),i);Re.processesStore.update(a=>[...a,o]);let s=new M(300,300,400,400,n.mainWindow);return o.mainWindow=M.spawn(s,o),o.lastActiveWindow=o.mainWindow,o});function wi(r){const e=r-1;return e*e*e+1}function bi(r,{from:e,to:t},n={}){const i=getComputedStyle(r),o=i.transform==="none"?"":i.transform,[s,a]=i.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*s/t.width-(t.left+s),l=e.top+e.height*a/t.height-(t.top+a),{delay:c=0,duration:d=f=>Math.sqrt(f)*120,easing:h=wi}=n;return{delay:c,duration:et(d)?d(Math.sqrt(u*u+l*l)):d,easing:h,css:(f,m)=>{const y=m*u,_=m*l,w=f+m*e.width/t.width,v=f+m*e.height/t.height;return`transform: ${o} translate(${y}px, ${_}px) scale(${w}, ${v});`}}}function pr(r,e,t){const n=r.slice();return n[11]=e[t],n}function _i(r){let e;return{c(){e=D("span"),e.textContent=".",g(e,"class","text-center block")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function Ei(r){let e;return{c(){e=D("span"),e.textContent="_",g(e,"class","text-center block")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function mr(r,e){let t,n,i,o,s,a,u,l,c,d=z,h,f;function m(v,p){return p&3&&(a=null),a==null&&(a=!!v[0](v[11])),a?Ei:_i}let y=m(e,-1),_=y(e);function w(){return e[6](e[11])}return{key:r,first:null,c(){t=D("div"),n=D("img"),s=j(),_.c(),u=j(),Ee(n.src,i=e[11].app.icon)||g(n,"src",i),g(n,"width","30"),g(n,"height","30"),g(n,"alt",o=`${e[11].app.name}`),g(n,"class","translate-y-2.5"),g(t,"class",l=(e[0](e[11])?"selected":"unselected")+" process svelte-1h8nwke"),this.first=t},m(v,p){P(v,t,p),A(t,n),A(t,s),_.m(t,null),A(t,u),h||(f=V(t,"click",w),h=!0)},p(v,p){e=v,p&2&&!Ee(n.src,i=e[11].app.icon)&&g(n,"src",i),p&2&&o!==(o=`${e[11].app.name}`)&&g(n,"alt",o),y!==(y=m(e,p))&&(_.d(1),_=y(e),_&&(_.c(),_.m(t,u))),p&3&&l!==(l=(e[0](e[11])?"selected":"unselected")+" process svelte-1h8nwke")&&g(t,"class",l)},r(){c=t.getBoundingClientRect()},f(){qn(t),d()},a(){d(),d=Zn(t,c,bi,{duration:200})},d(v){v&&k(t),_.d(),h=!1,f()}}}function Ai(r){let e,t,n,i,o,s,a=[],u=new Map,l=r[1];const c=d=>d[11];for(let d=0;d<l.length;d+=1){let h=pr(r,l,d),f=c(h);u.set(f,a[d]=mr(f,h))}return{c(){e=D("div"),e.innerHTML='<div class="h-12 w-screen z-0 bg-taskbar svelte-1h8nwke"></div>',t=j(),n=D("div"),n.innerHTML='<div class="h-12 w-screen max-z-index bg-taskbar-blur svelte-1h8nwke"></div>',i=j(),o=D("div"),s=D("div");for(let d=0;d<a.length;d+=1)a[d].c();g(e,"class","fixed bottom-0 z-0"),g(n,"class","fixed bottom-0 max-z-index svelte-1h8nwke"),g(s,"class","h-12 w-screen max-z-index taskbar-contents flex items-center justify-center gap-1 svelte-1h8nwke"),g(o,"class","fixed bottom-0 max-z-index svelte-1h8nwke")},m(d,h){P(d,e,h),P(d,t,h),P(d,n,h),P(d,i,h),P(d,o,h),A(o,s);for(let f=0;f<a.length;f+=1)a[f].m(s,null)},p(d,[h]){if(h&19){l=d[1];for(let f=0;f<a.length;f+=1)a[f].r();a=Mt(a,h,c,1,d,l,u,s,Gn,mr,null,pr);for(let f=0;f<a.length;f+=1)a[f].a()}},i:z,o:z,d(d){d&&k(e),d&&k(t),d&&k(n),d&&k(i),d&&k(o);for(let h=0;h<a.length;h+=1)a[h].d()}}}function Di(r,e,t){let n,i,o,s=ge.processesStore;Y(r,s,f=>t(1,o=f));let a=M.activeWindowStore;Y(r,a,f=>t(5,i=f));const u=f=>{n(f)?c(f):(l(f),d(f))},l=f=>{console.log(f),f.getWindows().forEach(m=>{m.unhide(),m.zIndex=Je()})},c=f=>{f.getWindows().forEach(m=>{m.hide(),M.activeWindow=void 0})},d=f=>{M.activeWindow=f.lastActiveWindow,console.log("Focus!"),f.getWindows().sort(m=>m.zIndex).forEach(m=>{console.log("Window!"),m.zIndex=Je()})},h=f=>u(f);return r.$$.update=()=>{r.$$.dirty&32&&t(0,n=f=>(i==null?void 0:i.process)===f)},[n,o,s,a,u,i,h]}class Fi extends ue{constructor(e){super(),le(this,e,Di,Ai,ie,{})}}function xi(r){let e,t,n,i,o,s,a,u,l;return s=new pi({}),u=new Fi({}),{c(){e=D("div"),t=D("img"),i=j(),o=D("div"),ce(s.$$.fragment),a=j(),ce(u.$$.fragment),Ee(t.src,n=Gr)||g(t,"src",n),g(t,"alt","Site icon"),g(t,"height",256),g(t,"width",256),g(t,"class","drop-shadow-3xl"),g(e,"class","flex items-center justify-center h-screen w-screen absolute"),g(o,"class","absolute")},m(c,d){P(c,e,d),A(e,t),P(c,i,d),P(c,o,d),se(s,o,null),P(c,a,d),se(u,c,d),l=!0},p:z,i(c){l||(L(s.$$.fragment,c),L(u.$$.fragment,c),l=!0)},o(c){q(s.$$.fragment,c),q(u.$$.fragment,c),l=!1},d(c){c&&k(e),c&&k(i),c&&k(o),ae(s),c&&k(a),ae(u,c)}}}class Si extends ue{constructor(e){super(),le(this,e,null,xi,ie,{})}}function ki(r){return r[Math.floor(Math.random()*r.length)]}function Oi(r){return Math.floor(Math.random()*r)}const Hr="/assets/consoleIcon-9d1dc8de.svg",Pi=r=>new Promise(e=>setTimeout(e,r)),Ri="/assets/chatroomIcon-cd53aa5d.svg";function Ni(r){let e,t,n;return{c(){e=D("iframe"),g(e,"class",t="w-full h-full "+(r[2]===r[0]?"pointer-events-auto":"pointer-events-none")),Ee(e.src,n="https://chatroom-d29ab.web.app/")||g(e,"src",n)},m(i,o){P(i,e,o),r[5](e)},p(i,[o]){o&5&&t!==(t="w-full h-full "+(i[2]===i[0]?"pointer-events-auto":"pointer-events-none"))&&g(e,"class",t)},i:z,o:z,d(i){i&&k(e),r[5](null)}}}function ji(r,e,t){let n,{process:i}=e,{window:o}=e;o.icon=i.app.icon,o.width=600,o.height=600;let s;const a=()=>{s!=null&&t(1,s.style.pointerEvents="none",s)},u=()=>{s!=null&&t(1,s.style.pointerEvents="",s)};o.dragStart.listen(()=>{a()}),o.dragStop.listen(()=>{u()});let l=M.activeWindowStore;Y(r,l,d=>t(2,n=d));function c(d){Ge[d?"unshift":"push"](()=>{s=d,t(1,s)})}return r.$$set=d=>{"process"in d&&t(4,i=d.process),"window"in d&&t(0,o=d.window)},[o,s,n,l,i,c]}class Ii extends ue{constructor(e){super(),le(this,e,ji,Ni,ie,{process:4,window:0})}}class Qr extends te{constructor(){super("Chatroom",Ii,Ri)}}function Vt(r){let e=r.replace("\\","/");return e.startsWith("/")&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),{fullPath:"/"+e.split("/").join("/"),type:"file"}}function ft(r){return{...Vt(r),type:"folder"}}function Wt(r){return r.fullPath.split("/").slice(1)}function vr(r){const e=Wt(r);return e[e.length-1]}function Ci(r){let e=Wt(r);return e.pop(),ft(e.join("/"))}function zi(r){dt=r}let dt;const $i="/assets/fileIcon-0be6809a.svg",Ti="/assets/folderIcon-7558d802.svg",Mi="/assets/folderBackIcon-fb3b0a43.svg";function gr(r,e,t){const n=r.slice();return n[13]=e[t],n[15]=t,n}function Vi(r){let e,t,n=r[16]+"",i;return{c(){e=D("span"),t=B("cannot load files! "),i=B(n)},m(o,s){P(o,e,s),A(e,t),A(e,i)},p(o,s){s&4&&n!==(n=o[16]+"")&&Ae(i,n)},d(o){o&&k(e)}}}function Wi(r){let e,t=[],n=new Map,i=r[12];const o=s=>s[13].fullPath;for(let s=0;s<i.length;s+=1){let a=gr(r,i,s),u=o(a);n.set(u,t[s]=yr(u,a))}return{c(){e=D("div");for(let s=0;s<t.length;s+=1)t[s].c();g(e,"class","files-size overflow-y-scroll svelte-lc7jml")},m(s,a){P(s,e,a);for(let u=0;u<t.length;u+=1)t[u].m(e,null)},p(s,a){a&28&&(i=s[12],t=Mt(t,a,o,1,s,i,n,e,Jr,yr,null,gr))},d(s){s&&k(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function yr(r,e){let t,n,i,o,s,a=vr(e[13])+"",u,l,c,d;function h(){return e[8](e[13])}return{key:r,first:null,c(){t=D("div"),n=D("img"),o=j(),s=D("span"),u=B(a),l=j(),Ee(n.src,i=e[3](e[13]))||g(n,"src",i),g(n,"alt","file icon"),g(n,"height",18),g(n,"width",18),g(s,"class","block pl-1"),g(t,"class","flex flex-grow svelte-lc7jml"),Se(t,"odd",e[15]%2===0),this.first=t},m(f,m){P(f,t,m),A(t,n),A(t,o),A(t,s),A(s,u),A(t,l),c||(d=V(t,"click",h),c=!0)},p(f,m){e=f,m&4&&!Ee(n.src,i=e[3](e[13]))&&g(n,"src",i),m&4&&a!==(a=vr(e[13])+"")&&Ae(u,a),m&4&&Se(t,"odd",e[15]%2===0)},d(f){f&&k(t),c=!1,d()}}}function Li(r){let e;return{c(){e=D("span"),e.textContent="loading..."},m(t,n){P(t,e,n)},p:z,d(t){t&&k(e)}}}function Zi(r){let e,t,n,i,o=r[1]()+"",s,a,u,l,c,d,h,f,m,y,_,w={ctx:r,current:null,token:null,hasCatch:!0,pending:Li,then:Wi,catch:Vi,value:12,error:16};return rr(m=r[2],w),{c(){e=D("div"),t=D("div"),n=D("span"),i=B(r[0]),s=B(o),a=j(),u=D("div"),l=D("div"),c=D("img"),h=j(),f=pt(),w.block.c(),g(n,"class","text-sm pl-5"),Ee(c.src,d=Mi)||g(c,"src",d),g(c,"alt","file icon"),g(c,"height",24),g(c,"width",24),g(l,"class","flex icon-button p-0.5 svelte-lc7jml"),g(u,"class","flex pr-2"),g(t,"class","flex justify-between items-center"),g(e,"class","bg-gray-800 border-b border-b-gray-700 pt-2 pb-2 drop-shadow-xl")},m(v,p){P(v,e,p),A(e,t),A(t,n),A(n,i),A(n,s),A(t,a),A(t,u),A(u,l),A(l,c),P(v,h,p),P(v,f,p),w.block.m(v,w.anchor=p),w.mount=()=>f.parentNode,w.anchor=f,y||(_=V(l,"click",r[5]),y=!0)},p(v,[p]){r=v,p&1&&Ae(i,r[0]),p&2&&o!==(o=r[1]()+"")&&Ae(s,o),w.ctx=r,p&4&&m!==(m=r[2])&&rr(m,w)||Xn(w,r,p)},i:z,o:z,d(v){v&&k(e),v&&k(h),v&&k(f),w.block.d(v),w.token=null,w=null,y=!1,_()}}}function qi(r,e,t){let n,i,{process:o}=e,{window:s}=e,a="/";s.classes="bg-gray-900",s.title="Select a File",s.important=!0,s.controlButtons={maximize:!1,minimize:!1,close:!0},M.activeWindow=s,s.closeEvent.listen(()=>{s.returnNone()});const u=f=>f.type=="folder"?Ti:$i,l=f=>{if(f.type=="folder"){c(f);return}s.returnFile(f),s.close()},c=f=>{t(0,a=f.fullPath)},d=()=>{t(0,a=Ci(ft(a)).fullPath)},h=f=>l(f);return r.$$set=f=>{"process"in f&&t(7,o=f.process),"window"in f&&t(6,s=f.window)},r.$$.update=()=>{r.$$.dirty&1&&t(2,n=dt.getFiles(ft(a)).catch(console.error)),r.$$.dirty&1&&t(1,i=()=>a=="/"?"":"/")},[a,i,n,u,l,d,s,o,h]}class Bi extends ue{constructor(e){super(),le(this,e,qi,Zi,ie,{process:7,window:6})}}class Ui extends M{constructor(t,n){super(500,500,500,400,Bi);E(this,"promise");E(this,"resolve");E(this,"reject");E(this,"returnFile",t=>this.resolve(t));E(this,"returnNone",()=>this.reject("process exit"));E(this,"getFile",async()=>await this.promise);this.spawner=t,this.extensionMask=n,this.promise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}}function Yi(r){let e,t,n,i,o,s,a,u,l,c,d,h,f,m,y,_,w,v,p,S=(r[0]??"none")+"",N,x,F,b,O,W;return{c(){e=D("div"),t=D("span"),t.textContent="Remove process",n=j(),i=D("span"),i.textContent="Update color",o=j(),s=D("span"),s.textContent="Update title",a=j(),u=D("span"),u.textContent="Spawn another",l=j(),c=D("span"),c.textContent="Show error",d=j(),h=D("span"),h.textContent="Show unrecoverable error",f=j(),m=D("span"),m.textContent="Turn invisible temporarily",y=j(),_=D("span"),_.textContent="Open Chatroom",w=j(),v=D("span"),p=B("Select File (selected: "),N=B(S),x=B(")"),F=j(),b=D("span"),b.textContent="Create example.txt",g(t,"class","link svelte-18apmpb"),g(i,"class","link svelte-18apmpb"),g(s,"class","link svelte-18apmpb"),g(u,"class","link svelte-18apmpb"),g(c,"class","link svelte-18apmpb"),g(h,"class","link svelte-18apmpb"),g(m,"class","link svelte-18apmpb"),g(_,"class","link svelte-18apmpb"),g(v,"class","link svelte-18apmpb"),g(b,"class","link svelte-18apmpb"),g(e,"class","pt-2 pl-3 options svelte-18apmpb")},m(K,G){P(K,e,G),A(e,t),A(e,n),A(e,i),A(e,o),A(e,s),A(e,a),A(e,u),A(e,l),A(e,c),A(e,d),A(e,h),A(e,f),A(e,m),A(e,y),A(e,_),A(e,w),A(e,v),A(v,p),A(v,N),A(v,x),A(e,F),A(e,b),O||(W=[V(t,"click",r[1]),V(i,"click",r[3]),V(s,"click",r[4]),V(u,"click",r[2]),V(c,"click",r[5]),V(h,"click",r[6]),V(m,"click",r[7]),V(_,"click",r[8]),V(v,"click",r[9]),V(b,"click",r[10])],O=!0)},p(K,[G]){G&1&&S!==(S=(K[0]??"none")+"")&&Ae(N,S)},i:z,o:z,d(K){K&&k(e),O=!1,ke(W)}}}function Ji(r,e,t){let{process:n}=e,{window:i}=e,o=n.options;i.icon=Hr,i.style="background-color: "+o.backgroundColor;let s;Yr(()=>{s=0});function a(){n.kill(),console.log("Process killed!")}const u=()=>{let p=ge.spawn(gt);console.log("New process spawned!"),console.log(p),M.activeWindow=p.mainWindow},l=()=>{let p=["bg-red","bg-blue","bg-lime","bg-black"];t(11,i.classes=ki(p),i),console.log("Color updated!")},c=()=>{s+=1,t(11,i.title=s.toString(),i),console.log("Title updated!")},d=()=>{n.error("User has initiated an error.",i)},h=()=>{n.crash("User has forced a crash.",i)},f=async()=>{t(11,i.isVisible=!1,i),await Pi(3e3),t(11,i.isVisible=!0,i)},m=async()=>{let p=ge.spawn(Qr);M.activeWindow=p.mainWindow};let y,_;const w=async()=>{y=await M.spawn(new Ui(i,void 0),n).getFile(),t(0,_=await dt.readString(y))},v=async()=>{await dt.writeString(Vt(`example-${Oi(1e3)}.txt`),"hi!")};return r.$$set=p=>{"process"in p&&t(12,n=p.process),"window"in p&&t(11,i=p.window)},[_,a,u,l,c,d,h,f,m,w,v,i,n]}class Xi extends ue{constructor(e){super(),le(this,e,Ji,Yi,ie,{process:12,window:11})}}class gt extends te{constructor(){super("Developer Console",Xi,Hr)}}E(gt,"defaultOptions",{backgroundColor:"#000000"});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ht=function(){return ht=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ht.apply(this,arguments)};function Ki(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function T(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(d){s(d)}}function u(c){try{l(n.throw(c))}catch(d){s(d)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})}function $(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Ve=function(r){return typeof r=="string"||r instanceof String},Gi=new RegExp("^([A-Za-z]:|[A-Za-z0-9_-]+(.[A-Za-z0-9_-]+)*)((/[A-Za-z0-9_.-]+)+)$");function Hi(r){return Ve(r)?Gi.test(r):!1}var He=function(r,e){return T(void 0,void 0,void 0,function(){var t;return $(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,r()];case 1:return[2,n.sent()];case 2:return t=n.sent(),e&&e(t),[3,3];case 3:return[2,null]}})})};function Qi(r){return!Ve(r)||r.length===0?!1:r[0]==="/"}function en(r,e){for(var t=0,n=r.length-1;n>=0;n--){var i=r[n];i==="."?r.splice(n,1):i===".."?(r.splice(n,1),t++):t&&(r.splice(n,1),t--)}if(e)for(;t--;t)r.unshift("..");return r}var eo=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Lt=function(r){return eo.exec(r).slice(1)};function Pt(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var n=t>=0?arguments[t]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;r=n+"/"+r,e=n.charAt(0)==="/"}return r=en(Zt(r.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+r||"."}function tn(r){var e=rn(r),t=lo(r,-1)==="/";return r=en(Zt(r.split("/"),function(n){return!!n}),!e).join("/"),!r&&!e&&(r="."),r&&t&&(r+="/"),(e?"/":"")+r}function rn(r){return r.charAt(0)==="/"}function to(){var r=Array.prototype.slice.call(arguments,0);return tn(Zt(r,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function ro(r,e){r=Pt(r).substr(1),e=Pt(e).substr(1);function t(l){for(var c=0;c<l.length&&l[c]==="";c++);for(var d=l.length-1;d>=0&&l[d]==="";d--);return c>d?[]:l.slice(c,d-c+1)}for(var n=t(r.split("/")),i=t(e.split("/")),o=Math.min(n.length,i.length),s=o,a=0;a<o;a++)if(n[a]!==i[a]){s=a;break}for(var u=[],a=s;a<n.length;a++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")}var no="/",io=":";function oo(r){var e=Lt(r),t=e[0],n=e[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)}function so(r,e){var t=Lt(r)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function ao(r){return Lt(r)[3]}var yt={extname:ao,basename:so,dirname:oo,sep:no,delimiter:io,relative:ro,join:to,isAbsolute:rn,normalize:tn,resolve:Pt};function Zt(r,e){if(r.filter)return r.filter(e);for(var t=[],n=0;n<r.length;n++)e(r[n],n,r)&&t.push(r[n]);return t}var lo="ab".substr(-1)==="b"?function(r,e,t){return r.substr(e,t)}:function(r,e,t){return e<0&&(e=r.length+e),r.substr(e,t)};function We(r,e){var t=yt.dirname(r);return t==="."?e:t}function uo(r){if(r.__esModule)return r;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(t){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}),e}/*! https://mths.be/punycode v1.4.1 by @mathias */var Dt=2147483647,Xe=36,nn=1,Rt=26,co=38,fo=700,ho=72,po=128,mo="-",vo=/[^\x20-\x7E]/,go=/[\x2E\u3002\uFF0E\uFF61]/g,yo={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ft=Xe-nn,ze=Math.floor,xt=String.fromCharCode;function wr(r){throw new RangeError(yo[r])}function wo(r,e){for(var t=r.length,n=[];t--;)n[t]=e(r[t]);return n}function bo(r,e){var t=r.split("@"),n="";t.length>1&&(n=t[0]+"@",r=t[1]),r=r.replace(go,".");var i=r.split("."),o=wo(i,e).join(".");return n+o}function _o(r){for(var e=[],t=0,n=r.length,i,o;t<n;)i=r.charCodeAt(t++),i>=55296&&i<=56319&&t<n?(o=r.charCodeAt(t++),(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),t--)):e.push(i);return e}function br(r,e){return r+22+75*(r<26)-((e!=0)<<5)}function Eo(r,e,t){var n=0;for(r=t?ze(r/fo):r>>1,r+=ze(r/e);r>Ft*Rt>>1;n+=Xe)r=ze(r/Ft);return ze(n+(Ft+1)*r/(r+co))}function Ao(r){var e,t,n,i,o,s,a,u,l,c,d,h=[],f,m,y,_;for(r=_o(r),f=r.length,e=po,t=0,o=ho,s=0;s<f;++s)d=r[s],d<128&&h.push(xt(d));for(n=i=h.length,i&&h.push(mo);n<f;){for(a=Dt,s=0;s<f;++s)d=r[s],d>=e&&d<a&&(a=d);for(m=n+1,a-e>ze((Dt-t)/m)&&wr("overflow"),t+=(a-e)*m,e=a,s=0;s<f;++s)if(d=r[s],d<e&&++t>Dt&&wr("overflow"),d==e){for(u=t,l=Xe;c=l<=o?nn:l>=o+Rt?Rt:l-o,!(u<c);l+=Xe)_=u-c,y=Xe-c,h.push(xt(br(c+_%y,0))),u=ze(_/y);h.push(xt(br(u,0))),o=Eo(t,m,n==i),t=0,++n}++t,++e}return h.join("")}function Do(r){return bo(r,function(e){return vo.test(e)?"xn--"+Ao(e):e})}function ot(r){return r===null}function Fo(r){return r==null}function qt(r){return typeof r=="string"}function on(r){return typeof r=="object"&&r!==null}function xo(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var sn=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function qe(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}}function So(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?_r(ko(r),function(i){var o=encodeURIComponent(qe(i))+t;return sn(r[i])?_r(r[i],function(s){return o+encodeURIComponent(qe(s))}).join(e):o+encodeURIComponent(qe(r[i]))}).join(e):n?encodeURIComponent(qe(n))+t+encodeURIComponent(qe(r)):""}function _r(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var ko=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};function Er(r,e,t,n){e=e||"&",t=t||"=";var i={};if(typeof r!="string"||r.length===0)return i;var o=/\+/g;r=r.split(e);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var a=r.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var l=r[u].replace(o,"%20"),c=l.indexOf(t),d,h,f,m;c>=0?(d=l.substr(0,c),h=l.substr(c+1)):(d=l,h=""),f=decodeURIComponent(d),m=decodeURIComponent(h),xo(i,f)?sn(i[f])?i[f].push(m):i[f]=[i[f],m]:i[f]=m}return i}var Oo={parse:tt,resolve:un,resolveObject:cn,format:ln,Url:me};function me(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Po=/^([a-z0-9.+-]+:)/i,Ro=/:[0-9]*$/,No=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,jo=["<",">",'"',"`"," ","\r",`
`,"	"],Io=["{","}","|","\\","^","`"].concat(jo),Nt=["'"].concat(Io),Ar=["%","/","?",";","#"].concat(Nt),Dr=["/","?","#"],Co=255,Fr=/^[+a-z0-9A-Z_-]{0,63}$/,zo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$o={javascript:!0,"javascript:":!0},jt={javascript:!0,"javascript:":!0},Me={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function tt(r,e,t){if(r&&on(r)&&r instanceof me)return r;var n=new me;return n.parse(r,e,t),n}me.prototype.parse=function(r,e,t){return an(this,r,e,t)};function an(r,e,t,n){if(!qt(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),o=i!==-1&&i<e.indexOf("#")?"?":"#",s=e.split(o),a=/\\/g;s[0]=s[0].replace(a,"/"),e=s.join(o);var u=e;if(u=u.trim(),!n&&e.split("#").length===1){var l=No.exec(u);if(l)return r.path=u,r.href=u,r.pathname=l[1],l[2]?(r.search=l[2],t?r.query=Er(r.search.substr(1)):r.query=r.search.substr(1)):t&&(r.search="",r.query={}),r}var c=Po.exec(u);if(c){c=c[0];var d=c.toLowerCase();r.protocol=d,u=u.substr(c.length)}if(n||c||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=u.substr(0,2)==="//";h&&!(c&&jt[c])&&(u=u.substr(2),r.slashes=!0)}var f,m,y,_;if(!jt[c]&&(h||c&&!Me[c])){var w=-1;for(f=0;f<Dr.length;f++)m=u.indexOf(Dr[f]),m!==-1&&(w===-1||m<w)&&(w=m);var v,p;for(w===-1?p=u.lastIndexOf("@"):p=u.lastIndexOf("@",w),p!==-1&&(v=u.slice(0,p),u=u.slice(p+1),r.auth=decodeURIComponent(v)),w=-1,f=0;f<Ar.length;f++)m=u.indexOf(Ar[f]),m!==-1&&(w===-1||m<w)&&(w=m);w===-1&&(w=u.length),r.host=u.slice(0,w),u=u.slice(w),fn(r),r.hostname=r.hostname||"";var S=r.hostname[0]==="["&&r.hostname[r.hostname.length-1]==="]";if(!S){var N=r.hostname.split(/\./);for(f=0,y=N.length;f<y;f++){var x=N[f];if(x&&!x.match(Fr)){for(var F="",b=0,O=x.length;b<O;b++)x.charCodeAt(b)>127?F+="x":F+=x[b];if(!F.match(Fr)){var W=N.slice(0,f),K=N.slice(f+1),G=x.match(zo);G&&(W.push(G[1]),K.unshift(G[2])),K.length&&(u="/"+K.join(".")+u),r.hostname=W.join(".");break}}}}r.hostname.length>Co?r.hostname="":r.hostname=r.hostname.toLowerCase(),S||(r.hostname=Do(r.hostname)),_=r.port?":"+r.port:"";var we=r.hostname||"";r.host=we+_,r.href+=r.host,S&&(r.hostname=r.hostname.substr(1,r.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!$o[d])for(f=0,y=Nt.length;f<y;f++){var ve=Nt[f];if(u.indexOf(ve)!==-1){var Fe=encodeURIComponent(ve);Fe===ve&&(Fe=escape(ve)),u=u.split(ve).join(Fe)}}var de=u.indexOf("#");de!==-1&&(r.hash=u.substr(de),u=u.slice(0,de));var oe=u.indexOf("?");if(oe!==-1?(r.search=u.substr(oe),r.query=u.substr(oe+1),t&&(r.query=Er(r.query)),u=u.slice(0,oe)):t&&(r.search="",r.query={}),u&&(r.pathname=u),Me[d]&&r.hostname&&!r.pathname&&(r.pathname="/"),r.pathname||r.search){_=r.pathname||"";var Le=r.search||"";r.path=_+Le}return r.href=Bt(r),r}function ln(r){return qt(r)&&(r=an({},r)),Bt(r)}function Bt(r){var e=r.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=r.protocol||"",n=r.pathname||"",i=r.hash||"",o=!1,s="";r.host?o=e+r.host:r.hostname&&(o=e+(r.hostname.indexOf(":")===-1?r.hostname:"["+this.hostname+"]"),r.port&&(o+=":"+r.port)),r.query&&on(r.query)&&Object.keys(r.query).length&&(s=So(r.query));var a=r.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),r.slashes||(!t||Me[t])&&o!==!1?(o="//"+(o||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),a=a.replace("#","%23"),t+o+n+a+i}me.prototype.format=function(){return Bt(this)};function un(r,e){return tt(r,!1,!0).resolve(e)}me.prototype.resolve=function(r){return this.resolveObject(tt(r,!1,!0)).format()};function cn(r,e){return r?tt(r,!1,!0).resolveObject(e):e}me.prototype.resolveObject=function(r){if(qt(r)){var e=new me;e.parse(r,!1,!0),r=e}for(var t=new me,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),a=0;a<s.length;a++){var u=s[a];u!=="protocol"&&(t[u]=r[u])}return Me[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}var l;if(r.protocol&&r.protocol!==t.protocol){if(!Me[r.protocol]){for(var c=Object.keys(r),d=0;d<c.length;d++){var h=c[d];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!jt[r.protocol]){for(l=(r.pathname||"").split("/");l.length&&!(r.host=l.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),l[0]!==""&&l.unshift(""),l.length<2&&l.unshift(""),t.pathname=l.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var f=t.pathname||"",m=t.search||"";t.path=f+m}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var y=t.pathname&&t.pathname.charAt(0)==="/",_=r.host||r.pathname&&r.pathname.charAt(0)==="/",w=_||y||t.host&&r.pathname,v=w,p=t.pathname&&t.pathname.split("/")||[],S=t.protocol&&!Me[t.protocol];l=r.pathname&&r.pathname.split("/")||[],S&&(t.hostname="",t.port=null,t.host&&(p[0]===""?p[0]=t.host:p.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(l[0]===""?l[0]=r.host:l.unshift(r.host)),r.host=null),w=w&&(l[0]===""||p[0]===""));var N;if(_)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,p=l;else if(l.length)p||(p=[]),p.pop(),p=p.concat(l),t.search=r.search,t.query=r.query;else if(!Fo(r.search))return S&&(t.hostname=t.host=p.shift(),N=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,N&&(t.auth=N.shift(),t.host=t.hostname=N.shift())),t.search=r.search,t.query=r.query,(!ot(t.pathname)||!ot(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!p.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var x=p.slice(-1)[0],F=(t.host||r.host||p.length>1)&&(x==="."||x==="..")||x==="",b=0,O=p.length;O>=0;O--)x=p[O],x==="."?p.splice(O,1):x===".."?(p.splice(O,1),b++):b&&(p.splice(O,1),b--);if(!w&&!v)for(;b--;b)p.unshift("..");w&&p[0]!==""&&(!p[0]||p[0].charAt(0)!=="/")&&p.unshift(""),F&&p.join("/").substr(-1)!=="/"&&p.push("");var W=p[0]===""||p[0]&&p[0].charAt(0)==="/";return S&&(t.hostname=t.host=W?"":p.length?p.shift():"",N=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,N&&(t.auth=N.shift(),t.host=t.hostname=N.shift())),w=w||t.host&&p.length,w&&!W&&p.unshift(""),p.length?t.pathname=p.join("/"):(t.pathname=null,t.path=null),(!ot(t.pathname)||!ot(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};me.prototype.parseHost=function(){return fn(this)};function fn(r){var e=r.host,t=Ro.exec(e);t&&(t=t[0],t!==":"&&(r.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(r.hostname=e)}var To=Object.freeze({__proto__:null,parse:tt,resolve:un,resolveObject:cn,format:ln,default:Oo,Url:me}),Ut=uo(To),H={},dn=Ut,It=H.ValidationError=function(e,t,n,i,o,s){if(Array.isArray(i)?(this.path=i,this.property=i.reduce(function(u,l){return u+hn(l)},"instance")):i!==void 0&&(this.property=i),e&&(this.message=e),n){var a=n.$id||n.id;this.schema=a||n}t!==void 0&&(this.instance=t),this.name=o,this.argument=s,this.stack=this.toString()};It.prototype.toString=function(){return this.property+" "+this.message};var wt=H.ValidatorResult=function(e,t,n,i){this.instance=e,this.schema=t,this.options=n,this.path=i.path,this.propertyPath=i.propertyPath,this.errors=[],this.throwError=n&&n.throwError,this.throwFirst=n&&n.throwFirst,this.throwAll=n&&n.throwAll,this.disableFormat=n&&n.disableFormat===!0};wt.prototype.addError=function(e){var t;if(typeof e=="string")t=new It(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new It(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new je(this);if(this.throwError)throw t;return t};wt.prototype.importErrors=function(e){typeof e=="string"||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)};function Mo(r,e){return e+": "+r.toString()+`
`}wt.prototype.toString=function(e){return this.errors.map(Mo).join("")};Object.defineProperty(wt.prototype,"valid",{get:function(){return!this.errors.length}});H.ValidatorResultError=je;function je(r){Error.captureStackTrace&&Error.captureStackTrace(this,je),this.instance=r.instance,this.schema=r.schema,this.options=r.options,this.errors=r.errors}je.prototype=new Error;je.prototype.constructor=je;je.prototype.name="Validation Error";var xr=H.SchemaError=function r(e,t){this.message=e,this.schema=t,Error.call(this,e),Error.captureStackTrace(this,r)};xr.prototype=Object.create(Error.prototype,{constructor:{value:xr,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var Ct=H.SchemaContext=function(e,t,n,i,o){this.schema=e,this.options=t,Array.isArray(n)?(this.path=n,this.propertyPath=n.reduce(function(s,a){return s+hn(a)},"instance")):this.propertyPath=n,this.base=i,this.schemas=o};Ct.prototype.resolve=function(e){return dn.resolve(this.base,e)};Ct.prototype.makeChild=function(e,t){var n=t===void 0?this.path:this.path.concat([t]),i=e.$id||e.id,o=dn.resolve(this.base,i||""),s=new Ct(e,this.options,n,o,Object.create(this.schemas));return i&&!s.schemas[o]&&(s.schemas[o]=e),s};var pe=H.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(r){return typeof r=="string"&&parseFloat(r)===parseInt(r,10)&&!isNaN(r)},regex:function(r){var e=!0;try{new RegExp(r)}catch{e=!1}return e},style:/\s*(.+?):\s*([^;]+);?/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};pe.regexp=pe.regex;pe.pattern=pe.regex;pe.ipv4=pe["ip-address"];H.isFormat=function(e,t,n){if(typeof e=="string"&&pe[t]!==void 0){if(pe[t]instanceof RegExp)return pe[t].test(e);if(typeof pe[t]=="function")return pe[t](e)}else if(n&&n.customFormats&&typeof n.customFormats[t]=="function")return n.customFormats[t](e);return!0};var hn=H.makeSuffix=function(e){return e=e.toString(),!e.match(/[.\s\[\]]/)&&!e.match(/^[\d]/)?"."+e:e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]"};H.deepCompareStrict=function r(e,t){if(typeof e!=typeof t)return!1;if(Array.isArray(e))return!Array.isArray(t)||e.length!==t.length?!1:e.every(function(o,s){return r(e[s],t[s])});if(typeof e=="object"){if(!e||!t)return e===t;var n=Object.keys(e),i=Object.keys(t);return n.length!==i.length?!1:n.every(function(o){return r(e[o],t[o])})}return e===t};function Vo(r,e,t,n){typeof t=="object"?e[n]=Yt(r[n],t):r.indexOf(t)===-1&&e.push(t)}function Wo(r,e,t){e[t]=r[t]}function Lo(r,e,t,n){typeof e[n]!="object"||!e[n]?t[n]=e[n]:r[n]?t[n]=Yt(r[n],e[n]):t[n]=e[n]}function Yt(r,e){var t=Array.isArray(e),n=t&&[]||{};return t?(r=r||[],n=n.concat(r),e.forEach(Vo.bind(null,r,n))):(r&&typeof r=="object"&&Object.keys(r).forEach(Wo.bind(null,r,n)),Object.keys(e).forEach(Lo.bind(null,r,e,n))),n}H.deepMerge=Yt;H.objectGetPath=function(e,t){for(var n=t.split("/").slice(1),i;typeof(i=n.shift())=="string";){var o=decodeURIComponent(i.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in e))return;e=e[o]}return e};function Zo(r){return"/"+encodeURIComponent(r).replace(/~/g,"%7E")}H.encodePath=function(e){return e.map(Zo).join("")};H.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;typeof e!="number"&&(e=Number(e));var n=e.toString().split("e");if(n.length===2){if(n[1][0]!=="-")return t;t=Number(n[1].slice(1))}var i=n[0].split(".");return i.length===2&&(t+=i[1].length),t};H.isSchema=function(e){return typeof e=="object"&&e||typeof e=="boolean"};var fe=H,I=fe.ValidatorResult,Oe=fe.SchemaError,Jt={};Jt.ignoreProperties={id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0};var C=Jt.validators={};C.type=function(e,t,n,i){if(e===void 0)return null;var o=new I(e,t,n,i),s=Array.isArray(t.type)?t.type:[t.type];if(!s.some(this.testType.bind(this,e,t,n,i))){var a=s.map(function(u){if(u){var l=u.$id||u.id;return l?"<"+l+">":u+""}});o.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return o};function Xt(r,e,t,n,i){var o=e.throwError,s=e.throwAll;e.throwError=!1,e.throwAll=!1;var a=this.validateSchema(r,i,e,t);return e.throwError=o,e.throwAll=s,!a.valid&&n instanceof Function&&n(a),a.valid}C.anyOf=function(e,t,n,i){if(e===void 0)return null;var o=new I(e,t,n,i),s=new I(e,t,n,i);if(!Array.isArray(t.anyOf))throw new Oe("anyOf must be an array");if(!t.anyOf.some(Xt.bind(this,e,n,i,function(u){s.importErrors(u)}))){var a=t.anyOf.map(function(u,l){var c=u.$id||u.id;return c?"<"+c+">":u.title&&JSON.stringify(u.title)||u.$ref&&"<"+u.$ref+">"||"[subschema "+l+"]"});n.nestedErrors&&o.importErrors(s),o.addError({name:"anyOf",argument:a,message:"is not any of "+a.join(",")})}return o};C.allOf=function(e,t,n,i){if(e===void 0)return null;if(!Array.isArray(t.allOf))throw new Oe("allOf must be an array");var o=new I(e,t,n,i),s=this;return t.allOf.forEach(function(a,u){var l=s.validateSchema(e,a,n,i);if(!l.valid){var c=a.$id||a.id,d=c||a.title&&JSON.stringify(a.title)||a.$ref&&"<"+a.$ref+">"||"[subschema "+u+"]";o.addError({name:"allOf",argument:{id:d,length:l.errors.length,valid:l},message:"does not match allOf schema "+d+" with "+l.errors.length+" error[s]:"}),o.importErrors(l)}}),o};C.oneOf=function(e,t,n,i){if(e===void 0)return null;if(!Array.isArray(t.oneOf))throw new Oe("oneOf must be an array");var o=new I(e,t,n,i),s=new I(e,t,n,i),a=t.oneOf.filter(Xt.bind(this,e,n,i,function(l){s.importErrors(l)})).length,u=t.oneOf.map(function(l,c){var d=l.$id||l.id;return d||l.title&&JSON.stringify(l.title)||l.$ref&&"<"+l.$ref+">"||"[subschema "+c+"]"});return a!==1&&(n.nestedErrors&&o.importErrors(s),o.addError({name:"oneOf",argument:u,message:"is not exactly one from "+u.join(",")})),o};C.if=function(e,t,n,i){if(e===void 0)return null;if(!fe.isSchema(t.if))throw new Error('Expected "if" keyword to be a schema');var o=Xt.call(this,e,n,i,null,t.if),s=new I(e,t,n,i),a;if(o){if(t.then===void 0)return;if(!fe.isSchema(t.then))throw new Error('Expected "then" keyword to be a schema');a=this.validateSchema(e,t.then,n,i.makeChild(t.then)),s.importErrors(a)}else{if(t.else===void 0)return;if(!fe.isSchema(t.else))throw new Error('Expected "else" keyword to be a schema');a=this.validateSchema(e,t.else,n,i.makeChild(t.else)),s.importErrors(a)}return s};function Kt(r,e){if(Object.hasOwnProperty.call(r,e))return r[e];if(e in r){for(;r=Object.getPrototypeOf(r);)if(Object.propertyIsEnumerable.call(r,e))return r[e]}}C.propertyNames=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=t.propertyNames!==void 0?t.propertyNames:{};if(!fe.isSchema(s))throw new Oe('Expected "propertyNames" to be a schema (object or boolean)');for(var a in e)if(Kt(e,a)!==void 0){var u=this.validateSchema(a,s,n,i.makeChild(s));o.importErrors(u)}return o}};C.properties=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=t.properties||{};for(var a in s){var u=s[a];if(u!==void 0){if(u===null)throw new Oe('Unexpected null, expected schema in "properties"');typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,u,n,i);var l=Kt(e,a),c=this.validateSchema(l,u,n,i.makeChild(u,a));c.instance!==o.instance[a]&&(o.instance[a]=c.instance),o.importErrors(c)}}return o}};function pn(r,e,t,n,i,o){if(this.types.object(r)&&!(e.properties&&e.properties[i]!==void 0))if(e.additionalProperties===!1)o.addError({name:"additionalProperties",argument:i,message:"is not allowed to have the additional property "+JSON.stringify(i)});else{var s=e.additionalProperties||{};typeof t.preValidateProperty=="function"&&t.preValidateProperty(r,i,s,t,n);var a=this.validateSchema(r[i],s,t,n.makeChild(s,i));a.instance!==o.instance[i]&&(o.instance[i]=a.instance),o.importErrors(a)}}C.patternProperties=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=t.patternProperties||{};for(var a in e){var u=!0;for(var l in s){var c=s[l];if(c!==void 0){if(c===null)throw new Oe('Unexpected null, expected schema in "patternProperties"');try{var d=new RegExp(l,"u")}catch{d=new RegExp(l)}if(d.test(a)){u=!1,typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,c,n,i);var h=this.validateSchema(e[a],c,n,i.makeChild(c,a));h.instance!==o.instance[a]&&(o.instance[a]=h.instance),o.importErrors(h)}}}u&&pn.call(this,e,t,n,i,a,o)}return o}};C.additionalProperties=function(e,t,n,i){if(this.types.object(e)){if(t.patternProperties)return null;var o=new I(e,t,n,i);for(var s in e)pn.call(this,e,t,n,i,s,o);return o}};C.minProperties=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=Object.keys(e);return s.length>=t.minProperties||o.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),o}};C.maxProperties=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=Object.keys(e);return s.length<=t.maxProperties||o.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),o}};C.items=function(e,t,n,i){var o=this;if(this.types.array(e)&&t.items){var s=new I(e,t,n,i);return e.every(function(a,u){var l=Array.isArray(t.items)?t.items[u]||t.additionalItems:t.items;if(l===void 0)return!0;if(l===!1)return s.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=o.validateSchema(a,l,n,i.makeChild(l,u));return c.instance!==s.instance[u]&&(s.instance[u]=c.instance),s.importErrors(c),!0}),s}};C.minimum=function(e,t,n,i){if(this.types.number(e)){var o=new I(e,t,n,i);return t.exclusiveMinimum&&t.exclusiveMinimum===!0?e>t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),o}};C.maximum=function(e,t,n,i){if(this.types.number(e)){var o=new I(e,t,n,i);return t.exclusiveMaximum&&t.exclusiveMaximum===!0?e<t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),o}};C.exclusiveMinimum=function(e,t,n,i){if(typeof t.exclusiveMaximum!="boolean"&&this.types.number(e)){var o=new I(e,t,n,i),s=e>t.exclusiveMinimum;return s||o.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),o}};C.exclusiveMaximum=function(e,t,n,i){if(typeof t.exclusiveMaximum!="boolean"&&this.types.number(e)){var o=new I(e,t,n,i),s=e<t.exclusiveMaximum;return s||o.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),o}};var mn=function(e,t,n,i,o,s){if(this.types.number(e)){var a=t[o];if(a==0)throw new Oe(o+" cannot be zero");var u=new I(e,t,n,i),l=fe.getDecimalPlaces(e),c=fe.getDecimalPlaces(a),d=Math.max(l,c),h=Math.pow(10,d);return Math.round(e*h)%Math.round(a*h)!==0&&u.addError({name:o,argument:a,message:s+JSON.stringify(a)}),u}};C.multipleOf=function(e,t,n,i){return mn.call(this,e,t,n,i,"multipleOf","is not a multiple of (divisible by) ")};C.divisibleBy=function(e,t,n,i){return mn.call(this,e,t,n,i,"divisibleBy","is not divisible by (multiple of) ")};C.required=function(e,t,n,i){var o=new I(e,t,n,i);return e===void 0&&t.required===!0?o.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach(function(s){Kt(e,s)===void 0&&o.addError({name:"required",argument:s,message:"requires property "+JSON.stringify(s)})}),o};C.pattern=function(e,t,n,i){if(this.types.string(e)){var o=new I(e,t,n,i),s=t.pattern;try{var a=new RegExp(s,"u")}catch{a=new RegExp(s)}return e.match(a)||o.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),o}};C.format=function(e,t,n,i){if(e!==void 0){var o=new I(e,t,n,i);return!o.disableFormat&&!fe.isFormat(e,t.format,this)&&o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o}};C.minLength=function(e,t,n,i){if(this.types.string(e)){var o=new I(e,t,n,i),s=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(s?s.length:0);return a>=t.minLength||o.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),o}};C.maxLength=function(e,t,n,i){if(this.types.string(e)){var o=new I(e,t,n,i),s=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(s?s.length:0);return a<=t.maxLength||o.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),o}};C.minItems=function(e,t,n,i){if(this.types.array(e)){var o=new I(e,t,n,i);return e.length>=t.minItems||o.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),o}};C.maxItems=function(e,t,n,i){if(this.types.array(e)){var o=new I(e,t,n,i);return e.length<=t.maxItems||o.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),o}};function qo(r,e,t){var n,i=t.length;for(n=e+1,i;n<i;n++)if(fe.deepCompareStrict(r,t[n]))return!1;return!0}C.uniqueItems=function(e,t,n,i){if(t.uniqueItems===!0&&this.types.array(e)){var o=new I(e,t,n,i);return e.every(qo)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o}};C.dependencies=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i);for(var s in t.dependencies)if(e[s]!==void 0){var a=t.dependencies[s],u=i.makeChild(a,s);if(typeof a=="string"&&(a=[a]),Array.isArray(a))a.forEach(function(c){e[c]===void 0&&o.addError({name:"dependencies",argument:u.propertyPath,message:"property "+c+" not found, required by "+u.propertyPath})});else{var l=this.validateSchema(e,a,n,u);o.instance!==l.instance&&(o.instance=l.instance),l&&l.errors.length&&(o.addError({name:"dependencies",argument:u.propertyPath,message:"does not meet dependency required by "+u.propertyPath}),o.importErrors(l))}}return o}};C.enum=function(e,t,n,i){if(e===void 0)return null;if(!Array.isArray(t.enum))throw new Oe("enum expects an array",t);var o=new I(e,t,n,i);return t.enum.some(fe.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),o};C.const=function(e,t,n,i){if(e===void 0)return null;var o=new I(e,t,n,i);return fe.deepCompareStrict(t.const,e)||o.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),o};C.not=C.disallow=function(e,t,n,i){var o=this;if(e===void 0)return null;var s=new I(e,t,n,i),a=t.not||t.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach(function(u){if(o.testType(e,t,n,i,u)){var l=u&&(u.$id||u.id),c=l||u;s.addError({name:"not",argument:c,message:"is of prohibited type "+c})}}),s):null};var Bo=Jt,Gt={},Sr=Ut,Uo=H;Gt.SchemaScanResult=vn;function vn(r,e){this.id=r,this.ref=e}Gt.scan=function(e,t){function n(u,l){if(!(!l||typeof l!="object")){if(l.$ref){var c=Sr.resolve(u,l.$ref);a[c]=a[c]?a[c]+1:0;return}var d=l.$id||l.id,h=d?Sr.resolve(u,d):u;if(h){if(h.indexOf("#")<0&&(h+="#"),s[h]){if(!Uo.deepCompareStrict(s[h],l))throw new Error("Schema <"+h+"> already exists with different definition");return s[h]}s[h]=l,h[h.length-1]=="#"&&(s[h.substring(0,h.length-1)]=l)}i(h+"/items",Array.isArray(l.items)?l.items:[l.items]),i(h+"/extends",Array.isArray(l.extends)?l.extends:[l.extends]),n(h+"/additionalItems",l.additionalItems),o(h+"/properties",l.properties),n(h+"/additionalProperties",l.additionalProperties),o(h+"/definitions",l.definitions),o(h+"/patternProperties",l.patternProperties),o(h+"/dependencies",l.dependencies),i(h+"/disallow",l.disallow),i(h+"/allOf",l.allOf),i(h+"/anyOf",l.anyOf),i(h+"/oneOf",l.oneOf),n(h+"/not",l.not)}}function i(u,l){if(Array.isArray(l))for(var c=0;c<l.length;c++)n(u+"/"+c,l[c])}function o(u,l){if(!(!l||typeof l!="object"))for(var c in l)n(u+"/"+c,l[c])}var s={},a={};return n(e,t),new vn(s,a)};var gn=Ut,yn=Bo,Ie=H,wn=Gt.scan,bn=Ie.ValidatorResult,Yo=Ie.ValidatorResultError,Qe=Ie.SchemaError,_n=Ie.SchemaContext,En="/",X=function r(){this.customFormats=Object.create(r.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(ye),this.attributes=Object.create(yn.validators)};X.prototype.customFormats={};X.prototype.schemas=null;X.prototype.types=null;X.prototype.attributes=null;X.prototype.unresolvedRefs=null;X.prototype.addSchema=function(e,t){var n=this;if(!e)return null;var i=wn(t||En,e),o=t||e.$id||e.id;for(var s in i.id)this.schemas[s]=i.id[s];for(var s in i.ref)this.unresolvedRefs.push(s);return this.unresolvedRefs=this.unresolvedRefs.filter(function(a){return typeof n.schemas[a]>"u"}),this.schemas[o]};X.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addSubSchema(e,t[n])};X.prototype.addSubSchemaObject=function(e,t){if(!(!t||typeof t!="object"))for(var n in t)this.addSubSchema(e,t[n])};X.prototype.setSchemas=function(e){this.schemas=e};X.prototype.getSchema=function(e){return this.schemas[e]};X.prototype.validate=function(e,t,n,i){if(typeof t!="boolean"&&typeof t!="object"||t===null)throw new Qe("Expected `schema` to be an object or boolean");n||(n={});var o=t.$id||t.id,s=gn.resolve(n.base||En,o||"");if(!i){i=new _n(t,n,[],s,Object.create(this.schemas)),i.schemas[s]||(i.schemas[s]=t);var a=wn(s,t);for(var u in a.id){var l=a.id[u];i.schemas[u]=l}}if(n.required&&e===void 0){var c=new bn(e,t,n,i);return c.addError("is required, but is undefined"),c}var c=this.validateSchema(e,t,n,i);if(c){if(n.throwAll&&c.errors.length)throw new Yo(c)}else throw new Error("Result undefined");return c};function An(r){var e=typeof r=="string"?r:r.$ref;return typeof e=="string"?e:!1}X.prototype.validateSchema=function(e,t,n,i){var o=new bn(e,t,n,i);if(typeof t=="boolean")t===!0?t={}:t===!1&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(Array.isArray(t.extends)){var s={schema:t,ctx:i};t.extends.forEach(this.schemaTraverser.bind(this,s)),t=s.schema,s.schema=null,s.ctx=null,s=null}else t=Ie.deepMerge(t,this.superResolve(t.extends,i));var a=An(t);if(a){var u=this.resolve(t,a,i),l=new _n(u.subschema,n,i.path,u.switchSchema,i.schemas);return this.validateSchema(e,u.subschema,n,l)}var c=n&&n.skipAttributes||[];for(var d in t)if(!yn.ignoreProperties[d]&&c.indexOf(d)<0){var h=null,f=this.attributes[d];if(f)h=f.call(this,e,t,n,i);else if(n.allowUnknownAttributes===!1)throw new Qe("Unsupported attribute: "+d,t);h&&o.importErrors(h)}if(typeof n.rewrite=="function"){var m=n.rewrite.call(this,e,t,n,i);o.instance=m}return o};X.prototype.schemaTraverser=function(e,t){e.schema=Ie.deepMerge(e.schema,this.superResolve(t,e.ctx))};X.prototype.superResolve=function(e,t){var n=An(e);return n?this.resolve(e,n,t).subschema:e};X.prototype.resolve=function(e,t,n){if(t=n.resolve(t),n.schemas[t])return{subschema:n.schemas[t],switchSchema:t};var i=gn.parse(t),o=i&&i.hash,s=o&&o.length&&t.substr(0,t.length-o.length);if(!s||!n.schemas[s])throw new Qe("no such schema <"+t+">",e);var a=Ie.objectGetPath(n.schemas[s],o.substr(1));if(a===void 0)throw new Qe("no such schema "+o+" located in <"+s+">",e);return{subschema:a,switchSchema:t}};X.prototype.testType=function(e,t,n,i,o){if(o!==void 0){if(o===null)throw new Qe('Unexpected null in "type" keyword');if(typeof this.types[o]=="function")return this.types[o].call(this,e);if(o&&typeof o=="object"){var s=this.validateSchema(e,o,n,i);return s===void 0||!(s&&s.errors.length)}return!0}};var ye=X.prototype.types={};ye.string=function(e){return typeof e=="string"};ye.number=function(e){return typeof e=="number"&&isFinite(e)};ye.integer=function(e){return typeof e=="number"&&e%1===0};ye.boolean=function(e){return typeof e=="boolean"};ye.array=function(e){return Array.isArray(e)};ye.null=function(e){return e===null};ye.date=function(e){return e instanceof Date};ye.any=function(e){return!0};ye.object=function(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof Date)};var Jo=X,Xo=Jo,Ko=function(r,e,t){var n=new Xo;return n.validate(r,e,t)},St="^[a-zA-Z0-9_.-]*$",Go={type:"object",id:"/CreateFsPropsSchema",properties:{databaseName:{minLength:4,maxLength:50,type:"string",pattern:St},objectStoreName:{minLength:1,maxLength:20,type:"string",pattern:St},rootDirectoryName:{minLength:1,maxLength:20,type:"string",pattern:St},databaseVersion:{minimum:1,maximum:100,type:"integer"}},required:["databaseName","databaseVersion","objectStoreName","rootDirectoryName"]};function Ho(r){var e=Ko(r,Go),t=e.valid,n=e.errors;if(t)return t;var i=JSON.stringify(n);throw new Error(`Props passed to createFS function are invalid:
`+i)}function Qo(r,e){if(!Ve(r)||!Ve(e)||e==="")return!1;var t=e+"/";return r.startsWith(t)}function es(r,e){if(r==="")return e;var t=Qo(r,e);if(!t){var n=Qi(r);return""+e+(n?"":"/")+r}return r}function J(r,e){if(!Ve(e)||e==="")throw new Error("rootDirectoryName parameter was not provided");if(!Ve(r))throw new Error("fullPath parameter was not provided");if(r===e)return e;var t=es(r,e);if(!t||!Hi(t))throw new Error('"'+r+'" path is invalid.');return t}var ts=function(r){var e=r.result;return Boolean(e==null?void 0:e.createdAt)},rs=function(r){var e=r.getRecord,t=r.rootDirectoryName;return function(n){return T(void 0,void 0,void 0,function(){var i;return $(this,function(o){return i=J(n,t),[2,e(i,ts)]})})}},ns=function(r){var e=r.exists,t=r.deleteRecord,n=r.rootDirectoryName;return function(i){return T(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" file or directory does not exist.');return[2,t(o)]}})})}},is=function(r){var e=r.exists,t=r.isFile,n=r.isDirectory,i=r.fileDetails,o=r.directoryDetails,s=r.rootDirectoryName;return function(a){return T(void 0,void 0,void 0,function(){var u,l,c,d;return $(this,function(h){switch(h.label){case 0:return u=J(a,s),[4,e(u)];case 1:if(l=h.sent(),!l)throw new Error('"'+u+'" file or directory does not exist.');return[4,t(u)];case 2:return c=h.sent(),[4,n(u)];case 3:if(d=h.sent(),c&&d)throw new Error('"'+u+'" is a path of file and directory.');return c?[2,i(u)]:[2,o(u)]}})})}},De;(function(r){r.FILE="file",r.DIRECTORY="directory"})(De||(De={}));var os=function(r){var e=r.result;return Boolean((e==null?void 0:e.type)===De.FILE)},ss=function(r){var e=r.exists,t=r.getRecord,n=r.rootDirectoryName;return function(i){return T(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" file does not exist.');return[2,t(o,os)]}})})}},as=function(r){var e=r.isFile,t=r.exists,n=r.writeFile,i=r.isDirectory,o=r.fileDetails,s=r.rootDirectoryName;return function(a,u){return T(void 0,void 0,void 0,function(){var l,c,d,h,f,m,y;return $(this,function(_){switch(_.label){case 0:return l=J(a,s),c=J(u,s),[4,e(l)];case 1:if(d=_.sent(),!d)throw new Error('"'+l+'" source is not a file.');return h=We(c,s),[4,i(h)];case 2:if(f=_.sent(),!f)throw new Error('"'+h+'" destination directory does not exist.');return[4,t(c)];case 3:if(m=_.sent(),m)throw new Error('"'+c+'" is already taken.');return[4,o(l)];case 4:return y=_.sent(),[2,n(c,y.data)]}})})}},ls=function(r){var e=r.fileDetails;return function(t){return T(void 0,void 0,void 0,function(){var n;return $(this,function(i){switch(i.label){case 0:return[4,e(t)];case 1:return n=i.sent(),[2,n.data]}})})}},us=function(r){var e=r.isFile,t=r.exists,n=r.removeFile,i=r.isDirectory,o=r.updateFileDetails,s=r.rootDirectoryName;return function(a,u){return T(void 0,void 0,void 0,function(){var l,c,d,h,f,m,y,_;return $(this,function(w){switch(w.label){case 0:return l=J(a,s),c=J(u,s),[4,e(l)];case 1:if(d=w.sent(),!d)throw new Error('"'+l+'" source is not a file.');return h=We(c,s),[4,i(h)];case 2:if(f=w.sent(),!f)throw new Error('"'+h+'" destination directory does not exist.');return[4,t(c)];case 3:if(m=w.sent(),m)throw new Error('"'+c+'" is already taken.');return y=yt.basename(c),[4,o(l,{name:y,directory:h,fullPath:c})];case 4:return _=w.sent(),[4,n(l)];case 5:return w.sent(),[2,_]}})})}},cs=function(r){var e=r.putRecord,t=r.isDirectory,n=r.rootDirectoryName;return function(i,o){return T(void 0,void 0,void 0,function(){var s,a,u,l,c,d;return $(this,function(h){switch(h.label){case 0:if(s=J(i,n),s===n)throw new Error('Root directory: "'+s+'" cannot be a file.');return a=yt.basename(s),u=We(s,n),[4,t(u)];case 1:if(l=h.sent(),!l)throw new Error('"'+u+'" directory does not exist.');return[4,He(function(){return t(s)},function(){return!1})];case 2:if(c=h.sent(),c)throw new Error('"'+s+'" you cannot create a file with the same name as the directory.');return d={data:o,directory:u,name:a,type:De.FILE,createdAt:Date.now(),fullPath:s},[2,e(d)]}})})}},fs=function(r){var e=r.isFile,t=r.exists,n=r.removeFile,i=r.updateFileDetails,o=r.rootDirectoryName;return function(s,a){return T(void 0,void 0,void 0,function(){var u,l,c,d,h,f;return $(this,function(m){switch(m.label){case 0:return u=J(s,o),[4,e(u)];case 1:if(l=m.sent(),!l)throw new Error('"'+u+'" is not a file.');return c=We(u,o),d=c+"/"+a,[4,t(d)];case 2:if(h=m.sent(),h)throw new Error('"'+d+'" is already taken.');return[4,i(u,{name:a,fullPath:d})];case 3:return f=m.sent(),[4,n(u)];case 4:return m.sent(),[2,f]}})})}},ds=function(r){var e=r.isFile,t=r.deleteRecord,n=r.rootDirectoryName;return function(i){return T(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" is not a file.');return[2,t(o)]}})})}},hs=function(r){var e=r.result;return Boolean((e==null?void 0:e.type)===De.DIRECTORY)},ps=function(r){var e=r.exists,t=r.getRecord,n=r.rootDirectoryName;return function(i){return T(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" directory does not exist.');return[2,t(o,hs)]}})})}},ms=function(r){var e=r.result;return e},vs=function(r){var e=r.isFile,t=r.getRecord,n=r.rootDirectoryName;return function(i){return T(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" is not a file.');return[2,t(o,ms)]}})})}},gs=function(r){var e=r.openCursor,t=r.isDirectory,n=r.rootDirectoryName;return function(i){return T(void 0,void 0,void 0,function(){var o,s,a,u,l;return $(this,function(c){switch(c.label){case 0:return o=J(i,n),[4,t(i)];case 1:if(s=c.sent(),!s)throw new Error('"'+o+'" is not a directory.');return a=[],u=[],l=function(d,h){var f=d.result;if(f){var m=f.value;if(m.type===De.FILE){m.data;var y=Ki(m,["data"]);a.push(y)}else m.type===De.DIRECTORY&&!m.isRoot&&u.push(m);f.continue()}else{var _=a.length,w=u.length,v=_===0&&w===0;h({isEmpty:v,filesCount:_,directoriesCount:w,files:a,directories:u})}},[2,e(o,l)]}})})}},ys=function(r){var e=r.isFile,t=r.putRecord,n=r.isDirectory,i=r.rootDirectoryName;return function(o){return T(void 0,void 0,void 0,function(){var s,a,u,l,c,d;return $(this,function(h){switch(h.label){case 0:if(s=J(o,i),s===i)throw new Error('Root directory: "'+s+'" already exist.');return a=yt.basename(s),u=We(s,i),[4,n(u)];case 1:if(l=h.sent(),!l)throw new Error('"'+u+'" is not a directory.');return[4,He(function(){return e(s)},function(){return!1})];case 2:if(c=h.sent(),c)throw new Error('"'+s+'" you cannot create a directory with the same name as the file.');return d={directory:u,isRoot:!1,name:a,createdAt:Date.now(),type:De.DIRECTORY,fullPath:s},[2,t(d)]}})})}},ws=function(r){var e=r.remove,t=r.isDirectory,n=r.readDirectory,i=r.rootDirectoryName;function o(s){return T(this,void 0,void 0,function(){var a,u,l,c,d,h,f,m,y,_,w,v,p;return $(this,function(S){switch(S.label){case 0:return a=J(s,i),[4,n(a)];case 1:if(u=S.sent(),l=u.files,c=u.filesCount,d=u.directories,h=u.directoriesCount,!(c>0))return[3,5];f=0,m=l,S.label=2;case 2:return f<m.length?(y=m[f],[4,e(y.fullPath)]):[3,5];case 3:S.sent(),S.label=4;case 4:return f++,[3,2];case 5:return h?[3,7]:[4,e(s)];case 6:return S.sent(),[2];case 7:_=function(N){return $(this,function(x){switch(x.label){case 0:return N.isRoot?[3,2]:[4,o(N.fullPath)];case 1:x.sent(),x.label=2;case 2:return[4,He(function(){return e(N.fullPath)})];case 3:return x.sent(),[2]}})},w=0,v=d,S.label=8;case 8:return w<v.length?(p=v[w],[5,_(p)]):[3,11];case 9:S.sent(),S.label=10;case 10:return w++,[3,8];case 11:return[2]}})})}return function(a){return T(this,void 0,void 0,function(){var u;return $(this,function(l){switch(l.label){case 0:return[4,t(a)];case 1:if(u=l.sent(),!u)throw new Error('"'+a+'" is not a directory.');return[4,o(a)];case 2:return l.sent(),a===i?[3,4]:[4,He(function(){return e(a)})];case 3:l.sent(),l.label=4;case 4:return[2]}})})}},bs=function(r){var e=r.result;return e},_s=function(r){var e=r.getRecord,t=r.isDirectory,n=r.rootDirectoryName;return function(i){return T(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,t(i)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" is not a directory.');return[2,e(o,bs)]}})})}},Es=function(r){var e=r.putRecord,t=r.isDirectory,n=r.fileDetails,i=r.rootDirectoryName;return function(o,s){return T(void 0,void 0,void 0,function(){var a,u,l,c,d,h;return $(this,function(f){switch(f.label){case 0:if(a=J(o,i),a===i)throw new Error('Root directory: "'+a+'" cannot be updated.');return u=We(a,i),[4,t(u)];case 1:if(l=f.sent(),!l)throw new Error('"'+u+'" is not a directory.');return[4,He(function(){return t(a)},function(){return!1})];case 2:if(c=f.sent(),c)throw new Error('"'+a+'" you cannot update a directory.');return[4,n(a)];case 3:return d=f.sent(),h=ht(ht({},d),s),[2,e(h)]}})})}},As=function(r){var e=r.putRecord,t=r.rootDirectoryName;return function(){return T(void 0,void 0,void 0,function(){var n;return $(this,function(i){return n={isRoot:!0,createdAt:Date.now(),name:t,type:De.DIRECTORY,fullPath:t,directory:t},[2,e(n)]})})}},Ds=function(r){var e=r.databaseName,t=r.databaseVersion,n=r.objectStoreName,i=js({databaseName:e,databaseVersion:t,objectStoreName:n}),o=Os({initializeObjectStore:i}),s=ks({initializeObjectStore:i}),a=Ps({initializeObjectStore:i}),u=Rs({initializeObjectStore:i});return{getRecord:o,putRecord:s,openCursor:a,deleteRecord:u}},Fs="fullPath",zt="directory";function kr(r){if(!r)return null;var e=r;return e.result}function Or(r,e){e||r(new Error("Something went wrong and the database transaction was not opened."))}var xs=function(r){var e=r.databaseName,t=r.databaseVersion,n=r.objectStoreName;return new Promise(function(i,o){var s=Ns(e,t);s.onerror=o,s.onsuccess=function(a){var u=a.target,l=kr(u);Or(o,l),i(l)},s.onupgradeneeded=function(a){var u=a.target,l=kr(u);Or(o,l);var c=l.createObjectStore(n,{keyPath:Fs});c.createIndex(zt,zt,{unique:!1})}})},Ss=function(){return Boolean(indexedDB)},ks=function(r){var e=r.initializeObjectStore;return function(t){return T(void 0,void 0,void 0,function(){var n;return $(this,function(i){switch(i.label){case 0:return[4,e("readwrite")];case 1:return n=i.sent(),[2,new Promise(function(o,s){var a=n.put(t);a.onerror=s,a.onsuccess=function(){return o(t)}})]}})})}},Os=function(r){var e=r.initializeObjectStore;return function(t,n){return T(void 0,void 0,void 0,function(){var i;return $(this,function(o){switch(o.label){case 0:return[4,e("readonly")];case 1:return i=o.sent(),[2,new Promise(function(s,a){var u=i.get(t);u.onerror=a,u.onsuccess=function(l){return s(n(l==null?void 0:l.target))}})]}})})}},Ps=function(r){var e=r.initializeObjectStore;return function(t,n){return T(void 0,void 0,void 0,function(){var i,o,s,a;return $(this,function(u){switch(u.label){case 0:return[4,e("readonly")];case 1:return i=u.sent(),o=i.index(zt),s=IDBKeyRange.only(t),a=o.openCursor(s),[2,new Promise(function(l,c){a.onerror=c,a.onsuccess=function(d){var h=d.target;return n(h,l)}})]}})})}},Rs=function(r){var e=r.initializeObjectStore;return function(t){return T(void 0,void 0,void 0,function(){var n;return $(this,function(i){switch(i.label){case 0:return[4,e("readwrite")];case 1:return n=i.sent(),[2,new Promise(function(o,s){var a=n.delete(t);a.onerror=s,a.onsuccess=function(){return o()}})]}})})}},Ns=function(r,e){return indexedDB.open(r,e)},js=function(r){var e=r.databaseName,t=r.databaseVersion,n=r.objectStoreName;return function(i){return T(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return[4,xs({databaseName:e,databaseVersion:t,objectStoreName:n})];case 1:return o=a.sent(),s=o.transaction(n,i),[2,s.objectStore(n)]}})})}},Be={databaseVersion:1,objectStoreName:"files",rootDirectoryName:"root",databaseName:"indexeddb-fs"};function Dn(r){var e=this,t=r===void 0?Be:r,n=t.databaseName,i=n===void 0?Be.databaseName:n,o=t.databaseVersion,s=o===void 0?Be.databaseVersion:o,a=t.objectStoreName,u=a===void 0?Be.objectStoreName:a,l=t.rootDirectoryName,c=l===void 0?Be.rootDirectoryName:l;function d(){h(),f()}function h(){if(!Ss())throw new Error("Your browser does not support indexedDB.")}function f(){Ho({databaseName:i,objectStoreName:u,databaseVersion:s,rootDirectoryName:c})}var m=Ds({databaseName:i,databaseVersion:s,objectStoreName:u}),y=m.getRecord,_=m.putRecord,w=m.openCursor,v=m.deleteRecord,p=rs({getRecord:y,rootDirectoryName:c}),S=ss({exists:p,getRecord:y,rootDirectoryName:c}),N=ns({exists:p,deleteRecord:v,rootDirectoryName:c}),x=vs({isFile:S,getRecord:y,rootDirectoryName:c}),F=ls({fileDetails:x}),b=ds({isFile:S,deleteRecord:v,rootDirectoryName:c}),O=ps({exists:p,getRecord:y,rootDirectoryName:c}),W=cs({putRecord:_,isDirectory:O,rootDirectoryName:c}),K=as({exists:p,isFile:S,writeFile:W,fileDetails:x,isDirectory:O,rootDirectoryName:c}),G=gs({openCursor:w,isDirectory:O,rootDirectoryName:c}),we=ys({isFile:S,putRecord:_,isDirectory:O,rootDirectoryName:c}),ve=ws({remove:N,isDirectory:O,readDirectory:G,rootDirectoryName:c}),Fe=_s({getRecord:y,isDirectory:O,rootDirectoryName:c}),de=is({isFile:S,exists:p,isDirectory:O,fileDetails:x,directoryDetails:Fe,rootDirectoryName:c}),oe=Es({putRecord:_,fileDetails:x,isDirectory:O,rootDirectoryName:c}),Le=us({exists:p,isFile:S,removeFile:b,isDirectory:O,updateFileDetails:oe,rootDirectoryName:c}),bt=fs({exists:p,isFile:S,removeFile:b,updateFileDetails:oe,rootDirectoryName:c}),_t=As({putRecord:_,rootDirectoryName:c});function Et(){return T(this,void 0,void 0,function(){var R;return $(this,function(Z){switch(Z.label){case 0:return[4,p(c)];case 1:return R=Z.sent(),R?[3,3]:[4,_t()];case 2:Z.sent(),Z.label=3;case 3:return[2]}})})}var U=function(R){return function(){for(var Z=[],xe=0;xe<arguments.length;xe++)Z[xe]=arguments[xe];return T(e,void 0,void 0,function(){return $(this,function(be){switch(be.label){case 0:return[4,Et()];case 1:return be.sent(),[2,R.apply(void 0,Z)]}})})}};return d(),{databaseName:i,databaseVersion:s,objectStoreName:u,rootDirectoryName:c,exists:U(p),isFile:U(S),remove:U(N),details:U(de),copyFile:U(K),readFile:U(F),moveFile:U(Le),writeFile:U(W),renameFile:U(bt),removeFile:U(b),fileDetails:U(x),isDirectory:U(O),readDirectory:U(G),createDirectory:U(we),removeDirectory:U(ve),directoryDetails:U(Fe)}}Dn();const re=Dn({databaseVersion:1,objectStoreName:"files",rootDirectoryName:"root",databaseName:"filesystem"}),Q=r=>{let e=["root",...Wt(r)].join("/");return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e},Pr=r=>{const e=r.split("/").reverse();e.pop();let t="/"+e.reverse().join("/");return t.endsWith("/")||(t=t+"/"),t};class Is{constructor(){E(this,"exists",async e=>await re.exists(Q(e)));E(this,"copy",async(e,t)=>{await re.copyFile(Q(e),Q(t))});E(this,"createFile",async e=>{await re.writeFile(Q(e),"")});E(this,"createFolder",async(e,t)=>{await re.createDirectory(Q(e))});E(this,"getFiles",async e=>{let t=await re.readDirectory(Q(e));t.files.forEach(i=>console.log(i));const n=[...t.files.map(i=>Vt(Pr(i.fullPath))),...t.directories.map(i=>ft(Pr(i.fullPath)))];return n.forEach(i=>console.log(i)),n});E(this,"getMetadata",async e=>{let t=await re.fileDetails(Q(e));return{lastModified:new Date(t.createdAt),size:async()=>(await re.readFile(Q(e))).byteLength}});E(this,"readBytes",async e=>await re.readFile(Q(e)));E(this,"readObject",async e=>await re.readFile(Q(e)));E(this,"readString",async e=>await re.readFile(Q(e)));E(this,"writeBytes",async(e,t)=>{await re.writeFile(Q(e),t)});E(this,"writeObject",async(e,t)=>{await re.writeFile(Q(e),t)});E(this,"writeString",async(e,t)=>{await re.writeFile(Q(e),t)});E(this,"deleteFile",async e=>re.removeFile(Q(e)));E(this,"deleteFolder",async e=>{await re.removeDirectory(Q(e))})}}const Cs="/assets/welcomeIcon-5ac88c8d.svg";function zs(r){let e,t,n,i;const o=r[2].default,s=Tr(o,r,r[1],null);return{c(){e=D("p"),s&&s.c(),g(e,"class","link disabled svelte-1bhc6i1")},m(a,u){P(a,e,u),s&&s.m(e,null),t=!0,n||(i=V(e,"click",function(){et(r[0])&&r[0].apply(this,arguments)}),n=!0)},p(a,u){r=a,s&&s.p&&(!t||u&2)&&Wr(s,o,r,r[1],t?Vr(o,r[1],u,null):Lr(r[1]),null)},i(a){t||(L(s,a),t=!0)},o(a){q(s,a),t=!1},d(a){a&&k(e),s&&s.d(a),n=!1,i()}}}function $s(r){let e,t,n,i;const o=r[2].default,s=Tr(o,r,r[1],null);return{c(){e=D("p"),s&&s.c(),g(e,"class","link svelte-1bhc6i1")},m(a,u){P(a,e,u),s&&s.m(e,null),t=!0,n||(i=V(e,"click",function(){et(r[0])&&r[0].apply(this,arguments)}),n=!0)},p(a,u){r=a,s&&s.p&&(!t||u&2)&&Wr(s,o,r,r[1],t?Vr(o,r[1],u,null):Lr(r[1]),null)},i(a){t||(L(s,a),t=!0)},o(a){q(s,a),t=!1},d(a){a&&k(e),s&&s.d(a),n=!1,i()}}}function Ts(r){let e,t,n,i;const o=[$s,zs],s=[];function a(u,l){return u[0]!=null?0:1}return e=a(r),t=s[e]=o[e](r),{c(){t.c(),n=pt()},m(u,l){s[e].m(u,l),P(u,n,l),i=!0},p(u,[l]){let c=e;e=a(u),e===c?s[e].p(u,l):(mt(),q(s[c],1,1,()=>{s[c]=null}),vt(),t=s[e],t?t.p(u,l):(t=s[e]=o[e](u),t.c()),L(t,1),t.m(n.parentNode,n))},i(u){i||(L(t),i=!0)},o(u){q(t),i=!1},d(u){s[e].d(u),u&&k(n)}}}function Ms(r,e,t){let{$$slots:n={},$$scope:i}=e,{onClick:o=void 0}=e;return r.$$set=s=>{"onClick"in s&&t(0,o=s.onClick),"$$scope"in s&&t(1,i=s.$$scope)},[o,i,n]}class Ue extends ue{constructor(e){super(),le(this,e,Ms,Ts,ie,{onClick:0})}}function Rr(r,e,t){const n=r.slice();return n[15]=e[t],n[17]=t,n}function Nr(r){let e,t=r[15]+"",n,i,o;function s(){return r[5](r[17])}return{c(){e=D("span"),n=B(t)},m(a,u){P(a,e,u),A(e,n),i||(o=[V(e,"mouseenter",s),V(e,"mouseleave",r[3])],i=!0)},p(a,u){r=a,u&2&&t!==(t=r[15]+"")&&Ae(n,t)},d(a){a&&k(e),i=!1,ke(o)}}}function Vs(r){let e,t=r[1],n=[];for(let i=0;i<t.length;i+=1)n[i]=Nr(Rr(r,t,i));return{c(){e=D("span");for(let i=0;i<n.length;i+=1)n[i].c();g(e,"class",r[0])},m(i,o){P(i,e,o);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(i,[o]){if(o&14){t=i[1];let s;for(s=0;s<t.length;s+=1){const a=Rr(i,t,s);n[s]?n[s].p(a,o):(n[s]=Nr(a),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}o&1&&g(e,"class",i[0])},i:z,o:z,d(i){i&&k(e),zn(n,i)}}}function Ws(r,e,t){let{className:n="text-4xl pt-4 pb-4 pl-2 pr-2"}=e,{value:i}=e;const o=i,s="abcdefghijklmnopqrstuvwxyz1234567890!@#$%^&*()-=[];',./".split("");let a=o.split(""),u,l,c=[];const d=()=>{c.forEach(v=>window.clearInterval(v))},h=()=>{for(let[v,p]of a.entries())c[v]=window.setInterval(()=>{if(a[v]==o.split("")[v]){window.clearInterval(c[v]);return}let S=y(p)??s[0];t(1,a[v]=S,a),p=S},20+Math.random()*10)},f=v=>{d(),u=window.setInterval(()=>{m(v),t(4,i=a.join(""))},3),window.clearTimeout(l),l=void 0},m=v=>{let p=y(a[v]);if(p==null){t(1,a[v]=s[0],a),v!=0&&m(v-1);return}t(1,a[v]=p,a)},y=v=>{if(v==null)return;let p=s.findIndex(S=>S==v)+1;return s[p]},_=()=>{window.clearInterval(u),u=void 0,l=window.setTimeout(h,2e3)},w=v=>{f(v)};return r.$$set=v=>{"className"in v&&t(0,n=v.className),"value"in v&&t(4,i=v.value)},[n,a,f,_,i,w]}class Ls extends ue{constructor(e){super(),le(this,e,Ws,Vs,ie,{className:0,value:4})}}function Zs(r){let e;return{c(){e=B("about me")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function qs(r){let e;return{c(){e=B("projects")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function Bs(r){let e;return{c(){e=B("blog?")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function Us(r){let e;return{c(){e=B("friends")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function Ys(r){let e;return{c(){e=B("links")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function Js(r){let e,t,n,i,o,s,a,u,l,c,d,h,f,m,y,_,w,v,p,S,N,x;return o=new Ls({props:{value:"welcome"}}),f=new Ue({props:{$$slots:{default:[Zs]},$$scope:{ctx:r}}}),y=new Ue({props:{$$slots:{default:[qs]},$$scope:{ctx:r}}}),w=new Ue({props:{$$slots:{default:[Bs]},$$scope:{ctx:r}}}),p=new Ue({props:{$$slots:{default:[Us]},$$scope:{ctx:r}}}),N=new Ue({props:{$$slots:{default:[Ys]},$$scope:{ctx:r}}}),{c(){e=D("div"),t=D("div"),n=D("span"),n.textContent="--------[",i=j(),ce(o.$$.fragment),s=j(),a=D("span"),a.textContent="]--------",u=j(),l=D("div"),l.innerHTML='<hr class="w-full border-gray-700"/>',c=j(),d=D("div"),h=D("section"),ce(f.$$.fragment),m=j(),ce(y.$$.fragment),_=j(),ce(w.$$.fragment),v=j(),ce(p.$$.fragment),S=j(),ce(N.$$.fragment),g(n,"class","grayed-out left text-4xl pt-4 pb-4 svelte-lvdier"),g(a,"class","grayed-out right text-4xl pt-4 pb-4 svelte-lvdier"),g(t,"class","h-center welcome-header"),g(e,"class","bg-gray-800 border-b-gray-700 pt-2 pb-2 drop-shadow-2xl"),g(l,"class","h-center"),g(h,"class","text-center"),g(d,"class","pt-6 options h-center")},m(F,b){P(F,e,b),A(e,t),A(t,n),A(t,i),se(o,t,null),A(t,s),A(t,a),P(F,u,b),P(F,l,b),P(F,c,b),P(F,d,b),A(d,h),se(f,h,null),A(h,m),se(y,h,null),A(h,_),se(w,h,null),A(h,v),se(p,h,null),A(h,S),se(N,h,null),x=!0},p(F,[b]){const O={};b&8&&(O.$$scope={dirty:b,ctx:F}),f.$set(O);const W={};b&8&&(W.$$scope={dirty:b,ctx:F}),y.$set(W);const K={};b&8&&(K.$$scope={dirty:b,ctx:F}),w.$set(K);const G={};b&8&&(G.$$scope={dirty:b,ctx:F}),p.$set(G);const we={};b&8&&(we.$$scope={dirty:b,ctx:F}),N.$set(we)},i(F){x||(L(o.$$.fragment,F),L(f.$$.fragment,F),L(y.$$.fragment,F),L(w.$$.fragment,F),L(p.$$.fragment,F),L(N.$$.fragment,F),x=!0)},o(F){q(o.$$.fragment,F),q(f.$$.fragment,F),q(y.$$.fragment,F),q(w.$$.fragment,F),q(p.$$.fragment,F),q(N.$$.fragment,F),x=!1},d(F){F&&k(e),ae(o),F&&k(u),F&&k(l),F&&k(c),F&&k(d),ae(f),ae(y),ae(w),ae(p),ae(N)}}}function Xs(r,e,t){let{process:n}=e,{window:i}=e;return i.icon=n.app.icon,i.classes="bg-gray-800",i.width=600,i.height=310,i.controlButtons={close:!1,minimize:!0,maximize:!1},r.$$set=o=>{"process"in o&&t(1,n=o.process),"window"in o&&t(0,i=o.window)},[i,n]}class Ks extends ue{constructor(e){super(),le(this,e,Xs,Js,ie,{process:1,window:0})}}class Fn extends te{constructor(){super("Welcome!",Ks,Cs)}}const Gs="modulepreload",Hs=function(r){return"/"+r},jr={},Ir=function(e,t,n){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=Hs(o),o in jr)return;jr[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let c=i.length-1;c>=0;c--){const d=i[c];if(d.href===o&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":Gs,s||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),s)return new Promise((c,d)=>{l.addEventListener("load",c),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};function Qs(r,e,t){let{process:n}=e,{window:i}=e;return r.$$set=o=>{"process"in o&&t(0,n=o.process),"window"in o&&t(1,i=o.window)},[n,i]}class ea extends ue{constructor(e){super(),le(this,e,Qs,null,ie,{process:0,window:1})}}const Ht=class extends te{constructor(){super("Blog",ea)}};let lt=Ht;E(lt,"entries",[]),(()=>{let e=Object.assign({"./entries/2-22-23.md":()=>Ir(()=>import("./2-22-23-e29374ff.js"),[]).then(t=>t.default),"./entries/2-23-23.md":()=>Ir(()=>import("./2-23-23-7fb24b5e.js"),[]).then(t=>t.default)});for(let t in e)e[t]().then(n=>{console.log(n),Ht.entries.push(n)})})();new Si({target:document.getElementById("app")});try{zi(new Is)}catch(r){console.error("Unable to initialize filesystem.",r)}te.registerApp(new gt);te.registerApp(new Qr);te.registerApp(new Fn);te.registerApp(new lt);document.addEventListener("keydown",r=>{r.ctrlKey==!0&&r.altKey==!0&&r.key.toLowerCase()=="d"&&ge.spawn(gt,{backgroundColor:"#1a1d1e"})});ge.spawn(Fn);
